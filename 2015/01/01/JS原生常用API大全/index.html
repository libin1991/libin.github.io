<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="面试,js,">










<meta name="description" content="用devicePixelRatio判断当前浏览器是否处于缩放状态12345var a=&amp;#123;n:1&amp;#125;;var b=a;a.x=a.y=a=&amp;#123;n:2&amp;#125;;    //a.x=&amp;#123;n:2&amp;#125;,a.y=&amp;#123;n:2&amp;#125;,此时a还是&amp;#123;n:1&amp;#125;,a=&amp;#123;n:2&amp;#125;console.log(a);    // &amp;">
<meta name="keywords" content="面试,js">
<meta property="og:type" content="article">
<meta property="og:title" content="JS原生常用API大全">
<meta property="og:url" content="http://yoursite.com/2015/01/01/JS原生常用API大全/index.html">
<meta property="og:site_name" content="Zero Days">
<meta property="og:description" content="用devicePixelRatio判断当前浏览器是否处于缩放状态12345var a=&amp;#123;n:1&amp;#125;;var b=a;a.x=a.y=a=&amp;#123;n:2&amp;#125;;    //a.x=&amp;#123;n:2&amp;#125;,a.y=&amp;#123;n:2&amp;#125;,此时a还是&amp;#123;n:1&amp;#125;,a=&amp;#123;n:2&amp;#125;console.log(a);    // &amp;">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/110.gif">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/2_20181206205220.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/3_20181206210151.png">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/a.webp">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/1_20181206205202.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/640.webp">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/62002d6d0dab2d26a897d9591bb64efd.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/20181109201728.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/微信图片_20181109201653.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/微信图片_20181109201814.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/微信图片_20181109201821.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/微信图片_20181109201850.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/微信图片_20181109201858.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/微信图片_20181109201910.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/微信图片_20181109202057.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/微信图片_20181109202113.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/微信图片_20181109202129.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/微信图片_20181109202148.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/微信图片_20181109202207.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/微信图片_20181109202213.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/微信图片_20181109202237.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/640.webp">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/v2-57add9333368254c8b108fdd00160585_hd.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/v2-2ac46bc7c3c82fdde73c1f53cf8e39d5_hd.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/10.png">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/001.jpg">
<meta property="og:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/122.webp">
<meta property="og:updated_time" content="2019-04-27T05:54:35.592Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JS原生常用API大全">
<meta name="twitter:description" content="用devicePixelRatio判断当前浏览器是否处于缩放状态12345var a=&amp;#123;n:1&amp;#125;;var b=a;a.x=a.y=a=&amp;#123;n:2&amp;#125;;    //a.x=&amp;#123;n:2&amp;#125;,a.y=&amp;#123;n:2&amp;#125;,此时a还是&amp;#123;n:1&amp;#125;,a=&amp;#123;n:2&amp;#125;console.log(a);    // &amp;">
<meta name="twitter:image" content="http://yoursite.com/2015/01/01/JS原生常用API大全/110.gif">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2015/01/01/JS原生常用API大全/">





  <title>JS原生常用API大全 | Zero Days</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband">
    	<div class="eevee"><div class="body"><div class="head"><div class="ears"><div class="ear"><div class="lobe"></div></div><div class="ear"><div class="lobe"></div></div></div><div class="face"><div class="eyes"><div class="eye"><div class="eyelid"></div></div><div class="eye"><div class="eyelid"></div></div></div><div class="nose"></div><div class="mouth"></div></div></div><div class="chest"><div class="fur"><div class="patch"></div></div><div class="fur"><div class="patch"></div></div><div class="fur"><div class="patch"></div></div></div><div class="legs"><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div></div><div class="tail"><div class="tail"><div class="tail"><div class="tail"><div class="tail"><div class="tail -end"></div></div></div></div></div></div></div></div>
    </div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
    	<div id="sky">
				<div id="background" class="container">
			<!-- svg file -->
			<svg id="svgout" height="100%" width="100%" viewbox="0 0 550 400">
				<defs>
					<g id="bottomShadow">
						<path fill="#000000" stroke="none" d="
		M 270.5 225.95
		L 127.35 316.65 266.8 400 409.6 309.25 270.5 225.95 Z"/>
					</g>
					<g id="Layer52_0_FILL">
						<path class="topGrass" fill="#B9D668" stroke="none" d="
	M 397.85 229.3
	L 397.85 225.6 269.85 152 135.75 228.6 135.75 233.65 262.1 306.55 397.85 229.3 Z"/>
					</g>
					<g id="Layer51_0_FILL">
						<path class="leftSideGrass" fill="#6E9E4F" stroke="none" d="
	M 135.1 229.95
	L 135.1 256.85 262.1 328.4 262.1 301.85 135.1 229.95 Z"/>
					</g>
					<g id="Layer50_0_FILL">
						<path class="rightGrassTop" fill="#8CB154" stroke="none" d="
	M 397.85 225.95
	L 395.8 225.95 261.75 301.55 261.75 328.4 397.85 251.15 397.85 225.95 Z"/>
					</g>
					<g id="Layer48_0_FILL">
						<path class="crustLeftTop" fill="#955541" stroke="none" d="
	M 135.45 282.4
	L 135.75 298.15 262.1 372.1 261.75 355.65 135.45 282.4 Z"/>
					</g>
					<g id="Layer47_0_FILL">
						<path class="middleLeftCrust" fill="#C77E61" stroke="none" d="
	M 135.1 270.3
	L 135.1 283.05 275.9 364.35 271.85 348.9 135.1 270.3 Z"/>
					</g>
					<g id="Layer46_0_FILL">
						<path class="crustLeftTop" fill="#955541" stroke="none" d="
	M 135.1 255.15
	L 135.1 270.3 262.1 343.55 262.1 328.05 135.1 255.15 Z"/>
					</g>
					<g id="Layer45_0_FILL">
						<path class="topRightCrust" fill="#A47237" stroke="none" d="
	M 397.5 294.5
	L 397.5 277 261.75 355.3 261.75 372.75 397.5 294.5 Z"/>
					</g>
					<g id="Layer44_0_FILL">
						<path class="middleRightCrust" fill="#C89451" stroke="none" d="
	M 397.5 269.95
	L 397.15 266.6 262.1 343.2 262.1 355.95 397.5 279.7 397.5 269.95 Z"/>
					</g>
					<g id="Layer43_0_FILL">
						<path class="topRightCrust" fill="#A47237" stroke="none" d="
	M 397.5 266.6
	L 397.5 250.45 261.75 328.4 261.75 343.85 397.5 266.6 Z"/>
					</g>
					<g id="Layer41_0_FILL">
						<path class="greyRoad" fill="#B2B2B1" stroke="none" d="
	M 295.05 283.05
	Q 299.05 280.35 308.45 275.3 317.85 269.95 323.6 266.9
	L 268.8 233.65 338.05 191.35 309.15 174.55 177.75 254.5
	Q 191.55 262.2 198.25 266.25 204.65 269.95 209.7 271.95
	L 241.6 250.45 295.05 283.05 Z"/>
					</g>
					<g id="Layer40_0_FILL">
						<path fill="#FFFFFF" stroke="none" d="
	M 199.95 256.85
	Q 194.55 261.2 191.9 262.2
	L 194.9 263.9 200.95 259.2 199.95 256.85
	M 225.8 243.75
	L 224.8 241.75 211.05 250.8 212.05 252.8 225.8 243.75
	M 308.15 275.65
	L 296.7 266.6 295.35 268.6 306.8 277.7 308.15 275.65
	M 275.9 253.5
	L 274.55 255.5 285.95 264.55 287.3 262.55 275.9 253.5
	M 251.7 227.3
	L 250.7 225.25 236.9 234.35 237.9 236.35 251.7 227.3
	M 257.05 240.7
	L 254.05 240.7 268.8 249.8 269.5 247.75 257.05 240.7
	M 277.2 207.8
	L 263.45 216.85 264.45 218.9 278.25 209.8 277.2 207.8
	M 305.1 192.65
	L 304.1 190.65 290.3 199.75 291.35 201.75 305.1 192.65 Z"/>
					</g>
					<g id="Layer38_0_FILL">
						<path class="frontFascia" fill="#ECB27B" stroke="none" d="
	M 359.25 187.95
	L 346.4 174.95 333.85 202.9 359.25 187.95 Z"/>
					</g>
					<g id="Layer37_0_FILL">
						<path class="frontWall" fill="#EFA258" stroke="none" d="
	M 334 201.05
	L 334.35 232 359.2 217.55 359.25 187.95 334 201.05 Z"/>
					</g>
					<g id="Layer36_0_FILL">
						<path class="leftWall" fill="#C57F42" stroke="none" d="
	M 334.35 232.3
	L 334.35 205.1 305.1 191.35 305.1 216.85 334.35 232.3 Z"/>
					</g>
					<g id="Layer35_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 329.7 167.9
	L 331.05 167.9 344.55 176.7 347.85 176.7 363 192.25 363.15 189.55 350.65 176.7 350.55 176.7 334.25 167.5 334.25 159.1 329.7 159.1 329.7 164.9 322.65 160.95 322.3 162.15 329.7 167 329.7 167.9 Z"/>
					</g>
					<g id="Layer34_0_FILL">
						<path class="leftRoof" fill="#F2563B" stroke="none" d="
	M 334.05 207.05
	L 350.65 176.7 322.1 160.45 302.1 192.05 334.05 207.05 Z"/>
					</g>
					<g id="Layer30_0_FILL">
						<path id="windowFour" class="windows" stroke="none" fill="#975A42" d="
	M 341.35 203.3
	Q 340.9 203.45 340.5 203.8 340.1 204.2 339.85 204.75 339.7 205 339.7 205.3 339.6 205.75 339.7 206.1 339.7 206.15 339.7 206.2 339.8 206.5 340 206.8 340.55 207.4 341.45 207.4 342.35 207.4 343 206.8 343.4 206.5 343.65 206.1 343.85 205.75 343.95 205.3 344.05 204.4 343.55 203.8 343.3 203.45 343 203.3 342.65 203.15 342.2 203.15 341.8 203.15 341.35 203.3
	M 355.85 198.45
	Q 355.8 198.2 355.6 198 355.1 197.4 354.2 197.4 353.35 197.4 352.6 198 351.85 198.65 351.7 199.55 351.7 199.7 351.7 199.85 351.6 200.5 352 201.05 352.55 201.65 353.45 201.65 354.3 201.65 355.05 201.05 355.45 200.7 355.7 200.25 355.8 200.05 355.9 199.85 355.95 199.7 355.95 199.55 356.05 198.95 355.85 198.45 Z"/>
						<path class="door" fill="#B65041" stroke="none" d="
	M 351.95 211.2
	L 351.8 211.2 346.05 215.1 346.05 225.2 351.95 221.6 351.95 211.2
	M 351.2 211.2
	L 351.35 211.2 351.35 211.1 351.2 211.2 Z"/>
					</g>
					<g>
						<path id="Layer30_0_FILL" fill="#000000" fill-opacity="1" stroke="none" d="
	M 183.7 215.3
	L 183.7 215.6
	Q 187.25 231.75 212.25 234.35
	L 183.7 215.3 Z"/>
					</g>
					<g id="Layer29_0_FILL">
						<path fill="#000000" fill-opacity="0.4" stroke="none" d="
	M 305.1 216.85
	L 305.15 217.2
	Q 309.45 233.2 334.35 232.3
	L 305.1 216.85 Z"/>
					</g>
					<g id="Layer27_0_FILL">
						<path class="vegetation" fill="#78A950" stroke="none" d="
	M 177.45 231.65
	Q 175.75 235.35 181.8 239.35 185.5 235.7 185.15 231.3 182.8 230.65 181.45 234 179.45 231.3 177.45 231.65
	M 236.9 266.6
	Q 235.2 270.3 241.25 274.3 244.95 270.6 244.65 266.25 242.3 265.6 240.95 268.95 238.9 266.25 236.9 266.6
	M 254.7 277
	Q 253.05 280.7 259.1 284.75 262.75 281.05 262.45 276.65 260.1 276 258.75 279.35 256.7 276.65 254.7 277
	M 315.5 245.75
	Q 313.5 243.05 311.5 243.4 309.8 247.1 315.85 251.15 319.55 247.45 319.2 243.05 316.85 242.4 315.5 245.75
	M 295.35 232.65
	Q 293.7 236.35 299.75 240.4 303.45 236.7 303.1 232.3 300.75 231.65 299.4 235 297.4 232.3 295.35 232.65
	M 277.2 171.85
	Q 275.55 175.55 281.6 179.55 285.3 175.85 284.95 171.5 282.6 170.85 281.25 174.2 279.25 171.5 277.2 171.85 Z"/>
					</g>
					<g id="Layer26_0_FILL">
						<path class="treeWood" fill="#AE663D" stroke="none" d="
	M 175.1 177.55
	L 172.05 177.55 172.05 191.1 159.3 172.85
	Q 154.6 171.5 172.05 195.7
	L 172.05 212.5 175.1 212.5 175.1 177.55
	M 252.7 151.35
	L 249 151.35 249 176.9 252.7 176.9 252.7 151.35 Z"/>
					</g>
					<g id="Layer25_0_FILL">
						<path class="vegetation" fill="#77A951" stroke="none" d="
	M 192.55 179.55
	Q 200.95 173.5 200.95 165.1 200.95 156.4 192.55 150 184.15 144.3 172.05 144.3 160.3 144.3 151.9 150 143.15 156.4 143.15 165.1 143.15 173.5 151.9 179.55 160.3 185.95 172.05 185.95 184.15 185.95 192.55 179.55
	M 236.25 106.65
	Q 230.2 116.05 230.2 129.15 230.2 142.25 236.25 151.35 242.3 160.75 250.7 160.75 258.75 160.75 264.8 151.35 270.85 142.25 270.85 129.15 270.85 116.05 264.8 106.65 258.75 97.6 250.7 97.6 242.3 97.6 236.25 106.65 Z"/>
					</g>
					<g id="Layer24_0_FILL">
						<path class="vegetation" fill="#77A951" stroke="none" d="
	M 158.3 221.9
	Q 160.65 221.9 161.95 220.2 163 219.55 163.3 218.55 164.65 218.9 166.35 218.9 170.05 218.9 172.4 216.2 175.1 213.85 175.1 210.15 175.1 206.45 172.4 203.75 170.05 201.4 166.35 201.4 162.65 201.4 159.95 203.75 157.6 206.45 157.6 210.15 157.6 210.8 157.6 211.15 155.95 211.5 154.6 212.5 152.9 214.15 152.9 216.55 152.9 218.9 154.6 220.2 156.25 221.9 158.3 221.9
	M 338.35 240.05
	Q 341.05 237.7 341.05 234 341.05 230.3 338.35 227.6 336 225.25 332.3 225.25 328.65 225.25 325.95 227.6 323.6 230.3 323.6 234 323.6 237.7 325.95 240.05 328.65 242.75 332.3 242.75 336 242.75 338.35 240.05 Z"/>
					</g>
					<g id="Layer22_0_FILL">
						<path class="rightRoof" fill="#D05041" stroke="none" d="
	M 220 173.85
	L 236.8 186.7 264.35 171.15 244.5 159.55 220 173.85 Z"/>
					</g>
					<g id="Layer21_0_FILL">
						<path class="leftWall" fill="#C57F42" stroke="none" d="
	M 212.25 191.35
	L 183.35 172.3 183.7 215.3 212.25 234.35 212.25 191.35 Z"/>
					</g>
					<g id="Layer20_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 192.1 149.85
	L 236.45 174.8 243.1 171.4
	Q 220.05 150.55 196.3 139.95
	L 192.1 149.85 Z"/>
					</g>
					<g id="Layer19_0_FILL">
						<path class="frontFascia" fill="#EBB17B" stroke="none" d="
	M 226.85 160.95
	L 212 190.6 229.75 192.6 239.75 172.85 226.85 160.95 Z"/>
					</g>
					<g id="Layer18_0_FILL">
						<path class="frontWall" fill="#EFA258" stroke="none" d="
	M 240.15 172.65
	L 211.9 191.6 212.25 233.65 264.35 201.7 264.35 170.8 240.8 184.45 240.15 172.65 Z"/>
					</g>
					<g id="Layer17_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 210.9 142.2
	L 205.9 142.2 205.9 152.65 210.9 152.65 210.9 142.2 Z"/>
					</g>
					<g>
						<path id="Layer16_0_FILL" class="leftRoof" fill="#F2563B" stroke="none" d="
	M 210.25 195.5
	L 227.4 160.95 195.45 141.35 177.65 175.85 210.25 195.5 Z"/>
					</g>
					<g>
						<path id="sun" fill="#E3BD0E" stroke="none" d="
	M 257.05 15.95
	Q 251.7 15.95 248 19.65 244.3 23.35 244.3 28.7 244.3 34.1 248 37.8 251.7 41.5 257.05 41.5 262.45 41.5 266.15 37.8 269.85 34.1 269.85 28.7 269.85 23.35 266.15 19.65 262.45 15.95 257.05 15.95 Z"/>
					</g>
					<g id="Layer8_0_FILL">
						<path fill="#975A42" stroke="none" d="
	M 238.45 189.65
	Q 238.295703125 189.362109375 238.05 189.1 237.35 188.3 236.2 188.3 235.05 188.3 234.15 189.1 233.3 189.9 233.2 191.05 233.1 192.2 233.8 193 234.55 193.8 235.7 193.8 236.85 193.8 237.7 193 238.1970703125 192.558203125 238.45 192 238.6552734375 191.56484375 238.7 191.05 238.7671875 190.276953125 238.45 189.65
	M 220.55 197.55
	Q 220 197.55 219.5 197.75 218.95 197.95 218.5 198.35 217.933203125 198.8833984375 217.7 199.55 217.5833984375 199.916796875 217.55 200.3 217.4923828125 200.96171875 217.7 201.5 217.852734375 201.9103515625 218.15 202.25 218.95 203.05 220.1 203.05 221.25 203.05 222.05 202.25 222.95 201.45 223.05 200.3 223.15 199.15 222.4 198.35 222.05 197.95 221.65 197.75 221.15 197.55 220.55 197.55 Z"/>
					</g>
					<g id="Layer7_0_FILL">
						<path class="door" fill="#B65041" stroke="none" d="
	M 233.55 206.75
	L 225.9 211.95 226.25 225.5 233.95 220.35 233.55 206.75 Z"/>
					</g>
					<g>
						<path id="windowOne" class="windows" fill="#975A42" stroke="none" d="
	M 188.65 198.4
	L 188.8 204.1 198.65 210.45 198.55 204.75 188.65 198.4
	M 208.45 216.8
	L 208.35 211.1 198.55 204.75 198.65 210.45 208.45 216.8
	M 188.8 204.1
	L 188.95 209.8 198.8 216.15 198.65 210.45 188.8 204.1
	M 208.6 222.5
	L 208.45 216.8 198.65 210.45 198.8 216.15 208.6 222.5 Z"/>
					</g>
					<g>
						<path id="windowThree" class="windows" fill="#975A42" stroke="none" d="
	M 311.7 214.1
	L 318.55 217.55 318.45 211.9 311.6 208.45 311.7 214.1
	M 325.4 221
	L 325.25 215.35 318.45 211.9 318.55 217.55 325.4 221
	M 318.4 206.2
	L 311.5 202.75 311.6 208.45 318.45 211.9 318.4 206.2
	M 325.25 215.35
	L 325.2 209.7 318.4 206.2 318.45 211.9 325.25 215.35 Z"/>
					</g>
					<g id="Layer2_0_FILL">
						<path class="door" fill="#B65041" stroke="none" d="
	M 259.7 183.25
	L 244.6 191.9 244.6 213.8 259.7 204.55 259.7 183.25 Z"/>
					</g>
					<path id="windowTwo" fill="#975A42" class="windows" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" d="
	M 223.05 200.3
	Q 222.95 201.45 222.05 202.25 221.25 203.05 220.1 203.05 218.95 203.05 218.15 202.25 217.852734375 201.9103515625 217.7 201.5 217.4923828125 200.96171875 217.55 200.3 217.5833984375 199.916796875 217.7 199.575 217.933203125 198.8833984375 218.5 198.35 218.95 197.95 219.5 197.75 220 197.55 220.55 197.55 221.15 197.55 221.65 197.75 222.05 197.95 222.4 198.35 223.15 199.15 223.05 200.3 Z
	M 238.7 191.05
	Q 238.6552734375 191.56484375 238.45 192 238.1970703125 192.558203125 237.7 193 236.85 193.8 235.7 193.8 234.55 193.8 233.8 193 233.1 192.2 233.2 191.05 233.3 189.9 234.15 189.1 235.05 188.3 236.2 188.3 237.35 188.3 238.05 189.1 238.295703125 189.362109375 238.45 189.65 238.7671875 190.276953125 238.7 191.05 Z"/>
					<path fill="#F2563B" stroke="none" d=" M 351.95 211.2 L 351.8 211.2 346.05 215.1 346.05 225.2 351.95 221.6 351.95 211.2 Z"/>
					<path id="Layer6_0_1_STROKES" class="windowRims" stroke="#AE663D" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" fill="none" d="
	M 198.55 204.75
	L 208.35 211.1 208.45 216.8 208.6 222.5 198.8 216.15 188.95 209.8 188.8 204.1 188.65 198.4 198.55 204.75 198.65 210.45 208.45 216.8
	M 198.8 216.15
	L 198.65 210.45 188.8 204.1"/>
					<path id="Layer5_0_1_STROKES" class="windowRims" stroke="#AE663D" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" fill="none" d="
	M 325.25 215.35
	L 325.4 221 318.55 217.55 311.7 214.1 311.6 208.45 311.5 202.75 318.4 206.2 325.2 209.7 325.25 215.35 318.45 211.9 318.55 217.55
	M 318.4 206.2
	L 318.45 211.9 311.6 208.45"/>
				</defs>
				<g id="shadow">
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use xlink:href="#bottomShadow"/>
					</g>
				</g>
				<g transform="matrix( 1, 0, 0, 1, 0,0) ">
					<use xlink:href="#sun"/>
				</g>
				<g id="earth">
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer52_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer51_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer50_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer48_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer47_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer46_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer45_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer44_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer43_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer41_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer40_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer38_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer37_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer36_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer35_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer34_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowFour"/>
						<use class="element" xlink:href="#Layer32_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer30_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer27_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer26_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer25_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer24_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer22_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer21_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer20_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer19_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer18_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer17_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer16_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer8_0_FILL"/>
						<use class="element" xlink:href="#windowTwo"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer7_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowOne"/>
						<use class="element" xlink:href="#Layer6_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowThree"/>
						<use class="element" xlink:href="#Layer5_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer2_0_FILL"/>
					</g>
				</g>
			</svg>
			<! -- End of SVG file -->
			<! -- Moon/Sun Toggle -->
			<div id="toggleButton" class="day-toggle">
				<div class="sun-icon"></div>
				<label class="switch">
            <input id="toggleCheckbox" type="checkbox">
            <div class="slider"></div>
        </label>
				<div class="cloud-icon"></div>
			</div>
			<! -- Moon/Sun Toggle -->
			<! -- End of Container -->
		</div>
			</div>
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Zero Days</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">人生如逆旅    我亦是行人</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/01/01/JS原生常用API大全/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="李斌">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zero Days">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">JS原生常用API大全</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-01-01T21:11:22+08:00">
                2015-01-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="用devicePixelRatio判断当前浏览器是否处于缩放状态"><a href="#用devicePixelRatio判断当前浏览器是否处于缩放状态" class="headerlink" title="用devicePixelRatio判断当前浏览器是否处于缩放状态"></a>用devicePixelRatio判断当前浏览器是否处于缩放状态</h3><p><img src="/2015/01/01/JS原生常用API大全/110.gif" alt><br><img src="/2015/01/01/JS原生常用API大全/2_20181206205220.jpg" alt><br><img src="/2015/01/01/JS原生常用API大全/3_20181206210151.png" alt><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var a=&#123;n:1&#125;;</span><br><span class="line">var b=a;</span><br><span class="line">a.x=a.y=a=&#123;n:2&#125;;    //a.x=&#123;n:2&#125;,a.y=&#123;n:2&#125;,此时a还是&#123;n:1&#125;,a=&#123;n:2&#125;</span><br><span class="line">console.log(a);    // &#123;n: 2&#125;</span><br><span class="line">console.log(b);   //&#123;n: 1, y: &#123;…&#125;, x: &#123;…&#125;&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="ES6模块是编译时加载是什么意思"><a href="#ES6模块是编译时加载是什么意思" class="headerlink" title="ES6模块是编译时加载是什么意思"></a>ES6模块是编译时加载是什么意思</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">JS的“编译”可能指三种流程：transform、bundle、uglify。</span><br><span class="line"></span><br><span class="line">transform：把ES6+的JS转译成es5或以下引擎能运行的代码。</span><br><span class="line">bundle：合并依赖的模块。</span><br><span class="line">uglify：压缩丑化，减小体积。</span><br><span class="line"></span><br><span class="line">这种加载称为“编译时加载”或者静态加载，即 ES6 可以在编译时就完成模块加载，效率要比 CommonJS 模块的加载方式高</span><br><span class="line">ES6模块是编译时加载：模块之间的依赖关系，在运行之前（即编译时）就通过静态分析来确定好了的。</span><br><span class="line"></span><br><span class="line">浏览器JS引擎遇到</span><br><span class="line">&lt;script type=<span class="string">"module"</span>&gt;</span><br><span class="line">  <span class="keyword">import</span> &#123;addTextToBody&#125; <span class="keyword">from</span> <span class="string">'./utils.js'</span>;</span><br><span class="line">  addTextToBody(<span class="string">'Modules are pretty cool.'</span>);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">既完成模块的引用确定,V8在编译js的既完成依赖关系，比CommonJS运行时才去加载效率高</span></span><br></pre></td></tr></table></figure>
<h3 id="原生JS-API"><a href="#原生JS-API" class="headerlink" title="原生JS API"></a>原生JS API</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br></pre></td><td class="code"><pre><span class="line">一、节点</span><br><span class="line">1.1 节点属性</span><br><span class="line">Node.nodeName   //返回节点名称，只读</span><br><span class="line">Node.nodeType   //返回节点类型的常数值，只读</span><br><span class="line">Node.nodeValue  //返回Text或Comment节点的文本值，只读</span><br><span class="line">Node.textContent  //返回当前节点和它的所有后代节点的文本内容，可读写</span><br><span class="line">Node.baseURI    //返回当前网页的绝对路径</span><br><span class="line"></span><br><span class="line">Node.ownerDocument  //返回当前节点所在的顶层文档对象，即document</span><br><span class="line">Node.nextSibling  //返回紧跟在当前节点后面的第一个兄弟节点</span><br><span class="line">Node.previousSibling  //返回当前节点前面的、距离最近的一个兄弟节点</span><br><span class="line">Node.parentNode   //返回当前节点的父节点</span><br><span class="line">Node.parentElement  //返回当前节点的父Element节点</span><br><span class="line">Node.childNodes   //返回当前节点的所有子节点</span><br><span class="line">Node.firstChild  //返回当前节点的第一个子节点</span><br><span class="line">Node.lastChild   //返回当前节点的最后一个子节点</span><br><span class="line"></span><br><span class="line">//parentNode接口</span><br><span class="line">Node.children  //返回指定节点的所有Element子节点</span><br><span class="line">Node.firstElementChild  //返回当前节点的第一个Element子节点</span><br><span class="line">Node.lastElementChild   //返回当前节点的最后一个Element子节点</span><br><span class="line">Node.childElementCount  //返回当前节点所有Element子节点的数目。</span><br><span class="line">1.2 操作</span><br><span class="line">Node.appendChild(node)   //向节点添加最后一个子节点</span><br><span class="line">Node.hasChildNodes()   //返回布尔值，表示当前节点是否有子节点</span><br><span class="line">Node.cloneNode(true);  // 默认为false(克隆节点), true(克隆节点及其属性，以及后代)</span><br><span class="line">Node.insertBefore(newNode,oldNode)  // 在指定子节点之前插入新的子节点</span><br><span class="line">Node.removeChild(node)   //删除节点，在要删除节点的父节点上操作</span><br><span class="line">Node.replaceChild(newChild,oldChild)  //替换节点</span><br><span class="line">Node.contains(node)  //返回一个布尔值，表示参数节点是否为当前节点的后代节点。</span><br><span class="line">Node.compareDocumentPosition(node)   //返回一个7个比特位的二进制值，表示参数节点和当前节点的关系</span><br><span class="line">Node.isEqualNode(noe)  //返回布尔值，用于检查两个节点是否相等。所谓相等的节点，指的是两个节点的类型相同、属性相同、子节点相同。</span><br><span class="line">Node.normalize()   //用于清理当前节点内部的所有Text节点。它会去除空的文本节点，并且将毗邻的文本节点合并成一个。</span><br><span class="line"></span><br><span class="line">//ChildNode接口</span><br><span class="line">Node.remove()  //用于删除当前节点</span><br><span class="line">Node.before()  //</span><br><span class="line">Node.after()</span><br><span class="line">Node.replaceWith()</span><br><span class="line">1.3 Document节点</span><br><span class="line">1.3.1 Document节点的属性</span><br><span class="line">document.doctype   //</span><br><span class="line">document.documentElement  //返回当前文档的根节点</span><br><span class="line">document.defaultView   //返回document对象所在的window对象</span><br><span class="line">document.body   //返回当前文档的&lt;body&gt;节点</span><br><span class="line">document.head   //返回当前文档的&lt;head&gt;节点</span><br><span class="line">document.activeElement  //返回当前文档中获得焦点的那个元素。</span><br><span class="line"></span><br><span class="line">//节点集合属性</span><br><span class="line">document.links  //返回当前文档的所有a元素</span><br><span class="line">document.forms  //返回页面中所有表单元素</span><br><span class="line">document.images  //返回页面中所有图片元素</span><br><span class="line">document.embeds  //返回网页中所有嵌入对象</span><br><span class="line">document.scripts  //返回当前文档的所有脚本</span><br><span class="line">document.styleSheets  //返回当前网页的所有样式表</span><br><span class="line"></span><br><span class="line">//文档信息属性</span><br><span class="line">document.documentURI  //表示当前文档的网址</span><br><span class="line">document.URL  //返回当前文档的网址</span><br><span class="line">document.domain  //返回当前文档的域名</span><br><span class="line">document.lastModified  //返回当前文档最后修改的时间戳</span><br><span class="line">document.location  //返回location对象，提供当前文档的URL信息</span><br><span class="line">document.referrer  //返回当前文档的访问来源</span><br><span class="line">document.title    //返回当前文档的标题</span><br><span class="line">document.characterSet属性返回渲染当前文档的字符集，比如UTF-8、ISO-8859-1。</span><br><span class="line">document.readyState  //返回当前文档的状态</span><br><span class="line">document.designMode  //控制当前文档是否可编辑，可读写</span><br><span class="line">document.compatMode  //返回浏览器处理文档的模式</span><br><span class="line">document.cookie   //用来操作Cookie</span><br><span class="line">1.3.2 Document节点的方法</span><br><span class="line">（1）读写方法</span><br><span class="line">document.open()   //用于新建并打开一个文档</span><br><span class="line">document.close()   //不安比open方法所新建的文档</span><br><span class="line">document.write()   //用于向当前文档写入内容</span><br><span class="line">document.writeIn()  //用于向当前文档写入内容，尾部添加换行符。</span><br><span class="line">（2）查找节点</span><br><span class="line">document.querySelector(selectors)   //接受一个CSS选择器作为参数，返回第一个匹配该选择器的元素节点。</span><br><span class="line">document.querySelectorAll(selectors)  //接受一个CSS选择器作为参数，返回所有匹配该选择器的元素节点。</span><br><span class="line">document.getElementsByTagName(tagName)  //返回所有指定HTML标签的元素</span><br><span class="line">document.getElementsByClassName(className)   //返回包括了所有class名字符合指定条件的元素</span><br><span class="line">document.getElementsByName(name)   //用于选择拥有name属性的HTML元素（比如&lt;form&gt;、&lt;radio&gt;、&lt;img&gt;、&lt;frame&gt;、&lt;embed&gt;和&lt;object&gt;等）</span><br><span class="line">document.getElementById(id)   //返回匹配指定id属性的元素节点。</span><br><span class="line">document.elementFromPoint(x,y)  //返回位于页面指定位置最上层的Element子节点。</span><br><span class="line">（3）生成节点</span><br><span class="line">document.createElement(tagName)   //用来生成HTML元素节点。</span><br><span class="line">document.createTextNode(text)   //用来生成文本节点</span><br><span class="line">document.createAttribute(name)  //生成一个新的属性对象节点，并返回它。</span><br><span class="line">document.createDocumentFragment()  //生成一个DocumentFragment对象</span><br><span class="line">（4）事件方法</span><br><span class="line">document.createEvent(type)   //生成一个事件对象，该对象能被element.dispatchEvent()方法使用</span><br><span class="line">document.addEventListener(type,listener,capture)  //注册事件</span><br><span class="line">document.removeEventListener(type,listener,capture)  //注销事件</span><br><span class="line">document.dispatchEvent(event)  //触发事件</span><br><span class="line">（5）其他</span><br><span class="line">document.hasFocus()   //返回一个布尔值，表示当前文档之中是否有元素被激活或获得焦点。</span><br><span class="line">document.adoptNode(externalNode)  //将某个节点，从其原来所在的文档移除，插入当前文档，并返回插入后的新节点。</span><br><span class="line">document.importNode(externalNode, deep)   //从外部文档拷贝指定节点，插入当前文档。</span><br><span class="line">1.4 Element节点</span><br><span class="line">1.4.1 Element节点的属性</span><br><span class="line">（1）特性属性</span><br><span class="line">Element.attributes  //返回当前元素节点的所有属性节点</span><br><span class="line">Element.id  //返回指定元素的id属性，可读写</span><br><span class="line">Element.tagName  //返回指定元素的大写标签名</span><br><span class="line">Element.innerHTML   //返回该元素包含的HTML代码，可读写</span><br><span class="line">Element.outerHTML  //返回指定元素节点的所有HTML代码，包括它自身和包含的的所有子元素，可读写</span><br><span class="line">Element.className  //返回当前元素的class属性，可读写</span><br><span class="line">Element.classList  //返回当前元素节点的所有class集合</span><br><span class="line">Element.dataset   //返回元素节点中所有的data-*属性。</span><br><span class="line">（2）尺寸属性</span><br><span class="line">Element.clientHeight   //返回元素节点可见部分的高度</span><br><span class="line">Element.clientWidth   //返回元素节点可见部分的宽度</span><br><span class="line">Element.clientLeft   //返回元素节点左边框的宽度</span><br><span class="line">Element.clientTop   //返回元素节点顶部边框的宽度</span><br><span class="line">Element.scrollHeight  //返回元素节点的总高度</span><br><span class="line">Element.scrollWidth  //返回元素节点的总宽度</span><br><span class="line">Element.scrollLeft   //返回元素节点的水平滚动条向右滚动的像素数值,通过设置这个属性可以改变元素的滚动位置</span><br><span class="line">Element.scrollTop   //返回元素节点的垂直滚动向下滚动的像素数值</span><br><span class="line">Element.offsetHeight   //返回元素的垂直高度(包含border,padding)</span><br><span class="line">Element.offsetWidth    //返回元素的水平宽度(包含border,padding)</span><br><span class="line">Element.offsetLeft    //返回当前元素左上角相对于Element.offsetParent节点的垂直偏移</span><br><span class="line">Element.offsetTop   //返回水平位移</span><br><span class="line">Element.style  //返回元素节点的行内样式</span><br><span class="line">（3）节点相关属性</span><br><span class="line">Element.children   //包括当前元素节点的所有子元素</span><br><span class="line">Element.childElementCount   //返回当前元素节点包含的子HTML元素节点的个数</span><br><span class="line">Element.firstElementChild  //返回当前节点的第一个Element子节点  </span><br><span class="line">Element.lastElementChild   //返回当前节点的最后一个Element子节点  </span><br><span class="line">Element.nextElementSibling  //返回当前元素节点的下一个兄弟HTML元素节点</span><br><span class="line">Element.previousElementSibling  //返回当前元素节点的前一个兄弟HTML节点</span><br><span class="line">Element.offsetParent   //返回当前元素节点的最靠近的、并且CSS的position属性不等于static的父元素。</span><br><span class="line">1.4.2 Element节点的方法</span><br><span class="line">（1）位置方法</span><br><span class="line">getBoundingClientRect()  </span><br><span class="line">// getBoundingClientRect返回一个对象，包含top,left,right,bottom,width,height // width、height 元素自身宽高</span><br><span class="line">// top 元素上外边界距窗口最上面的距离</span><br><span class="line">// right 元素右外边界距窗口最上面的距离</span><br><span class="line">// bottom 元素下外边界距窗口最上面的距离</span><br><span class="line">// left 元素左外边界距窗口最上面的距离</span><br><span class="line">// width 元素自身宽(包含border,padding) </span><br><span class="line">// height 元素自身高(包含border,padding) </span><br><span class="line"></span><br><span class="line">getClientRects()   //返回当前元素在页面上形参的所有矩形。</span><br><span class="line"></span><br><span class="line">// 元素在页面上的偏移量  </span><br><span class="line">var rect = el.getBoundingClientRect()  </span><br><span class="line">return &#123;   </span><br><span class="line">  top: rect.top + document.body.scrollTop,   </span><br><span class="line">  left: rect.left + document.body.scrollLeft  </span><br><span class="line">&#125;</span><br><span class="line">（2）属性方法</span><br><span class="line">Element.getAttribute()：读取指定属性  </span><br><span class="line">Element.setAttribute()：设置指定属性  </span><br><span class="line">Element.hasAttribute()：返回一个布尔值，表示当前元素节点是否有指定的属性  </span><br><span class="line">Element.removeAttribute()：移除指定属性</span><br><span class="line">（3）查找方法</span><br><span class="line">Element.querySelector()  </span><br><span class="line">Element.querySelectorAll()  </span><br><span class="line">Element.getElementsByTagName()  </span><br><span class="line">Element.getElementsByClassName()</span><br><span class="line">（4）事件方法</span><br><span class="line">Element.addEventListener()：添加事件的回调函数  </span><br><span class="line">Element.removeEventListener()：移除事件监听函数  </span><br><span class="line">Element.dispatchEvent()：触发事件</span><br><span class="line"></span><br><span class="line">//ie8</span><br><span class="line">Element.attachEvent(oneventName,listener)</span><br><span class="line">Element.detachEvent(oneventName,listener)</span><br><span class="line"></span><br><span class="line">// event对象  </span><br><span class="line">var event = window.event||event;    </span><br><span class="line"></span><br><span class="line">// 事件的目标节点  </span><br><span class="line">var target = event.target || event.srcElement;</span><br><span class="line"></span><br><span class="line">// 事件代理  </span><br><span class="line">ul.addEventListener(&apos;click&apos;, function(event) &#123;   </span><br><span class="line">  if (event.target.tagName.toLowerCase() === &apos;li&apos;) &#123;   </span><br><span class="line">    console.log(event.target.innerHTML)   </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;);</span><br><span class="line">（5）其他</span><br><span class="line">Element.scrollIntoView()   //滚动当前元素，进入浏览器的可见区域</span><br><span class="line"></span><br><span class="line">//解析HTML字符串，然后将生成的节点插入DOM树的指定位置。</span><br><span class="line">Element.insertAdjacentHTML(where, htmlString); </span><br><span class="line">Element.insertAdjacentHTML(&apos;beforeBegin&apos;, htmlString); // 在该元素前插入  </span><br><span class="line">Element.insertAdjacentHTML(&apos;afterBegin&apos;, htmlString); // 在该元素第一个子元素前插入 </span><br><span class="line">Element.insertAdjacentHTML(&apos;beforeEnd&apos;, htmlString); // 在该元素最后一个子元素后面插入 </span><br><span class="line">Element.insertAdjacentHTML(&apos;afterEnd&apos;, htmlString); // 在该元素后插入</span><br><span class="line"></span><br><span class="line">Element.remove()  //用于将当前元素节点从DOM中移除</span><br><span class="line">Element.focus()   //用于将当前页面的焦点，转移到指定元素上</span><br><span class="line">二、CSS操作</span><br><span class="line">（1）类名操作</span><br><span class="line">//ie8以下</span><br><span class="line">Element.className  //获取元素节点的类名</span><br><span class="line">Element.className += &apos; &apos; + newClassName  //新增一个类名</span><br><span class="line"></span><br><span class="line">//判断是否有某个类名</span><br><span class="line">function hasClass(element,className)&#123;</span><br><span class="line">  return new RegExp(className,&apos;gi&apos;).test(element.className);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//移除class</span><br><span class="line">function removeClass(element,className)&#123;</span><br><span class="line">  element.className = element.className.replace(new RegExp(&apos;(^|\\b)&apos; + className.split(&apos; &apos;).join(&apos;|&apos;) + &apos;(\\b|$)&apos;, &apos;gi&apos;),&apos;&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ie10 </span><br><span class="line">element.classList.add(className)  //新增</span><br><span class="line">element.classList.remove(className)  //删除</span><br><span class="line">element.classList.contains(className)  //是否包含</span><br><span class="line">element.classList.toggle(className)  //toggle class</span><br><span class="line">（2）style操作</span><br><span class="line">element.setAttribute(&apos;style&apos;,&apos;&apos;)</span><br><span class="line"></span><br><span class="line">element.style.backgroundColor = &apos;red&apos;</span><br><span class="line"></span><br><span class="line">element.style.cssText //用来读写或删除整个style属性</span><br><span class="line"></span><br><span class="line">element.style.setProperty(propertyName,value)  //设置css属性</span><br><span class="line">element.style.getPropertyValue(property)  //获取css属性</span><br><span class="line">element.style.removeProperty(property)  //删除css属性</span><br><span class="line">操作非内联样式</span><br><span class="line">//ie8</span><br><span class="line">element.currentStyle[attrName]</span><br><span class="line">//ie9+</span><br><span class="line">window.getComputedStyle(el,null)[attrName] </span><br><span class="line">window.getComputedStyle(el,null).getPropertyValue(attrName)</span><br><span class="line">//伪类</span><br><span class="line">window.getComputedStyle(el,&apos;:after&apos;)[attrName]</span><br><span class="line">三、对象</span><br><span class="line">3.1 Object对象</span><br><span class="line">（1）生成实例对象</span><br><span class="line">var o = new Object()</span><br><span class="line">（2）属性</span><br><span class="line">Object.prototype   //返回原型对象</span><br><span class="line">（3）方法</span><br><span class="line">Object.keys(o)   //遍历对象的可枚举属性</span><br><span class="line">Object.getOwnPropertyName(o)   //遍历对象不可枚举的属性</span><br><span class="line">对象实例的方法</span><br><span class="line">valueOf()：返回当前对象对应的值。  </span><br><span class="line">toString()：返回当前对象对应的字符串形式。  </span><br><span class="line">toLocaleString()：返回当前对象对应的本地字符串形式。  </span><br><span class="line">hasOwnProperty()：判断某个属性是否为当前对象自身的属性，还是继承自原型对象的属性。 </span><br><span class="line">isPrototypeOf()：判断当前对象是否为另一个对象的原型。</span><br><span class="line">propertyIsEnumerable()：判断某个属性是否可枚举。</span><br><span class="line">3.2 Array对象</span><br><span class="line">（1）生成实例对象</span><br><span class="line">var a = new Array()</span><br><span class="line">（2）属性</span><br><span class="line">a.length  //长度</span><br><span class="line">（3）Array.isArray()</span><br><span class="line">Array.isArray(a)   //用来判断一个值是否为数组</span><br><span class="line">（4）Array实例的方法</span><br><span class="line"></span><br><span class="line">[1, [2, [3, 4]]].toString() // &quot;1,2,3,4&quot;</span><br><span class="line"></span><br><span class="line">a.valueof()   //返回数组本身</span><br><span class="line">a.toString()  //返回数组的字符串形式</span><br><span class="line">a.push(value,vlaue....)   //用于在数组的末端添加一个或多个元素，并返回添加新元素后的数组长度。</span><br><span class="line">pop()   //用于删除数组的最后一个元素，并返回该元素</span><br><span class="line">join()  //以参数作为分隔符，将所有数组成员组成一个字符串返回。如果不提供参数，默认用逗号分隔。</span><br><span class="line">concat()  //用于多个数组的合并。它将新数组的成员，添加到原数组的尾部，然后返回一个新数组，原数组不变。</span><br><span class="line">shift()  //用于删除数组的第一个元素，并返回该元素。</span><br><span class="line">unshift(value)  //用于在数组的第一个位置添加元素，并返回添加新元素后的数组长度。</span><br><span class="line">reverse()   //用于颠倒数组中元素的顺序，返回改变后的数组</span><br><span class="line">slice(start_index, upto_index);   //用于提取原数组的一部分，返回一个新数组，原数组不变。第一个参数为起始位置（从0开始），第二个参数为终止位置（但该位置的元素本身不包括在内）。如果省略第二个参数，则一直返回到原数组的最后一个成员。负数表示倒数第几个。</span><br><span class="line">splice(index, count_to_remove, addElement1, addElement2, ...);   //用于删除原数组的一部分成员，并可以在被删除的位置添加入新的数组成员，返回值是被删除的元素。第一个参数是删除的起始位置，第二个参数是被删除的元素个数。如果后面还有更多的参数，则表示这些就是要被插入数组的新元素。</span><br><span class="line">sort()   //对数组成员进行排序，默认是按照字典顺序排序。排序后，原数组将被改变。如果想让sort方法按照自定义方式排序，可以传入一个函数作为参数，表示按照自定义方法进行排序。该函数本身又接受两个参数，表示进行比较的两个元素。如果返回值大于0，表示第一个元素排在第二个元素后面；其他情况下，都是第一个元素排在第二个元素前面。</span><br><span class="line">map()   //对数组的所有成员依次调用一个函数，根据函数结果返回一个新数组。</span><br><span class="line">map(elem,index,arr)   //map方法接受一个函数作为参数。该函数调用时，map方法会将其传入三个参数，分别是当前成员、当前位置和数组本身。</span><br><span class="line">forEach()   //遍历数组的所有成员，执行某种操作,参数是一个函数。它接受三个参数，分别是当前位置的值、当前位置的编号和整个数组。</span><br><span class="line">filter()   //参数是一个函数，所有数组成员依次执行该函数，返回结果为true的成员组成一个新数组返回。该方法不会改变原数组。</span><br><span class="line">some()    //用来判断数组成员是否符合某种条件。接受一个函数作为参数，所有数组成员依次执行该函数，返回一个布尔值。该函数接受三个参数，依次是当前位置的成员、当前位置的序号和整个数组。只要有一个数组成员的返回值是true，则整个some方法的返回值就是true，否则false。</span><br><span class="line">every()   //用来判断数组成员是否符合某种条件。接受一个函数作为参数，所有数组成员依次执行该函数，返回一个布尔值。该函数接受三个参数，依次是当前位置的成员、当前位置的序号和整个数组。所有数组成员的返回值都是true，才返回true，否则false。</span><br><span class="line">reduce()   //依次处理数组的每个成员，最终累计为一个值。从左到右处理（从第一个成员到最后一个成员）</span><br><span class="line">reduceRight()  //依次处理数组的每个成员，最终累计为一个值。从右到左（从最后一个成员到第一个成员）</span><br><span class="line">indexOf(s)   //返回给定元素在数组中第一次出现的位置，如果没有出现则返回-1。可以接受第二个参数，表示搜索的开始位置</span><br><span class="line">lastIndexOf()  //返回给定元素在数组中最后一次出现的位置，如果没有出现则返回-1。</span><br><span class="line">3.3 Number对象</span><br><span class="line">（1）生成对象</span><br><span class="line">var n = new Number()</span><br><span class="line">（2）Number对象的属性</span><br><span class="line">Number.POSITIVE_INFINITY：正的无限，指向Infinity。  </span><br><span class="line">Number.NEGATIVE_INFINITY：负的无限，指向-Infinity。  </span><br><span class="line">Number.NaN：表示非数值，指向NaN。  </span><br><span class="line">Number.MAX_VALUE：表示最大的正数，相应的，最小的负数为-Number.MAX_VALUE。  </span><br><span class="line">Number.MIN_VALUE：表示最小的正数（即最接近0的正数，在64位浮点数体系中为5e-324），相应的，最接近0的负数为-Number.MIN_VALUE。  </span><br><span class="line">Number.MAX_SAFE_INTEGER：表示能够精确表示的最大整数，即9007199254740991。  </span><br><span class="line">Number.MIN_SAFE_INTEGER：表示能够精确表示的最小整数，即-9007199254740991。</span><br><span class="line">（4）Number对象实例的方法</span><br><span class="line">toString()   //用来将一个数值转为字符串形式.可以接受一个参数，表示输出的进制。如果省略这个参数，默认将数值先转为十进制，再输出字符串；否则，就根据参数指定的进制，将一个数字转化成某个进制的字符串。</span><br><span class="line">toFixed()   //用于将一个数转为指定位数的小数，返回这个小数对应的字符串。</span><br><span class="line">toExponential()  //用于将一个数转为科学计数法形式。可传入一个参数，参数表示小数点后有效数字的位数，范围为0到20，超出这个范围，会抛出一个RangeError。</span><br><span class="line">toPrecision()  //用于将一个数转为指定位数的有效数字。</span><br><span class="line">3.4 String 对象</span><br><span class="line">（1）生成实例对象</span><br><span class="line">var s = new String()</span><br><span class="line">（2）String对象的属性</span><br><span class="line">s.length   //返回字符串的长度</span><br><span class="line">（3）方法</span><br><span class="line">s.chatAt(index)   //返回指定位置的字符    //&quot;123456&quot;[0] == &quot;1&quot;</span><br><span class="line">s.fromCharCode()    //该方法的参数是一系列Unicode码点，返回对应的字符串。</span><br><span class="line">s.charCodeAt(index)    //返回给定位置字符的Unicode码点（十进制表示）</span><br><span class="line">s.concat(s2)  //用于连接两个字符串</span><br><span class="line">s.slice(start,end)   //用于从原字符串取出子字符串并返回，不改变原字符串。第一个参数是子字符串的开始位置，第二个参数是子字符串的结束位置（不含该位置）。如果参数是负值，表示从结尾开始倒数计算的位置，即该负值加上字符串长度。</span><br><span class="line">s.substring(start,end)  //用于从原字符串取出子字符串并返回，不改变原字符串.第一个参数表示子字符串的开始位置，第二个位置表示结束位置。</span><br><span class="line">s.substr(start,length)   //用于从原字符串取出子字符串并返回，不改变原字符串。第一个参数是子字符串的开始位置，第二个参数是子字符串的长度。如果第一个参数是负数，表示倒数计算的字符位置。如果第二个参数是负数，将被自动转为0，因此会返回空字符串。</span><br><span class="line">s.indexOf(s)   //返回给定元素在字符串中第一次出现的位置，如果没有出现则返回-1。可以接受第二个参数，表示搜索的开始位置 </span><br><span class="line">s.lastIndexOf()  //返回给定元素在字符串中最后一次出现的位置，如果没有出现则返回-1。</span><br><span class="line">s.trim()  //用于去除字符串两端的空格，返回一个新字符串</span><br><span class="line">s.toLowerCase()  //用于将一个字符串全部转为小写,返回一个新字符串，不改变原字符串。</span><br><span class="line">s.toUpperCase()  //全部转为大写</span><br><span class="line">s.localeCompare(s2)  //用于比较两个字符串。它返回一个整数，如果小于0，表示第一个字符串小于第二个字符串；如果等于0，表示两者相等；如果大于0，表示第一个字符串大于第二个字符串。</span><br><span class="line">s.match(regexp)   //用于确定原字符串是否匹配某个子字符串，返回一个数组，成员为匹配的第一个字符串。如果没有找到匹配，则返回null。</span><br><span class="line">s.search()  //返回值为匹配的第一个位置。如果没有找到匹配，则返回-1。</span><br><span class="line">s.replace(oldValue,newValue)  //用于替换匹配的子字符串，一般情况下只替换第一个匹配（除非使用带有g修饰符的正则表达式）。</span><br><span class="line">s.split()  //按照给定规则分割字符串，返回一个由分割出来的子字符串组成的数组。还可传入第二个参数，决定了返回数组的成员数。</span><br><span class="line">3.5 Math对象</span><br><span class="line">（1）属性</span><br><span class="line">Math.E：常数e。  </span><br><span class="line">Math.LN2：2的自然对数。  </span><br><span class="line">Math.LN10：10的自然对数。  </span><br><span class="line">Math.LOG2E：以2为底的e的对数。  </span><br><span class="line">Math.LOG10E：以10为底的e的对数。  </span><br><span class="line">Math.PI：常数Pi。  </span><br><span class="line">Math.SQRT1_2：0.5的平方根。  </span><br><span class="line">Math.SQRT2：2的平方根。</span><br><span class="line">（2）数学方法</span><br><span class="line">Math.abs()：返回参数的绝对值  </span><br><span class="line">Math.ceil()：向上取整，接受一个参数，返回大于该参数的最小整数。 </span><br><span class="line">Math.floor()：向下取整  </span><br><span class="line">Math.max(n,n1,...)：可接受多个参数，返回最大值  </span><br><span class="line">Math.min(n,n1,..)：可接受多个参数，返回最小值  </span><br><span class="line">Math.pow(n,e)：指数运算, 返回以第一个参数为底数、第二个参数为幂的指数值。 </span><br><span class="line">Math.sqrt()：返回参数值的平方根。如果参数是一个负值，则返回NaN。  </span><br><span class="line">Math.log()：返回以e为底的自然对数值。</span><br><span class="line">Math.exp()：返回e的指数，也就是常数e的参数次方。</span><br><span class="line">Math.round()：四舍五入  </span><br><span class="line">Math.random()：返回0到1之间的一个伪随机数，可能等于0，但是一定小于1。</span><br><span class="line">（3）三角函数方法</span><br><span class="line">Math.sin()：返回参数的正弦  </span><br><span class="line">Math.cos()：返回参数的余弦  </span><br><span class="line">Math.tan()：返回参数的正切  </span><br><span class="line">Math.asin()：返回参数的反正弦（弧度值）  </span><br><span class="line">Math.acos()：返回参数的反余弦（弧度值）  </span><br><span class="line">Math.atan()：返回参数的反正切（弧度值）</span><br><span class="line">3.6 JSON对象</span><br><span class="line">（1）方法</span><br><span class="line">JSON.stringify()   </span><br><span class="line">//用于将一个值转为字符串。该字符串应该符合JSON格式，并且可以被JSON.parse方法还原。</span><br><span class="line">//（JSON.stringify(obj, selectedProperties)）还可以接受一个数组，作为第二个参数，指定需要转成字符串的属性。</span><br><span class="line">//还可以接受第三个参数，用于增加返回的JSON字符串的可读性。如果是数字，表示每个属性前面添加的空格（最多不超过10个）；如果是字符串（不超过10个字符），则该字符串会添加在每行前面。</span><br><span class="line"></span><br><span class="line">JSON.parse()   //用于将JSON字符串转化成对象。</span><br><span class="line">3.7 console对象</span><br><span class="line">（1）方法</span><br><span class="line">console.log(text,text2,...)   //用于在console窗口输出信息。它可以接受多个参数，将它们的结果连接起来输出。如果第一个参数是格式字符串（使用了格式占位符），console.log方法将依次用后面的参数替换占位符，然后再进行输出。</span><br><span class="line">console.info()   //在console窗口输出信息，同时，会在输出信息的前面，加上一个蓝色图标。</span><br><span class="line">console.debug()  //在console窗口输出信息，同时，会在输出信息的前面，加上一个蓝色图标。</span><br><span class="line">console.warn()  //输出信息时，在最前面加一个黄色三角，表示警告；</span><br><span class="line">console.error()  //输出信息时，在最前面加一个红色的叉，表示出错，同时会显示错误发生的堆栈</span><br><span class="line">console.table()  //可以将复合类型的数据转为表格显示。</span><br><span class="line">console.count()  //用于计数，输出它被调用了多少次。</span><br><span class="line">console.dir()    //用来对一个对象进行检查（inspect），并以易于阅读和打印的格式显示。</span><br><span class="line">console.dirxml()  //用于以目录树的形式，显示DOM节点。</span><br><span class="line">console.assert()  //接受两个参数，第一个参数是表达式，第二个参数是字符串。只有当第一个参数为false，才会输出第二个参数，否则不会有任何结果。</span><br><span class="line"></span><br><span class="line">//这两个方法用于计时，可以算出一个操作所花费的准确时间。</span><br><span class="line">console.time()</span><br><span class="line">console.timeEnd()</span><br><span class="line">//time方法表示计时开始，timeEnd方法表示计时结束。它们的参数是计时器的名称。调用timeEnd方法之后，console窗口会显示“计时器名称: 所耗费的时间”。</span><br><span class="line"></span><br><span class="line">console.profile()  //用来新建一个性能测试器（profile），它的参数是性能测试器的名字。</span><br><span class="line">console.profileEnd()  //用来结束正在运行的性能测试器。</span><br><span class="line"></span><br><span class="line">console.group()</span><br><span class="line">console.groupend()</span><br><span class="line">//上面这两个方法用于将显示的信息分组。它只在输出大量信息时有用，分在一组的信息，可以用鼠标折叠/展开。</span><br><span class="line">console.groupCollapsed()  //用于将显示的信息分组，该组的内容，在第一次显示时是收起的（collapsed），而不是展开的。</span><br><span class="line"></span><br><span class="line">console.trace()  //显示当前执行的代码在堆栈中的调用路径。</span><br><span class="line">console.clear()  //用于清除当前控制台的所有输出，将光标回置到第一行。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">正则表达式：</span><br><span class="line">只允许输入汉字：onkeyup=&quot;value=value.replace(/[^\u4E00-\u9FA5]/g,&apos;&apos;)&quot; </span><br><span class="line">只允许输入数字：onkeyup=&quot;this.value=this.value.replace(/\D/g,&apos;&apos;)&quot;</span><br><span class="line">[1, [2, [3, 4]]].toString() // &quot;1,2,3,4&quot;</span><br></pre></td></tr></table></figure>
<h3 id="setTimeout-fn-0-的作用"><a href="#setTimeout-fn-0-的作用" class="headerlink" title="setTimeout(fn, 0) 的作用"></a>setTimeout(fn, 0) 的作用</h3><blockquote>
<p>setTimeout（0）单线程和异步队列<br>setTimeout和setInterval是JS内置的两个定时器，使用很简单，但这两个方法背后的原理却不简单。<br>我们知道，JS是单线程语言，在浏览器中，当JS代码被加载时，浏览器会为其分配一个主线程来执行任务(函数)，<br>主线程会形成一个全局执行环境，执行环境采用栈的方式将待执行任务按顺序依次来执行。<br>但在浏览器中有一些任务是非常耗时的，比如http请求、定时器、事件回调等，为了保证其他任务的执行效率不被影响，<br>JS在执行环境中维护了一个异步队列(也叫工作线程)，并将这些任务放入队列中进行等待，这些任务的执行时机并不确定，<br>只有当主线程的任务执行完成以后，才会去检查异步队列中的任务是否需要开始执行。这就是为什么setTimeout(fn,0)<br> 始终要等到最后执行的原因。关于单线程和异步队列问题请参考：setTimeout（0）</p>
</blockquote>
<h3 id="深拷贝"><a href="#深拷贝" class="headerlink" title="深拷贝"></a>深拷贝</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function deepCopy(p, c) &#123;</span><br><span class="line">  var c = c || &#123;&#125;;</span><br><span class="line">  for (var i in p) &#123;</span><br><span class="line">    if (typeof p[i] === &apos;object&apos;) &#123;</span><br><span class="line">      c[i] = (p[i].constructor === Array) ? [] : &#123;&#125;;</span><br><span class="line">      deepCopy(p[i], c[i]);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      c[i] = p[i];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="POST和GET的区别，HTTP状态码"><a href="#POST和GET的区别，HTTP状态码" class="headerlink" title="POST和GET的区别，HTTP状态码"></a>POST和GET的区别，HTTP状态码</h3><p><img src="/2015/01/01/JS原生常用API大全/a.webp" alt><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">POST和GET的区别</span><br><span class="line">GET在浏览器回退时是无害的，而POST会再次提交请求</span><br><span class="line">GET产生的URL地址可以被收藏，而POST不可以</span><br><span class="line">GET请求会被浏览器主动缓存，而POST不会，除非手动设置</span><br><span class="line">GET请求只能进行URL编码，而POST支持多种编码方式</span><br><span class="line">GET请求参数会被完整保留在浏览器历史记录里，而POST中的参数不会被保留</span><br><span class="line">GET请求在URL中传送的参数是有长度限制的，而POST没有长度限制</span><br><span class="line">对参数的数据类型，GET只能请求ASCII字符，而POST没有限制</span><br><span class="line">GET比POST更不安全，因为参数直接暴露在URL上，所以不能用来传敏感信息</span><br><span class="line">GET参数通过URL传递，POST放在Request body中</span><br></pre></td></tr></table></figure></p>
<h3 id="Post-Get接口傻傻分不清？"><a href="#Post-Get接口傻傻分不清？" class="headerlink" title="Post,Get接口傻傻分不清？"></a><a href="https://juejin.im/post/5c0e610be51d45707261b10a" target="_blank" rel="noopener">Post,Get接口傻傻分不清？</a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">HTTP状态码</span><br><span class="line">1XX：指示信息-表示请求已接受，继续处理</span><br><span class="line">2XX：成功-表示请求已被成功接收200 OK ：客户端请求成功</span><br><span class="line">206 Partial Content：客户发送一个带有Range头的GET请求，服务器完成了它 播放视频和音频</span><br><span class="line">3XX：重定向-要完成请求必须进行更进一步的操作301 Move Permanently：所请求的页面已经转移至新的URL</span><br><span class="line">302 Found：所请求的页面已经临时转移到新的URL</span><br><span class="line">304 Not Modified：客户端有缓冲的文档并发出一个条件性的请求，服务器告诉客户，原来缓冲的文档还可以继续使用</span><br><span class="line">4XX：客户端错误-请求有语法错误或请求无法实现400 Bad Request：客户端请求有语法错误，不能被服务器所理解</span><br><span class="line">401 Unauthorized：请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用</span><br><span class="line">403 Forbidden：对被请求页面的访问被禁止</span><br><span class="line">404 Not Found：请求资源不存在</span><br><span class="line">5XX：服务错误-服务器未能实现合法的请求500 Internal Server Error：服务器发生不可预期的错误原来缓冲的文档还可以继续使用</span><br><span class="line">503 Server Unavailable：请求未完成，服务器临时过载或当机，一段事件后恢复正常</span><br></pre></td></tr></table></figure>
<h3 id="301和302"><a href="#301和302" class="headerlink" title="301和302"></a>301和302</h3><blockquote>
<font color="#ff0000"><strong> 301与302：二者都是进行重定向，前者为永久重定向，后者为临时重定向。301，302对用户来说没有区别，他们看到效果只是一个跳转，浏览器中旧的URL变成了新的URL。实际工作中，当我们的前一个域名被永久性停止使用，并且不希望用户还能访问以前的域名时，我们会用到301。</strong></font>
</blockquote>
<blockquote>
<font color="#0000ff">301和302状态码都表示重定向，<span style="border-bottom:2px solid red;">就是说浏览器在拿到服务器返回的这个状态码后会自动跳转到一个新的URL地址，这个地址可以从响应的Location首部中获取（用户看到的效果就是他输入的地址A瞬间变成了另一个地址B）——这是它们的共同点。</span>他们的不同在于:301表示旧地址A的资源已经被永久地移除了（这个资源不可访问了）， 搜索引擎在抓取新内容的同时也将旧的网址交换为重定向之后的网址；302表示旧地址A的资源还在（仍然可以访问）， 这个重定向只是临时地从旧地址A跳转到地址B，搜索引擎会抓取新的内容而保存旧的网址。</font>
</blockquote>
<p><strong> 301重定向和302重定向的区别: </strong></p>
<ul>
<li>302重定向只是暂时的重定向，搜索引擎会抓取新的内容而保留旧的地址，因为服务器返回302，所以，搜索搜索引擎认为新的网址是暂时的。</li>
<li>而301重定向是永久的重定向，搜索引擎在抓取新的内容的同时也将旧的网址替换为了重定向之后的网址。 </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">301适合永久重定向</span><br><span class="line">　　301比较常用的场景是使用域名跳转。</span><br><span class="line">       比如，我们访问 http://www.baidu.com 会跳转到 https://www.baidu.com，</span><br><span class="line">        发送请求之后，就会返回301状态码，</span><br><span class="line">       然后返回一个location，提示新的地址，浏览器就会拿着这个新的地址去访问。 </span><br><span class="line">　　注意： 301请求是可以缓存的， 即通过看status code，可以发现后面写着from cache。</span><br><span class="line">　    或者你把你的网页的名称从php修改为了html，这个过程中，也会发生永久重定向。</span><br><span class="line"></span><br><span class="line">302用来做临时跳转</span><br><span class="line">　　比如未登陆的用户访问用户中心重定向到登录页面。</span><br><span class="line">　　访问404页面会重新定向到首页。</span><br></pre></td></tr></table></figure>
<p><img src="/2015/01/01/JS原生常用API大全/1_20181206205202.jpg" alt><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">301—永久移动。被请求的资源已被永久移动位置； 【永久重定向】</span><br><span class="line">302—请求的资源现在临时从不同的 URI 响应请求；  【临时重定向】</span><br><span class="line">305—使用代理。被请求的资源必须通过指定的代理才能被访问； </span><br><span class="line">307—临时跳转。被请求的资源在临时从不同的URL响应请求； </span><br><span class="line">400—错误请求； </span><br><span class="line">402—需要付款。该状态码是为了将来可能的需求而预留的，用于一些数字货币或者是微支付； </span><br><span class="line">403—禁止访问。服务器已经理解请求，但是拒绝执行它； </span><br><span class="line">404—找不到对象。请求失败，资源不存在； </span><br><span class="line">406—不可接受的。请求的资源的内容特性无法满足请求头中的条件，因而无法生成响应实体； </span><br><span class="line">408—请求超时； </span><br><span class="line">409—冲突。由于和被请求的资源的当前状态之间存在冲突，请求无法完成； </span><br><span class="line">410—遗失的。被请求的资源在服务器上已经不再可用，而且没有任何已知的转发地址； </span><br><span class="line">413—响应实体太大。服务器拒绝处理当前请求，请求超过服务器所能处理和允许的最大值。 </span><br><span class="line">417—期望失败。在请求头 Expect 中指定的预期内容无法被服务器满足； </span><br><span class="line">418—我是一个茶壶。超文本咖啡罐控制协议，但是并没有被实际的HTTP服务器实现； </span><br><span class="line">420—方法失效。 </span><br><span class="line">422—不可处理的实体。请求格式正确，但是由于含有语义错误，无法响应； </span><br><span class="line">500—服务器内部错误。服务器遇到了一个未曾预料的状况，导致了它无法完成对请求的处理；</span><br></pre></td></tr></table></figure></p>
<h3 id="JS返回所有子节点对象childNodes"><a href="#JS返回所有子节点对象childNodes" class="headerlink" title="JS返回所有子节点对象childNodes"></a>JS返回所有子节点对象childNodes</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var mylist = document.getElementById(&apos;myid&apos;);</span><br><span class="line">for(var i=0,i&lt;mylist.childNodes.length;i++)&#123;</span><br><span class="line">console.log(mylist.childNodes[i]);</span><br><span class="line">&#125;</span><br><span class="line">firstChild返回第一个子节点</span><br><span class="line">lastChild返回最后一个子节点</span><br><span class="line">parentNode返回父节点对象</span><br><span class="line">nextSibling返回下一个兄弟节点对象</span><br><span class="line">previousSibling返回前一个兄弟节点对象</span><br><span class="line">nodeName返回节点的HTML标记名称</span><br></pre></td></tr></table></figure>
<h3 id="insertBefore-插入节点（父节点内容的最前面）"><a href="#insertBefore-插入节点（父节点内容的最前面）" class="headerlink" title="insertBefore()插入节点（父节点内容的最前面）"></a>insertBefore()插入节点（父节点内容的最前面）</h3><p>注意：insertBefore()有两个参数，第一个是插入的节点，第二个是插入的位置</p>
<p>例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var list = document.getElementById(&apos;myList&apos;);</span><br><span class="line">list.insertBefore(newItem,list.childNodes[1]);</span><br><span class="line">//插入新节点newItem到list的第二个子节点</span><br></pre></td></tr></table></figure></p>
<h3 id="Element-matches-精确匹配"><a href="#Element-matches-精确匹配" class="headerlink" title="Element.matches 精确匹配"></a>Element.matches 精确匹配</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">document.getElementById(&apos;list&apos;).addEventListener(&apos;click&apos;, function (e) &#123;</span><br><span class="line">  // 兼容性处理</span><br><span class="line">  var event = e || window.event;</span><br><span class="line">  var target = event.target || event.srcElement;</span><br><span class="line">  if (target.matches(&apos;li.class-1&apos;)) &#123;</span><br><span class="line">    console.log(&apos;the content is: &apos;, target.innerHTML);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="移动端touch事件-区分webkit-和-winphone"><a href="#移动端touch事件-区分webkit-和-winphone" class="headerlink" title="移动端touch事件(区分webkit 和 winphone)"></a>移动端touch事件(区分webkit 和 winphone)</h3><blockquote>
<p>当用户手指放在移动设备在屏幕上滑动会触发的touch事件,以下支持webkit<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">touchstart——当手指触碰屏幕时候发生。不管当前有多少只手指</span><br><span class="line">touchmove——当手指在屏幕上滑动时连续触发。通常我们再滑屏页面，会调用event的preventDefault()可以阻止默认情况的发生：阻止页面滚动</span><br><span class="line">touchend——当手指离开屏幕时触发</span><br><span class="line">touchcancel——系统停止跟踪触摸时候会触发。例如在触摸过程中突然页面alert()一个提示框，此时会触发该事件，这个事件比较少用TouchEvent</span><br><span class="line">touches：屏幕上所有手指的信息</span><br><span class="line">targetTouches：手指在目标区域的手指信息</span><br><span class="line">changedTouches：最近一次触发该事件的手指信息</span><br><span class="line">touchend时，touches与targetTouches信息会被删除，changedTouches保存的最后一次的信息，最好用于计算手指信息参数信息(changedTouches[0])</span><br><span class="line">clientX、clientY在显示区的坐标</span><br><span class="line">target：当前元素</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="全局错误监控"><a href="#全局错误监控" class="headerlink" title="全局错误监控"></a>全局错误监控</h3><p>监听window上的error事件，过滤事件代理的error。</p>
<h3 id="手动触发一个dom事件，需要3步，如果你对document-createEvent-�不是很熟悉，可以点击查看。"><a href="#手动触发一个dom事件，需要3步，如果你对document-createEvent-�不是很熟悉，可以点击查看。" class="headerlink" title="手动触发一个dom事件，需要3步，如果你对document.createEvent,�不是很熟悉，可以点击查看。"></a>手动触发一个dom事件，需要3步，如果你对document.createEvent,�不是很熟悉，可以点击查看。</h3><p>创建一个事件对象 document.createEvent(event)<br>初始化事件对象 event.initEvent(type, bubbles, true)<br>分发事件 dom.dispatchEvent(event)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">Object.preventExtensions(obj)  让一个对象变的不可扩展，也就是永远不能再添加新的属性。</span><br><span class="line">Object.isExtensible(obj) 判断一个对象是否是可扩展的</span><br><span class="line">Object.seal(obj)让一个对象密封(只能读写 不能新增)</span><br><span class="line">Object.isSealed(obj)判断一个对象是否密封</span><br><span class="line">Object.isFrozen(arr)  让一个对象被冻结(只能读)</span><br><span class="line">Object.isFrozen(obj)：判断一个对象是否被冻结</span><br><span class="line">Object.keys(obj) 返回一个由给定对象的所有可枚举自身属性的属性名组成的数组</span><br><span class="line">Object.getOwnPropertyNames(obj)：返回一个由指定对象的所有自身属性的属性名（包括不可枚举属性）组成的数组</span><br><span class="line">Object.is(value1, value2)：判断两个值是否是同一个值,Object.is它用来比较两个值是否严格相等，与严格比较运算符（===）的行为基本一致。</span><br><span class="line">Object.create(proto [, propertiesObject ]) 是E5中提出的一种新的对象创建方式，第一个参数是要继承的原型，如果不是一个子函数，可以传一个null，第二个参数是对象的属性描述符，这个参数是可选的。</span><br><span class="line">Object.assign 把任意多个的源对象自身的可枚举属性拷贝给目标对象，然后返回目标对象。【浅复制】</span><br><span class="line">//var copy = Object.assign(&#123;&#125;, obj);</span><br><span class="line">Object.defineProperty() 定义单个对象属性或方法(可以设置读写可枚举)</span><br><span class="line">Object.defineProperties() 定义多个对象属性或方法(可以设置读写可枚举)</span><br><span class="line"></span><br><span class="line">Object.assign() //浅拷贝，类似&#123;...obj1,...obj2&#125; 都是浅拷贝</span><br><span class="line">Object.assign方法用于对象的合并，将源对象（source）的所有可枚举属性，复制到目标对象（target）</span><br><span class="line"></span><br><span class="line">var target = &#123; a: 1 &#125;;</span><br><span class="line">var source1 = &#123; b: 2 &#125;;</span><br><span class="line">var source2 = &#123; c: 3 &#125;;</span><br><span class="line">Object.assign(target, source1, source2);</span><br><span class="line">target // &#123;a:1, b:2, c:3&#125;</span><br><span class="line"></span><br><span class="line">//如果目标对象与源对象有同名属性，或多个源对象有同名属性，则后面的属性会覆盖前面的属性。Object.assign方法实行的是浅拷贝，而不是深拷贝。也就是说，如果源对象某个属性的值是对象，那么目标对象拷贝得到的是这个对象的引用。</span><br><span class="line"></span><br><span class="line">Object.assign方法实行的是浅拷贝，而不是深拷贝。也就是说，如果源对象某个属性的值是对象，那么目标对象拷贝得到的是这个对象的引用。</span><br><span class="line"></span><br><span class="line">var obj1 = &#123;a: &#123;b: 1&#125;&#125;;</span><br><span class="line">var obj2 = Object.assign(&#123;&#125;, obj1);</span><br><span class="line">obj1.a.b = 2;</span><br><span class="line">obj2.a.b // 2</span><br><span class="line"></span><br><span class="line">对于这种嵌套的对象，一旦遇到同名属性，Object.assign的处理方法是替换，而不是添加。</span><br><span class="line">var target = &#123; a: &#123; b: &apos;c&apos;, d: &apos;e&apos; &#125; &#125;</span><br><span class="line">var source = &#123; a: &#123; b: &apos;hello&apos; &#125; &#125;</span><br><span class="line">Object.assign(target, source)</span><br><span class="line">// &#123; a: &#123; b: &apos;hello&apos; &#125; &#125;</span><br><span class="line"></span><br><span class="line">停止jq中的ajax请求用abort()函数  </span><br><span class="line">  </span><br><span class="line">var currentAjax = null;  </span><br><span class="line">	functionstartAjax()&#123;  </span><br><span class="line">	    //方法就是将XHR对象指向currentAjax，再调用currentAjax的.abort()来中止请求  </span><br><span class="line">	    currentAjax = $.ajax(&#123;  </span><br><span class="line">	           type:&apos;POST&apos;,  </span><br><span class="line">	           beforeSend:function()&#123;&#125;,  </span><br><span class="line">	           url:&apos;test.php&apos;,  </span><br><span class="line">	           data:&apos;username=xxx&apos;,  </span><br><span class="line">	           dataType:&apos;JSON&apos;,  </span><br><span class="line">	           error:function()&#123;alert(&apos;error&apos;)&#125;,  </span><br><span class="line">	           success:function(data)&#123;alert(data)&#125;  </span><br><span class="line">	    &#125;);  </span><br><span class="line">	&#125;  </span><br><span class="line">	functionstopAjax()&#123;  </span><br><span class="line">	    //如若上一次AJAX请求未完成，则中止请求  </span><br><span class="line">	    if(currentAjax) &#123;currentAjax.abort();&#125;  </span><br><span class="line">	&#125;  </span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">JSONP 超时：</span><br><span class="line"></span><br><span class="line">  设置超时标志位flag=false，当超时后将flag=true;</span><br><span class="line">  异步加载JS文件并执行回调函数：</span><br><span class="line">  </span><br><span class="line">  function loadJS(src, callback)&#123;</span><br><span class="line">    var script = document.createElement(&apos;script&apos;);</span><br><span class="line">    var head = document.getElementsByTagName(&apos;head&apos;)[0];</span><br><span class="line">    var loaded;</span><br><span class="line">    script.src = src;</span><br><span class="line">    if(typeof callback === &apos;function&apos;)&#123;</span><br><span class="line">        script.onload = script.onreadystatechange = function()&#123;</span><br><span class="line">            if(!loaded &amp;&amp; (!script.readyState || /loaded|complete/.test(script.readyState)))&#123;</span><br><span class="line">                script.onload = script.onreadystatechange = null;</span><br><span class="line">                loaded = true;</span><br><span class="line">                callback();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    head.appendChild(script);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="获取元素的绝对位置"><a href="#获取元素的绝对位置" class="headerlink" title="获取元素的绝对位置"></a>获取元素的绝对位置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">function getPosition(node) &#123;</span><br><span class="line">	var width = node.offsetWidth; //元素宽度</span><br><span class="line">	var height = node.offsetHeight; //元素高度</span><br><span class="line">	var left = node.offsetLeft; //获取元素相对于其根元素的left值var left</span><br><span class="line">	var top = node.offsetTop; //获取元素相对于其根元素的top值var top</span><br><span class="line">	current = node.offsetParent; // 取得元素的offsetParent</span><br><span class="line"></span><br><span class="line">	// 一直循环直到根元素　　</span><br><span class="line">	while(current != null) &#123;　　</span><br><span class="line">		left += current.offsetLeft;　　</span><br><span class="line">		top += current.offsetTop;　　</span><br><span class="line">		current = current.offsetParent;　　</span><br><span class="line">	&#125;</span><br><span class="line">	return &#123;</span><br><span class="line">		&quot;width&quot;: width,</span><br><span class="line">		&quot;height&quot;: height,</span><br><span class="line">		&quot;left&quot;: left,</span><br><span class="line">		&quot;top&quot;: top</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="动画结束时事件"><a href="#动画结束时事件" class="headerlink" title="动画结束时事件"></a>动画结束时事件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">o.addEventListener(&quot;webkitAnimationEnd&quot;, function() &#123;</span><br><span class="line">    console.log(&quot;动画结束&quot;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">-webkit-animation动画有三个事件：</span><br><span class="line">开始事件: webkitAnimationStart</span><br><span class="line">结束事件:  webkitAnimationEnd</span><br><span class="line">重复运动事件: webkitAnimationIteration// 动画开始时事件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">o.addEventListener(&quot;webkitAnimationStart&quot;, function() &#123;</span><br><span class="line">    console.log(&quot;动画开始&quot;);</span><br><span class="line">&#125;)</span><br><span class="line">// 动画重复运动时事件</span><br><span class="line">o.addEventListener(&quot;webkitAnimationIteration&quot;, function() &#123;</span><br><span class="line">    console.log(&quot;动画重复运动&quot;);</span><br><span class="line">&#125;)</span><br><span class="line">// 动画结束时事件</span><br><span class="line">o.addEventListener(&quot;webkitAnimationEnd&quot;, function() &#123;</span><br><span class="line">    console.log(&quot;动画结束&quot;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="解决键盘弹出遮挡："><a href="#解决键盘弹出遮挡：" class="headerlink" title="解决键盘弹出遮挡："></a>解决键盘弹出遮挡：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 解决键盘弹出后挡表单的问题</span><br><span class="line">		window.addEventListener(&apos;resize&apos;, function() &#123;</span><br><span class="line">			if(</span><br><span class="line">				document.activeElement.tagName === &apos;INPUT&apos; ||</span><br><span class="line">				document.activeElement.tagName === &apos;TEXTAREA&apos;</span><br><span class="line">			) &#123;</span><br><span class="line">				window.setTimeout(function() &#123;</span><br><span class="line">					if(&apos;scrollIntoView&apos; in document.activeElement) &#123;</span><br><span class="line">						document.activeElement.scrollIntoView();</span><br><span class="line">					&#125; else &#123;</span><br><span class="line">						document.activeElement.scrollIntoViewIfNeeded();</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;, 0);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 处理iOS 微信客户端6.7.4 键盘收起页面未下移bug</span><br><span class="line"> */</span><br><span class="line">;(/iphone|ipod|ipad/i.test(navigator.appVersion)) &amp;&amp; document.addEventListener(&apos;blur&apos;, (e) =&gt; &#123;</span><br><span class="line">  document.body.scrollIntoView(false)</span><br><span class="line">&#125;, true)</span><br></pre></td></tr></table></figure>
<h3 id="单个for循环实现排序："><a href="#单个for循环实现排序：" class="headerlink" title="单个for循环实现排序："></a>单个for循环实现排序：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var a = [12, 13, 65, 54, 86, 21, 37, 1, 95, 4];</span><br><span class="line">var l=a.length;</span><br><span class="line">		for(var i = 0; i &lt; l; i++) &#123;</span><br><span class="line">			if(a[i] &gt; a[i + 1]) &#123;</span><br><span class="line">				var tem = a[i];</span><br><span class="line">				a[i] = a[i + 1];</span><br><span class="line">				a[i + 1] = tem;</span><br><span class="line">			&#125;</span><br><span class="line">			if(i == l - 1) &#123;</span><br><span class="line">				i = -1;</span><br><span class="line">				l--;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		console.log(a);</span><br></pre></td></tr></table></figure>
<h3 id="Object-assign实现"><a href="#Object-assign实现" class="headerlink" title="Object.assign实现:"></a>Object.assign实现:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">if (!Object.assign) &#123;</span><br><span class="line">    // 定义assign方法</span><br><span class="line">  Object.defineProperty(Object, &apos;assign&apos;, &#123;</span><br><span class="line">    enumerable: false,</span><br><span class="line">    configurable: true,</span><br><span class="line">    writable: true,</span><br><span class="line">    value: function(target) &#123; // assign方法的第一个参数</span><br><span class="line">      &apos;use strict&apos;;</span><br><span class="line">      // 第一个参数为空，则抛错</span><br><span class="line">      if (target === undefined || target === null) &#123;</span><br><span class="line">        throw new TypeError(&apos;Cannot convert first argument to object&apos;);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      var to = Object(target);</span><br><span class="line">      // 遍历剩余所有参数</span><br><span class="line">      for (var i = 1; i &lt; arguments.length; i++) &#123;</span><br><span class="line">        var nextSource = arguments[i];</span><br><span class="line">        // 参数为空，则跳过，继续下一个</span><br><span class="line">        if (nextSource === undefined || nextSource === null) &#123;</span><br><span class="line">          continue;</span><br><span class="line">        &#125;</span><br><span class="line">        nextSource = Object(nextSource);</span><br><span class="line"></span><br><span class="line">        // 获取改参数的所有key值，并遍历</span><br><span class="line">        var keysArray = Object.keys(nextSource);</span><br><span class="line">        for (var nextIndex = 0, len = keysArray.length; nextIndex &lt; len; nextIndex++) &#123;</span><br><span class="line">          var nextKey = keysArray[nextIndex];</span><br><span class="line">          var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);</span><br><span class="line">          // 如果不为空且可枚举，则直接浅拷贝赋值</span><br><span class="line">          if (desc !== undefined &amp;&amp; desc.enumerable) &#123;</span><br><span class="line">            to[nextKey] = nextSource[nextKey];</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      return to;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JavaScript中巧用位运算"><a href="#JavaScript中巧用位运算" class="headerlink" title="JavaScript中巧用位运算"></a>JavaScript中巧用位运算</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">日常前端开发中我们很少用到位运算，容易让人遗忘，让我们一起回顾下一下js中的位运算。</span><br><span class="line">位运算详细说明查看JavaScript|MDN</span><br><span class="line">下面主要回顾一下一些常用的位运算的巧用。</span><br><span class="line">将十进制转化为二进制</span><br><span class="line">var number = 3;</span><br><span class="line">var result = number.toString(2);</span><br><span class="line"></span><br><span class="line">var result2 = 14..toString(2); // &quot;1110&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">我们使用位运算来代替Math.floor()来向下取整</span><br><span class="line">var data = 2.2352524535;</span><br><span class="line">var result = data | 0; // 2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var re2 = ~~data; // 2</span><br></pre></td></tr></table></figure>
<h3 id="将颜色从RGA转换为Hex格式"><a href="#将颜色从RGA转换为Hex格式" class="headerlink" title="将颜色从RGA转换为Hex格式"></a>将颜色从RGA转换为Hex格式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var color = &#123;r: 186, g: 218, b: 85&#125;;</span><br><span class="line"></span><br><span class="line">// RGB to HEX</span><br><span class="line">var rgb2hex = function(r, g, b) &#123;</span><br><span class="line">    return &apos;#&apos; + ((1 &lt;&lt; 24) + (r &lt;&lt; 16) + (g &lt;&lt; 8) + b).toString(16).substr(1);</span><br><span class="line">&#125;</span><br><span class="line">rgb2hex(color.r, color.g, color.b);//&quot;#bada55&quot;</span><br></pre></td></tr></table></figure>
<h3 id="常用函数："><a href="#常用函数：" class="headerlink" title="常用函数："></a>常用函数：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">/*========================常用函数========================*/</span><br><span class="line"></span><br><span class="line">/*时间格式化*/</span><br><span class="line">Date.prototype.Format = function (fmt) &#123;</span><br><span class="line">    var o = &#123;</span><br><span class="line">        &quot;M+&quot;: this.getMonth() + 1, /*月份*/</span><br><span class="line">        &quot;d+&quot;: this.getDate(), /*日*/</span><br><span class="line">        &quot;h+&quot;: this.getHours(), /*小时*/</span><br><span class="line">        &quot;m+&quot;: this.getMinutes(), /*分*/</span><br><span class="line">        &quot;s+&quot;: this.getSeconds(), /*秒*/</span><br><span class="line">        &quot;q+&quot;: Math.floor((this.getMonth() + 3) / 3), /*季度*/</span><br><span class="line">        &quot;S&quot;: this.getMilliseconds() /*毫秒*/</span><br><span class="line">    &#125;;</span><br><span class="line">    if (/(y+)/.test(fmt))</span><br><span class="line">        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + &quot;&quot;).substr(4 - RegExp.$1.length));</span><br><span class="line">    for (var k in o)</span><br><span class="line">        if (new RegExp(&quot;(&quot; + k + &quot;)&quot;).test(fmt))</span><br><span class="line">            fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((&quot;00&quot; + o[k]).substr((&quot;&quot; + o[k]).length)));</span><br><span class="line">    return fmt;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/*IE浏览器不支持date(time),所以用此方法转换*/</span><br><span class="line">function NewDate(fmt) &#123;</span><br><span class="line">    /*首先将日期分隔 ，获取到日期部分 和 时间部分*/</span><br><span class="line">    var day = fmt.split(&apos; &apos;);</span><br><span class="line">    /*获取日期部分的年月日*/</span><br><span class="line">    var days = day[0].split(&apos;-&apos;);</span><br><span class="line">    /*获取时间部分的 时分秒*/</span><br><span class="line">    var mi = day[day.length - 1].split(&apos;:&apos;);</span><br><span class="line">    /*获取当前date类型日期*/</span><br><span class="line">    var date = new Date();</span><br><span class="line">    /*给date赋值  年月日*/</span><br><span class="line">    date.setUTCFullYear(days[0], days[1] - 1, days[2]);</span><br><span class="line">    /*给date赋值 时分秒  首先转换utc时区 ：+8*/</span><br><span class="line">    date.setUTCHours(mi[0] - 8, mi[1], mi[2]);</span><br><span class="line">    return date;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*为空判断*/</span><br><span class="line">function isEmpty(s) &#123;</span><br><span class="line">    switch (typeof(s)) &#123;</span><br><span class="line">        case &apos;string&apos;:</span><br><span class="line">            return !s.length;</span><br><span class="line">            break;</span><br><span class="line">        case &apos;array&apos;:</span><br><span class="line">        case &apos;object&apos;:</span><br><span class="line">            for (var i in s) return false;</span><br><span class="line">            return true;</span><br><span class="line">            break;</span><br><span class="line">        case &apos;undefined&apos;:</span><br><span class="line">            return true;</span><br><span class="line">            break;</span><br><span class="line">        default:</span><br><span class="line">            return !s;</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*数字判断*/</span><br><span class="line">function isNumber(s) &#123;</span><br><span class="line">    return typeof(s) == &apos;number&apos; ? true : false;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*整数判断*/</span><br><span class="line">function isInt(s) &#123;</span><br><span class="line">    var re = /^-?\d*$/;</span><br><span class="line">    return re.test(s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*正整数判断*/</span><br><span class="line">function isUInt(s) &#123;</span><br><span class="line">    var re = /^\d*$/;</span><br><span class="line">    return re.test(s) &amp;&amp; s &gt;= 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*小数判断*/</span><br><span class="line">function isDecimal(s, bit) &#123;</span><br><span class="line">    if (!arguments[1]) bit = -1;</span><br><span class="line">    if (bit == -1) &#123;</span><br><span class="line">        var re = /^-?\d*.?\d*$/;</span><br><span class="line">        return re.test(s);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        var re = new RegExp(&apos;^-?\\d*.?\\d&#123;0,&apos; + bit + &apos;&#125;$&apos;);</span><br><span class="line">        return re.test(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*正小数判断*/</span><br><span class="line">function isUDecimal(s, bit) &#123;</span><br><span class="line">    if (!arguments[1]) bit = -1;</span><br><span class="line">    if (bit == -1) &#123;</span><br><span class="line">        var re = /^\d*.?\d*$/;</span><br><span class="line">        return re.test(s) &amp;&amp; s &gt;= 0;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        var re = new RegExp(&apos;^\\d*.?\\d&#123;0,&apos; + bit + &apos;&#125;$&apos;);</span><br><span class="line">        return re.test(s) &amp;&amp; s &gt;= 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*字符串判断*/</span><br><span class="line">function isString(s) &#123;</span><br><span class="line">    return typeof(s) == &apos;string&apos;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*========================/常用函数========================*/</span><br><span class="line"></span><br><span class="line">js onkeyup replace 自动替换</span><br><span class="line"></span><br><span class="line">检测浮点数 只能是整数或者小数 </span><br><span class="line">多余的就replace 掉 的表单验证</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function checkFloatNum(obj)</span><br><span class="line">&#123;</span><br><span class="line">    //先把非数字的都替换掉，除了数字和.</span><br><span class="line">    obj.value = obj.value.replace(/[^\d.]/g,&quot;&quot;);</span><br><span class="line">    //必须保证第一个为数字而不是.</span><br><span class="line">    obj.value = obj.value.replace(/^\./g,&quot;&quot;);</span><br><span class="line">    //保证只有出现一个.而没有多个.</span><br><span class="line">    obj.value = obj.value.replace(/\.&#123;2,&#125;/g,&quot;.&quot;);</span><br><span class="line">    //保证.只出现一次，而不能出现两次以上</span><br><span class="line">    obj.value = obj.value.replace(&quot;.&quot;,&quot;$#$&quot;).replace(/\./g,&quot;&quot;).replace(&quot;$#$&quot;,&quot;.&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="performance"><a href="#performance" class="headerlink" title="performance"></a>performance</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">;</span><br><span class="line">(function() &#123;</span><br><span class="line"></span><br><span class="line">	handleAddListener(&apos;load&apos;, getTiming)</span><br><span class="line"></span><br><span class="line">	function handleAddListener(type, fn) &#123;</span><br><span class="line">		if(window.addEventListener) &#123;</span><br><span class="line">			window.addEventListener(type, fn)</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			window.attachEvent(&apos;on&apos; + type, fn)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	function getTiming() &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			var time = performance.timing;</span><br><span class="line">			var timingObj = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">			var loadTime = (time.loadEventEnd - time.loadEventStart) / 1000;</span><br><span class="line"></span><br><span class="line">			if(loadTime &lt; 0) &#123;</span><br><span class="line">				setTimeout(function() &#123;</span><br><span class="line">					getTiming();</span><br><span class="line">				&#125;, 200);</span><br><span class="line">				return;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			timingObj[&apos;重定向时间&apos;] = (time.redirectEnd - time.redirectStart) / 1000;</span><br><span class="line">			timingObj[&apos;DNS解析时间&apos;] = (time.domainLookupEnd - time.domainLookupStart) / 1000;</span><br><span class="line">			timingObj[&apos;TCP完成握手时间&apos;] = (time.connectEnd - time.connectStart) / 1000;</span><br><span class="line">			timingObj[&apos;HTTP请求响应完成时间&apos;] = (time.responseEnd - time.requestStart) / 1000;</span><br><span class="line">			timingObj[&apos;DOM开始加载前所花费时间&apos;] = (time.responseEnd - time.navigationStart) / 1000;</span><br><span class="line">			timingObj[&apos;DOM加载完成时间&apos;] = (time.domComplete - time.domLoading) / 1000;</span><br><span class="line">			timingObj[&apos;DOM结构解析完成时间&apos;] = (time.domInteractive - time.domLoading) / 1000;</span><br><span class="line">			timingObj[&apos;脚本加载时间&apos;] = (time.domContentLoadedEventEnd - time.domContentLoadedEventStart) / 1000;</span><br><span class="line">			timingObj[&apos;onload事件时间&apos;] = (time.loadEventEnd - time.loadEventStart) / 1000;</span><br><span class="line">			timingObj[&apos;页面完全加载时间&apos;] = (timingObj[&apos;重定向时间&apos;] + timingObj[&apos;DNS解析时间&apos;] + timingObj[&apos;TCP完成握手时间&apos;] + timingObj[&apos;HTTP请求响应完成时间&apos;] + timingObj[&apos;DOM结构解析完成时间&apos;] + timingObj[&apos;DOM加载完成时间&apos;]);</span><br><span class="line"></span><br><span class="line">			for(item in timingObj) &#123;</span><br><span class="line">				console.log(item + &quot;:&quot; + timingObj[item] + &apos;毫秒(ms)&apos;);</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			console.log(performance.timing);</span><br><span class="line"></span><br><span class="line">		&#125; catch(e) &#123;</span><br><span class="line">			console.log(timingObj)</span><br><span class="line">			console.log(performance.timing);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">export default class Cookie &#123;</span><br><span class="line">	//写cookies</span><br><span class="line">	static setCookie = (name, value) =&gt; &#123;</span><br><span class="line">		var Days = 30;</span><br><span class="line">		var exp = new Date();</span><br><span class="line">		exp.setTime(exp.getTime() + Days * 24 * 60 * 60 * 1000);</span><br><span class="line">		document.cookie = name + &quot;=&quot; + escape(value) + &quot;;expires=&quot; + exp.toGMTString();</span><br><span class="line">	&#125;</span><br><span class="line">	//读取cookies </span><br><span class="line">	static getCookie = (name) =&gt; &#123;</span><br><span class="line">		var arr, reg = new RegExp(&quot;(^| )&quot; + name + &quot;=([^;]*)(;|$)&quot;);</span><br><span class="line">		if(arr = document.cookie.match(reg))</span><br><span class="line">			return unescape(arr[2]);</span><br><span class="line">		else</span><br><span class="line">			return null;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	//删除cookies </span><br><span class="line">	static delCookie = (name) =&gt; &#123;</span><br><span class="line">		var exp = new Date();</span><br><span class="line">		exp.setTime(exp.getTime() - 1);</span><br><span class="line">		var cval = getCookie(name);</span><br><span class="line">		if(cval != null)</span><br><span class="line">			document.cookie = name + &quot;=&quot; + cval + &quot;;expires=&quot; + exp.toGMTString();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="jsonp"><a href="#jsonp" class="headerlink" title="jsonp"></a>jsonp</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">    function jsonp(objects)&#123;</span><br><span class="line">        objects = objects || &#123;&#125;;</span><br><span class="line">        if(!objects.url || !objects.callback)&#123;</span><br><span class="line">            throw new Error(&apos;参数不合法&apos;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //创建script标签并插入</span><br><span class="line">        var callbackName =  (&apos;jsonp_&apos; + Math.random()).replace(&quot;.&quot;, &quot;&quot;);//随机生成callbackName</span><br><span class="line"></span><br><span class="line">        var script = document.createElement(&apos;script&apos;);</span><br><span class="line">        var body = document.getElementsByTagName(&apos;body&apos;)[0];</span><br><span class="line">        body.appendChild(script);</span><br><span class="line"></span><br><span class="line">        window[callbackName] = function (json) &#123;</span><br><span class="line">            body.removeChild(script);</span><br><span class="line">            clearTimeout(script.timer);</span><br><span class="line">            window[callbackName] = null;</span><br><span class="line">            objects.callback &amp;&amp; objects.callback(json);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        //发出请求</span><br><span class="line">        script.src = objects.url + callbackName;</span><br><span class="line"></span><br><span class="line">        //响应时间</span><br><span class="line">        if(objects.time)&#123;</span><br><span class="line">            script.timer = setTimeout(function () &#123;</span><br><span class="line">                window[callbackName] = null;</span><br><span class="line">                body.removeChild(script);</span><br><span class="line">                objects.fail &amp;&amp; objects.fail(&apos;超时&apos;);</span><br><span class="line">            &#125;, objects.time);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="js判断DOM是否包含另一个DOM"><a href="#js判断DOM是否包含另一个DOM" class="headerlink" title="js判断DOM是否包含另一个DOM"></a>js判断DOM是否包含另一个DOM</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"></span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">		&lt;title&gt;&lt;/title&gt;</span><br><span class="line">		&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">			.first&#123;</span><br><span class="line">				width: 200px;</span><br><span class="line">				height: 200px;</span><br><span class="line">				background: red;</span><br><span class="line">			&#125;</span><br><span class="line">			.first-child&#123;</span><br><span class="line">				width: 100px;</span><br><span class="line">				height: 100px;</span><br><span class="line">				background: green;</span><br><span class="line">			&#125;</span><br><span class="line">		&lt;/style&gt;</span><br><span class="line">	&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">	&lt;body&gt;</span><br><span class="line">		&lt;div class=&quot;first&quot;&gt;</span><br><span class="line">			&lt;div class=&quot;first-child&quot;&gt;&lt;/div&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;div class=&quot;second&quot;&gt;</span><br><span class="line">			&lt;div class=&quot;second-child&quot;&gt;</span><br><span class="line">				&lt;div class=&quot;second-child-child&quot;&gt;&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">			var first = document.querySelector(&apos;.first&apos;);</span><br><span class="line">			var firstchild = document.querySelector(&apos;.first-child&apos;);</span><br><span class="line">			</span><br><span class="line">			var second = document.querySelector(&apos;.second&apos;);</span><br><span class="line">			var secondchild = document.querySelector(&apos;.second-child&apos;);</span><br><span class="line">			var secondchildchild = document.querySelector(&apos;.second-child-child&apos;);</span><br><span class="line">			 </span><br><span class="line">			</span><br><span class="line"></span><br><span class="line">			function isChildOf(child, parent) &#123;</span><br><span class="line">				var parentNode;</span><br><span class="line">				if(child &amp;&amp; parent) &#123;</span><br><span class="line">					parentNode = child.parentNode;</span><br><span class="line">					while(parentNode) &#123;</span><br><span class="line">						if(parent === parentNode) &#123;</span><br><span class="line">							return true;</span><br><span class="line">						&#125;</span><br><span class="line">						parentNode = parentNode.parentNode;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				return false;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			console.log(isChildOf(firstchild, first));</span><br><span class="line">			console.log(isChildOf(secondchild, second));</span><br><span class="line">			console.log(isChildOf(secondchildchild, secondchild));</span><br><span class="line">			console.log(isChildOf(secondchildchild, second));</span><br><span class="line">			</span><br><span class="line">			console.log(isChildOf(secondchildchild, first));</span><br><span class="line">			</span><br><span class="line">			console.log(document.documentElement.contains(document.body));</span><br><span class="line">			console.log(second.contains(secondchildchild));</span><br><span class="line">			</span><br><span class="line">			</span><br><span class="line">		&lt;/script&gt;</span><br><span class="line">	&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="回到顶部带动画"><a href="#回到顶部带动画" class="headerlink" title="回到顶部带动画"></a>回到顶部带动画</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">/* 滚动条动画：</span><br><span class="line"> * 移动端:document.body.scrollTop</span><br><span class="line">   PC端：document.documentElement.scrollTop</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   //使用:gotoTop(400,callBack)</span><br><span class="line">   gotoTop(durations,  callback = undefined) &#123;</span><br><span class="line">      const doc = document.documentElement</span><br><span class="line">      const scrollTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)</span><br><span class="line">      for (var i = 60; i &gt;= 0; i--) &#123;</span><br><span class="line">        setTimeout((i =&gt; &#123;</span><br><span class="line">          return () =&gt; &#123;</span><br><span class="line">            doc.scrollTop = scrollTop * i / 60</span><br><span class="line">            if (i === 0 &amp;&amp; typeof callback === &apos;function&apos;) &#123;</span><br><span class="line">              callback()</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)(i), durations * (1 - i / 60))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   </span><br><span class="line"> * */</span><br><span class="line">var requestAnimFrame = (function() &#123;</span><br><span class="line">	return window.requestAnimationFrame ||</span><br><span class="line">		window.webkitRequestAnimationFrame ||</span><br><span class="line">		window.mozRequestAnimationFrame ||</span><br><span class="line">		function(callback) &#123;</span><br><span class="line">			window.setTimeout(callback, 1000 / 60);</span><br><span class="line">		&#125;;</span><br><span class="line">&#125;)();</span><br><span class="line">var cancelAnimationFrame = (function() &#123;</span><br><span class="line">	return window.cancelAnimationFrame ||</span><br><span class="line">		window.webkitCancelAnimationFrame ||</span><br><span class="line">		window.mozCancelAnimationFrame ||</span><br><span class="line">		window.oCancelAnimationFrame ||</span><br><span class="line">		function(id) &#123;</span><br><span class="line">			window.clearTimeout(id)</span><br><span class="line">		&#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">// Tween中的方法接受4个参数t,b,c,d 。t为初始时间 b、c、d三个参数（即初始值，变化量，持续时间）。返回值为当前位置</span><br><span class="line">// t =&gt; time(初始记步次数)  b =&gt; begin(初始位置)   c =&gt; change(变化量)   d =&gt; duration(持续次数)</span><br><span class="line"></span><br><span class="line">var tween = &#123;</span><br><span class="line">	linear: function(t, b, c, d) &#123;</span><br><span class="line">		return c * t / d + b;</span><br><span class="line">	&#125;,</span><br><span class="line">	easeIn: function(t, b, c, d) &#123;</span><br><span class="line">		return c * (t /= d) * t + b;</span><br><span class="line">	&#125;,</span><br><span class="line">	strongEaseIn: function(t, b, c, d) &#123;</span><br><span class="line">		return c * (t /= d) * t * t * t * t + b;</span><br><span class="line">	&#125;,</span><br><span class="line">	strongEaseOut: function(t, b, c, d) &#123;</span><br><span class="line">		return c * ((t = t / d - 1) * t * t * t * t + 1) + b;</span><br><span class="line">	&#125;,</span><br><span class="line">	sineaseIn: function(t, b, c, d) &#123;</span><br><span class="line">		return c * (t /= d) * t * t + b;</span><br><span class="line">	&#125;,</span><br><span class="line">	sineaseOut: function(t, b, c, d) &#123;</span><br><span class="line">		return c * ((t = t / d - 1) * t * t + 1) + b;</span><br><span class="line">	&#125;,</span><br><span class="line">	easeInOutQuad: function(t, b, c, d) &#123;</span><br><span class="line">		t /= d / 2;</span><br><span class="line">		if(t &lt; 1) return c / 2 * t * t + b;</span><br><span class="line">		t--;</span><br><span class="line">		return -c / 2 * (t * (t - 2) - 1) + b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">var myReq; </span><br><span class="line">export var animatedScrollTo = function(element, to, duration, callback, Bzr = &apos;linear&apos;) &#123;</span><br><span class="line">	var start = element.scrollTop,</span><br><span class="line">		change = to - start,</span><br><span class="line">		animationStart = +new Date();</span><br><span class="line">	var animating = true;</span><br><span class="line">	var lastpos = null;</span><br><span class="line"></span><br><span class="line">	var animateScroll = function() &#123;</span><br><span class="line">		if(!animating) &#123;</span><br><span class="line">			return;</span><br><span class="line">		&#125;</span><br><span class="line">		myReq=requestAnimFrame(animateScroll);</span><br><span class="line">		var now = +new Date();</span><br><span class="line">		var val = Math.floor(tween[Bzr](now - animationStart, start, change, duration));</span><br><span class="line"></span><br><span class="line">		if(lastpos) &#123;</span><br><span class="line">			if(lastpos === element.scrollTop) &#123;</span><br><span class="line">				lastpos = val;</span><br><span class="line">				element.scrollTop = val;</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				animating = false;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			lastpos = val;</span><br><span class="line">			element.scrollTop = val;</span><br><span class="line">		&#125;</span><br><span class="line">		if(now &gt; animationStart + duration) &#123;</span><br><span class="line">			element.scrollTop = to;</span><br><span class="line">			animating = false;</span><br><span class="line">			cancelAnimationFrame(myReq);   //清除定时器动画</span><br><span class="line">			callback&amp;&amp;callback();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	myReq=requestAnimFrame(animateScroll);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="使用js唤起Native下的App"><a href="#使用js唤起Native下的App" class="headerlink" title="使用js唤起Native下的App"></a>使用js唤起Native下的App</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 浏览器的相关信息</span><br><span class="line"> */</span><br><span class="line">var Browser = /** @class */ (function() &#123;</span><br><span class="line">	function Browser() &#123;&#125;</span><br><span class="line">	/**</span><br><span class="line">	 * 获取浏览器数据</span><br><span class="line">	 */</span><br><span class="line">	Browser.getBrowser = function() &#123;</span><br><span class="line">		var UA = navigator.userAgent || &apos;&apos;</span><br><span class="line">		var isAndroid = (function() &#123;</span><br><span class="line">			return UA.match(/Android/i) ? true : false</span><br><span class="line">		&#125;)()</span><br><span class="line">		var isQQ = (function() &#123;</span><br><span class="line">			return /(iPad|iPhone|iPod).*? (IPad)?QQ\/([\d\.]+)/.test(UA) || /\bV1_AND_SQI?_([\d\.]+)(.*? QQ\/([\d\.]+))?/.test(UA)</span><br><span class="line">		&#125;)()</span><br><span class="line">		var isIOS = (function() &#123;</span><br><span class="line">			return UA.match(/iPhone|iPad|iPod/i) ? true : false</span><br><span class="line">		&#125;)()</span><br><span class="line">		var isSafari = (function() &#123;</span><br><span class="line">			return /iPhone|iPad|iPod\/([\w.]+).*(safari).*/i.test(UA)</span><br><span class="line">		&#125;)()</span><br><span class="line">		var isWx = (function() &#123;</span><br><span class="line">			return UA.match(/micromessenger/i) ? true : false</span><br><span class="line">		&#125;)()</span><br><span class="line">		var isWb = (function() &#123;</span><br><span class="line">			return UA.match(/weibo/i) ? true : false</span><br><span class="line">		&#125;)()</span><br><span class="line">		var isAndroidChrome = (function() &#123;</span><br><span class="line">			return(UA.match(/Chrome\/([\d.]+)/) || UA.match(/CriOS\/([\d.]+)/)) &amp;&amp; isAndroid &amp;&amp; !isQQ</span><br><span class="line">		&#125;)()</span><br><span class="line">		var isQZ = (function() &#123;</span><br><span class="line">			return UA.indexOf(&apos;Qzone/&apos;) !== -1</span><br><span class="line">		&#125;)()</span><br><span class="line">		var browser = &#123;</span><br><span class="line">			isAndroid: isAndroid,</span><br><span class="line">			isIOS: isIOS,</span><br><span class="line">			isSafari: isSafari,</span><br><span class="line">			isQQ: isQQ,</span><br><span class="line">			isWb: isWb,</span><br><span class="line">			isWx: isWx,</span><br><span class="line">			isQZ: isQZ,</span><br><span class="line">			isAndroidChrome: isAndroidChrome</span><br><span class="line">		&#125;</span><br><span class="line">		return browser</span><br><span class="line">	&#125;</span><br><span class="line">	return Browser</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * AppLink:H5唤起APP的所有方法</span><br><span class="line"> */</span><br><span class="line">var AppLink = /** @class */ (function() &#123;</span><br><span class="line">	/**</span><br><span class="line">	 * 类的contructor方法</span><br><span class="line">	 * @param config IAppLink类型的config文件</span><br><span class="line">	 */</span><br><span class="line">	function AppLink(config) &#123;</span><br><span class="line">		/**</span><br><span class="line">		 * UA</span><br><span class="line">		 */</span><br><span class="line">		this.UA = &#123;&#125;</span><br><span class="line">		/**</span><br><span class="line">		 * 传入的config数据，以接口约束</span><br><span class="line">		 */</span><br><span class="line">		this.config = &#123;&#125;</span><br><span class="line">		this.UA = navigator.userAgent || &apos;&apos;</span><br><span class="line">		this.config = config</span><br><span class="line">	&#125;</span><br><span class="line">	/**</span><br><span class="line">	 * 跳转函数</span><br><span class="line">	 * @param url 链接</span><br><span class="line">	 */</span><br><span class="line">	AppLink.prototype.go = function(url) &#123;</span><br><span class="line">		window.location.href = url</span><br><span class="line">	&#125;</span><br><span class="line">	/**</span><br><span class="line">	 * 检查是否唤起</span><br><span class="line">	 * @param cb 回调函数</span><br><span class="line">	 */</span><br><span class="line">	AppLink.prototype.checkOpen = function(cb) &#123;</span><br><span class="line">		var inter = null</span><br><span class="line">		var statue = false</span><br><span class="line">		var count = 0</span><br><span class="line">		inter = window.setInterval(function() &#123;</span><br><span class="line">			count++</span><br><span class="line">			statue = document.hidden || document.webkitHidden</span><br><span class="line">			if(statue || count &gt; 40) &#123;</span><br><span class="line">				cb(statue)</span><br><span class="line">				clearInterval(inter)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;, 50)</span><br><span class="line">	&#125;</span><br><span class="line">	/**</span><br><span class="line">	 * 外部调用的入口函数</span><br><span class="line">	 */</span><br><span class="line">	AppLink.prototype.open = function() &#123;</span><br><span class="line">		var _this = this</span><br><span class="line">		var browser = Browser.getBrowser()</span><br><span class="line">		var config = this.config</span><br><span class="line">		// 微信直接跳 应用宝</span><br><span class="line">		if(browser.isWx) &#123;</span><br><span class="line">			this.go(this.config.yyb)</span><br><span class="line">		&#125; else if(browser.isQQ) &#123;</span><br><span class="line">			if(browser.isIOS) &#123;</span><br><span class="line">				// 没有下载</span><br><span class="line">				this.checkOpen(function(isSuccess) &#123;</span><br><span class="line">					if(!isSuccess) &#123;</span><br><span class="line">						_this.go(_this.config.appstore)</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;</span><br><span class="line">			// iOS跳到AppStore</span><br><span class="line">			if(browser.isAndroid) &#123;</span><br><span class="line">				// 使用scheme唤起</span><br><span class="line">				this.tryCallApp(this.config.schema)</span><br><span class="line">				// 唤起失败 跳到应用宝</span><br><span class="line">				this.checkOpen(function(isSuccess) &#123;</span><br><span class="line">					if(!isSuccess) &#123;</span><br><span class="line">						_this.go(_this.config.yyb)</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; else if(browser.isWb) &#123;</span><br><span class="line">			// 使用scheme唤起</span><br><span class="line">			this.tryCallApp(this.config.schema)</span><br><span class="line">			// 微博：唤起失败，也不跳转，会有引导功能</span><br><span class="line">		&#125; else if(browser.isSafari) &#123;</span><br><span class="line">			var version = this.getIOSVersion()</span><br><span class="line">			// iOS10以下不支持直接跳转到AppStore，跳到应用宝</span><br><span class="line">			if(version &lt; 10) &#123;</span><br><span class="line">				this.go(this.config.yyb)</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				this.go(this.config.appstore)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			// 其他情况，直接跳应用宝</span><br><span class="line">			this.go(this.config.yyb)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	/**</span><br><span class="line">	 * 下载按钮的url地址</span><br><span class="line">	 */</span><br><span class="line">	AppLink.prototype.getDownloadUrl = function() &#123;</span><br><span class="line">		var browser = Browser.getBrowser()</span><br><span class="line">		var config = this.config</span><br><span class="line">		var url = &apos;&apos;</span><br><span class="line">		if(browser.isQQ) &#123;</span><br><span class="line">			if(browser.isIOS) &#123;</span><br><span class="line">				url = this.config.appstore</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				url = this.config.yyb</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; else if(browser.isSafari) &#123;</span><br><span class="line">			var version = this.getIOSVersion()</span><br><span class="line">			if(version &lt; 10) &#123;</span><br><span class="line">				url = this.config.yyb</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				url = this.config.appstore</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; else if(browser.isWb) &#123;</span><br><span class="line">			url = &apos;&apos;</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			url = this.config.yyb</span><br><span class="line">		&#125;</span><br><span class="line">		return url</span><br><span class="line">	&#125;</span><br><span class="line">	/**</span><br><span class="line">	 * 尝试唤起APP</span><br><span class="line">	 * @param scheme 唤起的scheme</span><br><span class="line">	 */</span><br><span class="line">	AppLink.prototype.tryCallApp = function(scheme) &#123;</span><br><span class="line">		var aLink = document.createElement(&apos;a&apos;),</span><br><span class="line">			body = document.body</span><br><span class="line">		aLink.href = scheme</span><br><span class="line">		body.appendChild(aLink)</span><br><span class="line">		aLink.click()</span><br><span class="line">	&#125;</span><br><span class="line">	/**</span><br><span class="line">	 * 判断iOS版本</span><br><span class="line">	 */</span><br><span class="line">	AppLink.prototype.getIOSVersion = function() &#123;</span><br><span class="line">		var ver = navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)</span><br><span class="line">		var version = parseInt(ver[1], 10)</span><br><span class="line">		return version</span><br><span class="line">	&#125;</span><br><span class="line">	return AppLink</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<h3 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">		function add(...x) &#123;</span><br><span class="line">			var sum = x.reduce((a,b)=&gt;a+b,0)</span><br><span class="line">			var tmp = function(...y) &#123;</span><br><span class="line">				sum =sum+y.reduce((a,b)=&gt;a+b,0)</span><br><span class="line">				return tmp;</span><br><span class="line">			&#125;;</span><br><span class="line">			tmp.toString = function() &#123;</span><br><span class="line">				return sum;</span><br><span class="line">			&#125;;</span><br><span class="line">			return tmp;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		console.log(+add(1)(2)(3))   // 6</span><br><span class="line">		console.log(+add(1)(2,3))    // 6</span><br><span class="line">		console.log(+add(1,2)(3))    // 6</span><br><span class="line">		console.log(+add(1)(2)(3,4))   //10</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		add(1)(2)(3).valueOf</span><br><span class="line">		//ƒ valueOf() &#123; [native code] &#125;</span><br><span class="line">		add(1)(2)(3).valueOf()</span><br><span class="line">		//ƒ 6</span><br><span class="line">		+add(1)(2)(3).valueOf()</span><br><span class="line">		//6</span><br><span class="line">		+&quot;&quot;+add(1)(2)(3).valueOf()</span><br><span class="line">		//6</span><br><span class="line">	&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h4 id="add-2-3-add-2-3-输出5"><a href="#add-2-3-add-2-3-输出5" class="headerlink" title="add(2)(3)(),add(2,3)()输出5"></a>add(2)(3)(),add(2,3)()输出5</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">			function sum() &#123;</span><br><span class="line">				var cur = Array.prototype.slice.call(arguments).reduce(function(a, b) &#123;</span><br><span class="line">					return a + b;</span><br><span class="line">				&#125;, 0);</span><br><span class="line"></span><br><span class="line">				function add() &#123;</span><br><span class="line">					return arguments.length == 0 ? cur : (cur += Array.prototype.slice.call(arguments).reduce(function(a, b) &#123;</span><br><span class="line">						return a + b</span><br><span class="line">					&#125;, 0), add);</span><br><span class="line">				&#125;;</span><br><span class="line">				return arguments.length == 0 ? 0 : add;</span><br><span class="line">		&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="获取CSS样式"><a href="#获取CSS样式" class="headerlink" title="获取CSS样式"></a>获取CSS样式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function getStyle(obj, attr) &#123;</span><br><span class="line">	if(obj.currentStyle) &#123;</span><br><span class="line">		return obj.currentStyle[attr]; //IE678</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		return window.getComputedStyle(obj, null)[attr];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Colors"><a href="#Colors" class="headerlink" title="Colors"></a>Colors</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">function rgbToRgba(rgbValue) &#123;</span><br><span class="line">	const rgb = /rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(rgbValue);</span><br><span class="line">	return rgb ? `rgba($&#123;rgb[1]&#125;,1)` : rgbValue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function hexToRgba(hexValue) &#123;</span><br><span class="line">	const rgx = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;</span><br><span class="line">	const hex = hexValue.replace(rgx, (m, r, g, b) =&gt; r + r + g + g + b + b);</span><br><span class="line">	const rgb = /^#?([a-f\d]&#123;2&#125;)([a-f\d]&#123;2&#125;)([a-f\d]&#123;2&#125;)$/i.exec(hex);</span><br><span class="line">	const r = parseInt(rgb[1], 16);</span><br><span class="line">	const g = parseInt(rgb[2], 16);</span><br><span class="line">	const b = parseInt(rgb[3], 16);</span><br><span class="line">	return `rgba($&#123;r&#125;,$&#123;g&#125;,$&#123;b&#125;,1)`;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function hslToRgba(hslValue) &#123;</span><br><span class="line">	const hsl = /hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(hslValue) || /hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(hslValue);</span><br><span class="line">	const h = parseInt(hsl[1]) / 360;</span><br><span class="line">	const s = parseInt(hsl[2]) / 100;</span><br><span class="line">	const l = parseInt(hsl[3]) / 100;</span><br><span class="line">	const a = hsl[4] || 1;</span><br><span class="line"></span><br><span class="line">	function hue2rgb(p, q, t) &#123;</span><br><span class="line">		if(t &lt; 0) t += 1;</span><br><span class="line">		if(t &gt; 1) t -= 1;</span><br><span class="line">		if(t &lt; 1 / 6) return p + (q - p) * 6 * t;</span><br><span class="line">		if(t &lt; 1 / 2) return q;</span><br><span class="line">		if(t &lt; 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;</span><br><span class="line">		return p;</span><br><span class="line">	&#125;</span><br><span class="line">	let r, g, b;</span><br><span class="line">	if(s == 0) &#123;</span><br><span class="line">		r = g = b = l;</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		const q = l &lt; 0.5 ? l * (1 + s) : l + s - l * s;</span><br><span class="line">		const p = 2 * l - q;</span><br><span class="line">		r = hue2rgb(p, q, h + 1 / 3);</span><br><span class="line">		g = hue2rgb(p, q, h);</span><br><span class="line">		b = hue2rgb(p, q, h - 1 / 3);</span><br><span class="line">	&#125;</span><br><span class="line">	return `rgba($&#123;r * 255&#125;,$&#123;g * 255&#125;,$&#123;b * 255&#125;,$&#123;a&#125;)`;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function colorToRgb(val) &#123;</span><br><span class="line">	if(is.rgb(val)) return rgbToRgba(val);</span><br><span class="line">	if(is.hex(val)) return hexToRgba(val);</span><br><span class="line">	if(is.hsl(val)) return hslToRgba(val);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="750rem"><a href="#750rem" class="headerlink" title="750rem"></a>750rem</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">(function(doc, win) &#123;</span><br><span class="line">	var docEl = doc.documentElement,</span><br><span class="line">		resizeEvt = &apos;orientationchange&apos; in window ? &apos;orientationchange&apos; : &apos;resize&apos;,</span><br><span class="line">		recalc = function() &#123;</span><br><span class="line">			var clientWidth = docEl.clientWidth;</span><br><span class="line">			if(!clientWidth) return;</span><br><span class="line">			if(clientWidth &gt;= 750) &#123;</span><br><span class="line">				docEl.style.fontSize = &apos;100px&apos;;</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				docEl.style.fontSize = 100 * (clientWidth / 750) + &apos;px&apos;;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">	if(!doc.addEventListener) return;</span><br><span class="line">	win.addEventListener(resizeEvt, recalc, false);</span><br><span class="line">	doc.addEventListener(&apos;DOMContentLoaded&apos;, recalc, false);</span><br><span class="line">&#125;)(document, window);</span><br></pre></td></tr></table></figure>
<h3 id="表单验证"><a href="#表单验证" class="headerlink" title="表单验证"></a>表单验证</h3><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">static checkType = (str, type) =&gt; &#123;</span><br><span class="line">	switch(type) &#123;</span><br><span class="line">		case &apos;email&apos;:</span><br><span class="line">			return /^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/.test(str);</span><br><span class="line">		case &apos;phone&apos;:</span><br><span class="line">			return /^1[3|4|5|7|8][0-9]&#123;9&#125;$/.test(str);</span><br><span class="line">		case &apos;tel&apos;:</span><br><span class="line">			return /^(0\d&#123;2,3&#125;-\d&#123;7,8&#125;)(-\d&#123;1,4&#125;)?$/.test(str);</span><br><span class="line">		case &apos;number&apos;:</span><br><span class="line">			return /^[0-9]$/.test(str);</span><br><span class="line">		case &apos;english&apos;:</span><br><span class="line">			return /^[a-zA-Z]+$/.test(str);</span><br><span class="line">		case &apos;chinese&apos;:</span><br><span class="line">			return /^[\u4E00-\u9FA5]+$/.test(str);</span><br><span class="line">		case &apos;lower&apos;:</span><br><span class="line">			return /^[a-z]+$/.test(str);</span><br><span class="line">		case &apos;upper&apos;:</span><br><span class="line">			return /^[A-Z]+$/.test(str);</span><br><span class="line">		default:</span><br><span class="line">			return true;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre><h3 id="navigator帮助类"><a href="#navigator帮助类" class="headerlink" title="navigator帮助类"></a>navigator帮助类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line">class navigatorUtil &#123;</span><br><span class="line">	/**</span><br><span class="line">	 * 头部信息</span><br><span class="line">	 * @type &#123;[type]&#125;</span><br><span class="line">	 */</span><br><span class="line">	static userAgent = navigator.userAgent;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 是否为ipad</span><br><span class="line">	 */</span><br><span class="line">	static isIPad = () =&gt; &#123;</span><br><span class="line">		return(navigatorUtil.userAgent.indexOf(&quot;iPad&quot;) &gt; -1);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 是否为iphone</span><br><span class="line">	 * @param  &#123;[type]&#125;  userAgent [description]</span><br><span class="line">	 * @return &#123;Boolean&#125;           [description]</span><br><span class="line">	 */</span><br><span class="line">	static isIPhone = () =&gt; &#123;</span><br><span class="line">		return(navigatorUtil.userAgent.indexOf(&quot;iPhone&quot;) &gt; -1);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 是否为ios系统</span><br><span class="line">	 * @param  &#123;[type]&#125;  userAgent [description]</span><br><span class="line">	 * @return &#123;Boolean&#125;           [description]</span><br><span class="line">	 */</span><br><span class="line"></span><br><span class="line">	static isIOS = () =&gt; &#123;</span><br><span class="line">		return navigatorUtil.isIPad(navigatorUtil.userAgent) || navigatorUtil.isIPhone(</span><br><span class="line">			navigatorUtil.userAgent);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 是否为Android系统</span><br><span class="line">	 * @param  &#123;[type]&#125;  userAgent [description]</span><br><span class="line">	 * @return &#123;Boolean&#125;           [description]</span><br><span class="line">	 */</span><br><span class="line">	static isAndroid = () =&gt; &#123;</span><br><span class="line">		return(navigatorUtil.userAgent.indexOf(&quot;Android&quot;) &gt; -1) ||</span><br><span class="line">			(navigatorUtil.userAgent.indexOf(&quot;Linux&quot;) &gt; -1);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 判断是否为微信</span><br><span class="line">	 */</span><br><span class="line">	static isWeixin = () =&gt; &#123;</span><br><span class="line">		return(navigatorUtil.userAgent.indexOf(&quot;MicroMessenger&quot;) &gt; -1);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * </span><br><span class="line">	 * @desc 获取浏览器类型和版本</span><br><span class="line">	 * @return &#123;String&#125; </span><br><span class="line">	 */</span><br><span class="line">	static getExplore = () =&gt; &#123;</span><br><span class="line">		var sys = &#123;&#125;,</span><br><span class="line">			ua = navigator.userAgent.toLowerCase(),</span><br><span class="line">			s;</span><br><span class="line">		(s = ua.match(/rv:([\d.]+)\) like gecko/)) ? sys.ie = s[1]:</span><br><span class="line">			(s = ua.match(/msie ([\d\.]+)/)) ? sys.ie = s[1] :</span><br><span class="line">			(s = ua.match(/edge\/([\d\.]+)/)) ? sys.edge = s[1] :</span><br><span class="line">			(s = ua.match(/firefox\/([\d\.]+)/)) ? sys.firefox = s[1] :</span><br><span class="line">			(s = ua.match(/(?:opera|opr).([\d\.]+)/)) ? sys.opera = s[1] :</span><br><span class="line">			(s = ua.match(/chrome\/([\d\.]+)/)) ? sys.chrome = s[1] :</span><br><span class="line">			(s = ua.match(/version\/([\d\.]+).*safari/)) ? sys.safari = s[1] : 0;</span><br><span class="line">		// 根据关系进行判断 if (sys.ie) return (&apos;IE: &apos; + sys.ie)</span><br><span class="line">		if(sys.edge) return(&apos;EDGE: &apos; + sys.edge)</span><br><span class="line">		if(sys.firefox) return(&apos;Firefox: &apos; + sys.firefox)</span><br><span class="line">		if(sys.chrome) return(&apos;Chrome: &apos; + sys.chrome)</span><br><span class="line">		if(sys.opera) return(&apos;Opera: &apos; + sys.opera)</span><br><span class="line">		if(sys.safari) return(&apos;Safari: &apos; + sys.safari)</span><br><span class="line">		return &apos;Unkonwn&apos;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * </span><br><span class="line">	 * @desc 获取操作系统类型</span><br><span class="line">	 * @return &#123;String&#125; </span><br><span class="line">	 */</span><br><span class="line">	static getOS = () =&gt; &#123;</span><br><span class="line">		var userAgent = &apos;navigator&apos; in window &amp;&amp; &apos;userAgent&apos; in navigator &amp;&amp; navigator.userAgent.toLowerCase() || &apos;&apos;;</span><br><span class="line">		var vendor = &apos;navigator&apos; in window &amp;&amp; &apos;vendor&apos; in navigator &amp;&amp; navigator.vendor.toLowerCase() || &apos;&apos;;</span><br><span class="line">		var appVersion = &apos;navigator&apos; in window &amp;&amp; &apos;appVersion&apos; in navigator &amp;&amp; navigator.appVersion.toLowerCase() || &apos;&apos;;</span><br><span class="line"></span><br><span class="line">		if(/mac/i.test(appVersion)) return &apos;MacOSX&apos;</span><br><span class="line">		if(/win/i.test(appVersion)) return &apos;windows&apos;</span><br><span class="line">		if(/linux/i.test(appVersion)) return &apos;linux&apos;</span><br><span class="line">		if(/iphone/i.test(userAgent) || /ipad/i.test(userAgent) || /ipod/i.test(userAgent)) &apos;ios&apos;</span><br><span class="line">		if(/android/i.test(userAgent)) return &apos;android&apos;</span><br><span class="line">		if(/win/i.test(appVersion) &amp;&amp; /phone/i.test(userAgent)) return &apos;windowsPhone&apos;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	//进入全屏模式,  判断各种浏览器，找到正确的方法</span><br><span class="line">	static launchFullScreen = (element) =&gt; &#123;</span><br><span class="line">		if(element.requestFullscreen) &#123;</span><br><span class="line">			element.requestFullscreen();</span><br><span class="line">		&#125; else if(element.mozRequestFullScreen) &#123;</span><br><span class="line">			element.mozRequestFullScreen();</span><br><span class="line">		&#125; else if(element.webkitRequestFullscreen) &#123;</span><br><span class="line">			element.webkitRequestFullscreen();</span><br><span class="line">		&#125; else if(element.msRequestFullscreen) &#123;</span><br><span class="line">			element.msRequestFullscreen();</span><br><span class="line">		&#125;</span><br><span class="line">		return true;</span><br><span class="line">	&#125;</span><br><span class="line">	//退出全屏模式</span><br><span class="line">	static exitFullScreen = () =&gt; &#123;</span><br><span class="line">		if(document.exitFullscreen) &#123;</span><br><span class="line">			document.exitFullscreen();</span><br><span class="line">		&#125; else if(document.mozCancelFullScreen) &#123;</span><br><span class="line">			document.mozCancelFullScreen();</span><br><span class="line">		&#125; else if(document.webkitExitFullscreen) &#123;</span><br><span class="line">			document.webkitExitFullscreen();</span><br><span class="line">		&#125;</span><br><span class="line">		return false;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="promise"><a href="#promise" class="headerlink" title="promise"></a>promise</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br></pre></td><td class="code"><pre><span class="line">function Promise(task) &#123;</span><br><span class="line">	let self = this; //缓存this</span><br><span class="line">	self.status = &apos;pending&apos;; //默认状态为pending</span><br><span class="line">	self.value = undefined; //存放着此promise的结果</span><br><span class="line">	self.onResolvedCallbacks = []; //存放着所有成功的回调函数</span><br><span class="line">	self.onRejectedCallbacks = []; //存放着所有的失败的回调函数</span><br><span class="line"></span><br><span class="line">	// 调用resolve方法可以把promise状态变成成功态</span><br><span class="line">	function resolve(value) &#123;</span><br><span class="line">		if(value instanceof Promise) &#123;</span><br><span class="line">			return value.then(resolve, reject)</span><br><span class="line">		&#125;</span><br><span class="line">		setTimeout(function() &#123; // 异步执行所有的回调函数</span><br><span class="line">			// 如果当前状态是初始态（pending），则转成成功态</span><br><span class="line">			// 此处这个写判断的原因是因为resolved和rejected两个状态只能由pending转化而来，两者不能相互转化</span><br><span class="line">			if(self.status == &apos;pending&apos;) &#123;</span><br><span class="line">				self.value = value;</span><br><span class="line">				self.status = &apos;resolved&apos;;</span><br><span class="line">				self.onResolvedCallbacks.forEach(item =&gt; item(self.value));</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	// 调用reject方法可以把当前的promise状态变成失败态</span><br><span class="line">	function reject(value) &#123;</span><br><span class="line">		setTimeout(function() &#123;</span><br><span class="line">			if(self.status == &apos;pending&apos;) &#123;</span><br><span class="line">				self.value = value;</span><br><span class="line">				self.status = &apos;rejected&apos;;</span><br><span class="line">				self.onRejectedCallbacks.forEach(item =&gt; item(value));</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	// 立即执行传入的任务</span><br><span class="line">	try &#123;</span><br><span class="line">		task(resolve, reject);</span><br><span class="line">	&#125; catch(e) &#123;</span><br><span class="line">		reject(e);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * resolvePromise函数的目的是与原生Promise相兼容，可以互相调用</span><br><span class="line"> */</span><br><span class="line">function resolvePromise(promise2, x, resolve, reject) &#123;</span><br><span class="line">	// 将返回的promise不停的调用执行，直到失败或者返回一个普通的数据类型</span><br><span class="line">	if(promise2 === x) &#123;</span><br><span class="line">		return reject(new TypeError(&apos;循环引用&apos;));</span><br><span class="line">	&#125;</span><br><span class="line">	let then, called;</span><br><span class="line"></span><br><span class="line">	if(x != null &amp;&amp; ((typeof x == &apos;object&apos; || isFunction(x)))) &#123;</span><br><span class="line">		// promise</span><br><span class="line">		try &#123;</span><br><span class="line">			then = x.then;</span><br><span class="line">			if(isFunction(then)) &#123;</span><br><span class="line">				then.call(x, function(value) &#123;</span><br><span class="line">					if(called) return;</span><br><span class="line">					called = true;</span><br><span class="line">					resolvePromise(promise2, value, resolve, reject);</span><br><span class="line">				&#125;, function(reason) &#123;</span><br><span class="line">					if(called) return;</span><br><span class="line">					called = true;</span><br><span class="line">					reject(reason);</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				resolve(x);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; catch(e) &#123;</span><br><span class="line">			if(called) return;</span><br><span class="line">			called = true;</span><br><span class="line">			reject(e);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		resolve(x);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * onFulfilled成功的回调，onReject失败的回调</span><br><span class="line"> */</span><br><span class="line">Promise.prototype.then = function(onFulfilled, onRejected) &#123;</span><br><span class="line">	let self = this;</span><br><span class="line">	// 当调用时没有写函数给它一个默认函数值</span><br><span class="line">	onFulfilled = isFunction(onFulfilled) ? onFulfilled : function(value) &#123;</span><br><span class="line">		return value</span><br><span class="line">	&#125;;</span><br><span class="line">	onRejected = isFunction(onRejected) ? onRejected : function(value) &#123;</span><br><span class="line">		throw value</span><br><span class="line">	&#125;;</span><br><span class="line">	let promise2;</span><br><span class="line">	if(self.status == &apos;resolved&apos;) &#123;</span><br><span class="line">		promise2 = new Promise(function(resolve, reject) &#123;</span><br><span class="line">			setTimeout(function() &#123;</span><br><span class="line">				try &#123;</span><br><span class="line">					let x = onFulfilled(self.value);</span><br><span class="line">					resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">				&#125; catch(e) &#123;</span><br><span class="line">					reject(e);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	if(self.status == &apos;rejected&apos;) &#123;</span><br><span class="line">		promise2 = new Promise(function(resolve, reject) &#123;</span><br><span class="line">			setTimeout(function() &#123;</span><br><span class="line">				try &#123;</span><br><span class="line">					let x = onRejected(self.value);</span><br><span class="line">					resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">				&#125; catch(e) &#123;</span><br><span class="line">					reject(e);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	if(self.status == &apos;pending&apos;) &#123;</span><br><span class="line">		promise2 = new Promise(function(resolve, reject) &#123;</span><br><span class="line">			self.onResolvedCallbacks.push(function(value) &#123;</span><br><span class="line">				try &#123;</span><br><span class="line">					let x = onFulfilled(value);</span><br><span class="line">					resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">				&#125; catch(e) &#123;</span><br><span class="line">					reject(e);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;);</span><br><span class="line">			self.onRejectedCallbacks.push(function(value) &#123;</span><br><span class="line">				try &#123;</span><br><span class="line">					let x = onRejected(value);</span><br><span class="line">					resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">				&#125; catch(e) &#123;</span><br><span class="line">					reject(e);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	return promise2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * catch实际上是then的一个简写,成功回调传空值即可</span><br><span class="line"> */</span><br><span class="line">Promise.prototype.catch = function(onRejected) &#123;</span><br><span class="line">	return this.then(null, onRejected);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Promise.reject(error)是和 Promise.resolve(value) 类似的静态方法，是 new Promise() 方法的快捷方式。</span><br><span class="line"> */</span><br><span class="line">Promise.resolve = function(value) &#123;</span><br><span class="line">	return new Promise(function(resolve, reject) &#123;</span><br><span class="line">		if(typeof value !== null &amp;&amp; typeof value === &apos;object&apos; &amp;&amp; isFunction(value.then)) &#123;</span><br><span class="line">			value.then();</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			resolve(value);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Promise.reject = function(reason) &#123;</span><br><span class="line">	return new Promise(function(resolve, reject) &#123;</span><br><span class="line">		reject(reason);</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * all方法，可以传入多个promise，全部执行完后会将结果以数组的方式返回，如果有一个失败就返回失败</span><br><span class="line"> */</span><br><span class="line">Promise.all = function(promises) &#123;</span><br><span class="line">	return new Promise(function(resolve, reject) &#123;</span><br><span class="line">		let result = []; // all方法最终返回的结果</span><br><span class="line">		let count = 0; // 完成的数量</span><br><span class="line">		for(let i = 0; i &lt; promises.length; i++) &#123;</span><br><span class="line">			promises[i].then(function(data) &#123;</span><br><span class="line">				result[i] = data;</span><br><span class="line">				if(++count == promises.length) &#123;</span><br><span class="line">					resolve(result);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;, function(err) &#123;</span><br><span class="line">				reject(err);</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * race方法，可以传入多个promise，返回的是第一个执行完的resolve的结果，如果有一个失败就返回失败</span><br><span class="line"> */</span><br><span class="line">Promise.race = function(promises) &#123;</span><br><span class="line">	return new Promise(function(resolve, reject) &#123;</span><br><span class="line">		for(let i = 0; i &lt; promises.length; i++) &#123;</span><br><span class="line">			promises[i].then(function(data) &#123;</span><br><span class="line">				resolve(data);</span><br><span class="line">			&#125;, function(err) &#123;</span><br><span class="line">				reject(err);</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Promise.deferred = Promise.defer = function() &#123;</span><br><span class="line">	var defer = &#123;&#125;;</span><br><span class="line">	defer.promise = new Promise(function(resolve, reject) &#123;</span><br><span class="line">		defer.resolve = resolve;</span><br><span class="line">		defer.reject = reject;</span><br><span class="line">	&#125;)</span><br><span class="line">	return defer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 一些会多次使用的复用功能函数</span><br><span class="line"> */</span><br><span class="line">function isFunction(obj) &#123;</span><br><span class="line">	return typeof obj === &quot;function&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 最后可以通过以下命令安装一个promises测试插件，用插件来测试自己实现的promise符不符合规范</span><br><span class="line"> * npm(cnpm) i -g promises-aplus-tests</span><br><span class="line"> * promises-aplus-tests Promise.js</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">module.exports = Promise;</span><br></pre></td></tr></table></figure>
<h3 id="ES6-promise"><a href="#ES6-promise" class="headerlink" title="ES6 promise"></a>ES6 promise</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br></pre></td><td class="code"><pre><span class="line">class es6Promise &#123;</span><br><span class="line">	constructor(task) &#123;</span><br><span class="line">		let self = this; //缓存this</span><br><span class="line">		self.status = &apos;pending&apos;; //默认状态为pending</span><br><span class="line">		self.value = undefined; //存放着此promise的结果</span><br><span class="line">		self.onResolvedCallbacks = []; //存放着所有成功的回调函数</span><br><span class="line">		self.onRejectedCallbacks = []; //存放着所有的失败的回调函数</span><br><span class="line"></span><br><span class="line">		// 调用resolve方法可以把promise状态变成成功态</span><br><span class="line">		function resolve(value) &#123;</span><br><span class="line">			if(value instanceof Promise) &#123;</span><br><span class="line">				return value.then(resolve, reject)</span><br><span class="line">			&#125;</span><br><span class="line">			setTimeout(() =&gt; &#123; // 异步执行所有的回调函数</span><br><span class="line">				// 如果当前状态是初始态（pending），则转成成功态</span><br><span class="line">				// 此处这个写判断的原因是因为resolved和rejected两个状态只能由pending转化而来，两者不能相互转化</span><br><span class="line">				if(self.status == &apos;pending&apos;) &#123;</span><br><span class="line">					self.value = value;</span><br><span class="line">					self.status = &apos;resolved&apos;;</span><br><span class="line">					self.onResolvedCallbacks.forEach(item =&gt; item(self.value));</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;);</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		// 调用reject方法可以把当前的promise状态变成失败态</span><br><span class="line">		function reject(value) &#123;</span><br><span class="line">			setTimeout(() =&gt; &#123;</span><br><span class="line">				if(self.status == &apos;pending&apos;) &#123;</span><br><span class="line">					self.value = value;</span><br><span class="line">					self.status = &apos;rejected&apos;;</span><br><span class="line">					self.onRejectedCallbacks.forEach(item =&gt; item(value));</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		// 立即执行传入的任务</span><br><span class="line">		try &#123;</span><br><span class="line">			task(resolve, reject);</span><br><span class="line">		&#125; catch(e) &#123;</span><br><span class="line">			reject(e);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * onFulfilled成功的回调，onReject失败的回调</span><br><span class="line">	 * 原型链方法</span><br><span class="line">	 */</span><br><span class="line">	then(onFulfilled, onRejected) &#123;</span><br><span class="line">		let self = this;</span><br><span class="line">		// 当调用时没有写函数给它一个默认函数值</span><br><span class="line">		onFulfilled = isFunction(onFulfilled) ? onFulfilled : value =&gt; value;</span><br><span class="line">		onRejected = isFunction(onRejected) ? onRejected : value =&gt; &#123;</span><br><span class="line">			throw value</span><br><span class="line">		&#125;;</span><br><span class="line">		let promise2;</span><br><span class="line">		if(self.status == &apos;resolved&apos;) &#123;</span><br><span class="line">			promise2 = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">				setTimeout(() =&gt; &#123;</span><br><span class="line">					try &#123;</span><br><span class="line">						let x = onFulfilled(self.value);</span><br><span class="line">						resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">					&#125; catch(e) &#123;</span><br><span class="line">						reject(e);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">		if(self.status == &apos;rejected&apos;) &#123;</span><br><span class="line">			promise2 = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">				setTimeout(() =&gt; &#123;</span><br><span class="line">					try &#123;</span><br><span class="line">						let x = onRejected(self.value);</span><br><span class="line">						resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">					&#125; catch(e) &#123;</span><br><span class="line">						reject(e);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">		if(self.status == &apos;pending&apos;) &#123;</span><br><span class="line">			promise2 = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">				self.onResolvedCallbacks.push(value =&gt; &#123;</span><br><span class="line">					try &#123;</span><br><span class="line">						let x = onFulfilled(value);</span><br><span class="line">						resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">					&#125; catch(e) &#123;</span><br><span class="line">						reject(e);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">				self.onRejectedCallbacks.push(value =&gt; &#123;</span><br><span class="line">					try &#123;</span><br><span class="line">						let x = onRejected(value);</span><br><span class="line">						resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">					&#125; catch(e) &#123;</span><br><span class="line">						reject(e);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">		return promise2;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * catch实际上是then的一个简写,成功回调传空值即可</span><br><span class="line">	 * 原型链方法</span><br><span class="line">	 */</span><br><span class="line">	catch(onRejected) &#123;</span><br><span class="line">		return this.then(null, onRejected);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * Promise.reject(err)是和 Promise.resolve(value) 类似的静态方法，是 new Promise() 方法的快捷方式。</span><br><span class="line">	 * 静态方法为类自己的方法，不在原型链上</span><br><span class="line">	 */</span><br><span class="line">	static resolve(value) &#123;</span><br><span class="line">		return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">			if(typeof value !== null &amp;&amp; typeof value === &apos;object&apos; &amp;&amp; isFunction(value.then)) &#123;</span><br><span class="line">				value.then();</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				resolve(value);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	static reject(err) &#123;</span><br><span class="line">		return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">			reject(err);</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * all方法，可以传入多个promise，全部执行完后会将结果以数组的方式返回，如果有一个失败就返回失败</span><br><span class="line">	 * 静态方法为类自己的方法，不在原型链上</span><br><span class="line">	 */</span><br><span class="line">	static all(promises) &#123;</span><br><span class="line">		return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">			let result = []; // all方法最终返回的结果</span><br><span class="line">			let count = 0; // 完成的数量</span><br><span class="line">			for(let i = 0; i &lt; promises.length; i++) &#123;</span><br><span class="line">				promises[i].then(data =&gt; &#123;</span><br><span class="line">					result[i] = data;</span><br><span class="line">					if(++count == promises.length) &#123;</span><br><span class="line">						resolve(result);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;, err =&gt; &#123;</span><br><span class="line">					reject(err);</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * race方法，可以传入多个promise，返回的是第一个执行完的resolve的结果，如果有一个失败就返回失败</span><br><span class="line">	 *  静态方法为类自己的方法，不在原型链上</span><br><span class="line">	 */</span><br><span class="line">	static race(promises) &#123;</span><br><span class="line">		return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">			for(let i = 0; i &lt; promises.length; i++) &#123;</span><br><span class="line">				promises[i].then(data =&gt; &#123;</span><br><span class="line">					resolve(data);</span><br><span class="line">				&#125;, err =&gt; &#123;</span><br><span class="line">					reject(err);</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * resolvePromise函数的目的是与原生Promise相兼容，可以互相调用</span><br><span class="line"> */</span><br><span class="line">function resolvePromise(promise2, x, resolve, reject) &#123;</span><br><span class="line">	// 将返回的promise不停的调用执行，直到失败或者返回一个普通的数据类型</span><br><span class="line">	if(promise2 === x) &#123;</span><br><span class="line">		return reject(new TypeError(&apos;循环引用&apos;));</span><br><span class="line">	&#125;</span><br><span class="line">	let then;</span><br><span class="line">	let called;</span><br><span class="line"></span><br><span class="line">	if(x != null &amp;&amp; ((typeof x == &apos;object&apos; || isFunction(x)))) &#123;</span><br><span class="line">		// promise</span><br><span class="line">		try &#123;</span><br><span class="line">			then = x.then;</span><br><span class="line">			if(isFunction(then)) &#123;</span><br><span class="line">				then.call(x, value =&gt; &#123;</span><br><span class="line">					if(called) return;</span><br><span class="line">					called = true;</span><br><span class="line">					resolvePromise(promise2, value, resolve, reject);</span><br><span class="line">				&#125;, reason =&gt; &#123;</span><br><span class="line">					if(called) return;</span><br><span class="line">					called = true;</span><br><span class="line">					reject(reason);</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				resolve(x);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; catch(e) &#123;</span><br><span class="line">			if(called) return;</span><br><span class="line">			called = true;</span><br><span class="line">			reject(e);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		resolve(x);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Promise.deferred = Promise.defer = () =&gt; &#123;</span><br><span class="line">	const defer = &#123;&#125;;</span><br><span class="line">	defer.promise = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">		defer.resolve = resolve;</span><br><span class="line">		defer.reject = reject;</span><br><span class="line">	&#125;)</span><br><span class="line">	return defer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 一些会多次使用的复用功能函数</span><br><span class="line"> */</span><br><span class="line">function isFunction(obj) &#123;</span><br><span class="line">	return typeof obj === &quot;function&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 最后可以通过以下命令安装一个promises测试插件，用插件来测试自己实现的promise符不符合规范</span><br><span class="line"> * npm(cnpm) i -g promises-aplus-tests</span><br><span class="line"> * promises-aplus-tests es6Promise.js</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">module.exports = es6Promise;</span><br></pre></td></tr></table></figure>
<h3 id="使用promise手动封装ajax函数"><a href="#使用promise手动封装ajax函数" class="headerlink" title="使用promise手动封装ajax函数"></a>使用promise手动封装ajax函数</h3><blockquote>
<p>跨浏览器实现Ajax兼容</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var createXMLHttpRequest = function () &#123;</span><br><span class="line">  if ( window.XMLHttpRequest ) &#123;</span><br><span class="line">      return new XMLHttpRequest();</span><br><span class="line">  &#125;</span><br><span class="line">  else if ( window.ActiveXObject ) &#123;</span><br><span class="line">      return new ActiveXObject(&apos;Microsoft.XMLHttp&apos;);</span><br><span class="line">  &#125;</span><br><span class="line">  else &#123;</span><br><span class="line">      return;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Ajax的xhr对象有如下常用API</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">onloadstart                     开始send触发</span><br><span class="line">onprogress                      从服务器上下载数据每50ms触发一次,判断进度</span><br><span class="line">onload                          得到响应</span><br><span class="line">onerror                         服务器异常</span><br><span class="line">open                            xhr.open(&apos;GET&apos;, url, true)  请求方式,请求url, true(默认)异步请求 </span><br><span class="line">onloadend                       请求结束，无论成功失败</span><br><span class="line">onreadystatechange              xhr.readyState改变使触发</span><br><span class="line">onabort                         调用xhr.abort时触发</span><br><span class="line">ontimeout                       超时触发</span><br><span class="line">setRequestHeader                设置RequestHeader，eg：xhr.setRequestHeader(&apos;Accept&apos;,&apos;application/json&apos;);</span><br><span class="line">                                xhr.setRequestHeader(&quot;Content-type&quot;, &quot;application/x-www-form-urlencoded&quot;);</span><br><span class="line">xhr.getAllResponseHeaders()     返回全部头信息,string</span><br><span class="line">getResponseHeader               获取Response头信息，eg：xhr.getResponseHeader(&apos;date&apos;);</span><br><span class="line">                                xhr.getResponseHeader(&apos;content-type&apos;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>readyState上面都是静态函数。而readyState表示了请求的状态:</p>
</blockquote>
<ul>
<li>value=0,open()方法还未被调用</li>
<li>value=1,open()调用,send()方法还未被调用</li>
<li>value=2,send()方法已经被调用，响应头和响应状态已经返回</li>
<li>value=3,响应体下载中，responseText中已经获取了部分数据</li>
<li>value=4,请求完成，整个请求过程已经完毕。</li>
</ul>
<h4 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">function getJSON (url) &#123;</span><br><span class="line">    return new Promise( (resolve, reject) =&gt; &#123;</span><br><span class="line">        var xhr = new XMLHttpRequest()</span><br><span class="line">        xhr.open(&apos;GET&apos;, url, true)</span><br><span class="line">        xhr.onreadystatechange = function () &#123;</span><br><span class="line">            //if (xhr.readyState == 4 &amp;&amp; (xhr.status == 200 || xhr.status == 304))</span><br><span class="line">            if (xhr.readyState === 4) &#123;</span><br><span class="line">                if (xhr.status === 200) &#123;</span><br><span class="line">                    resolve(this.responseText, this)</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    var resJson = &#123; code: this.status, response: this.response &#125;</span><br><span class="line">                    reject(resJson, this)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        xhr.send()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">function postJSON(url, data) &#123;</span><br><span class="line">    return new Promise( (resolve, reject) =&gt; &#123;</span><br><span class="line">        var xhr = new XMLHttpRequest()</span><br><span class="line">        xhr.open(&quot;POST&quot;, url, true)</span><br><span class="line">        xhr.setRequestHeader(&quot;Content-type&quot;, &quot;application/x-www-form-urlencoded&quot;);</span><br><span class="line">        xhr.onreadystatechange = function () &#123;</span><br><span class="line">             //if (xhr.readyState == 4 &amp;&amp; (xhr.status == 200 || xhr.status == 304))</span><br><span class="line">            if (xhr.readyState === 4) &#123;</span><br><span class="line">                if (xhr.status === 200) &#123;</span><br><span class="line">                    resolve(JSON.parse(this.responseText), this)</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    var resJson = &#123; code: this.status, response: this.response &#125;</span><br><span class="line">                    reject(resJson, this)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        xhr.send(JSON.stringify(data))</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">// ajax函数的默认参数</span><br><span class="line">var ajaxOptions = &#123;</span><br><span class="line">    url: &apos;#&apos;,</span><br><span class="line">    method: &apos;GET&apos;,</span><br><span class="line">    async: true,</span><br><span class="line">    timeout: 0,</span><br><span class="line">    data: null,</span><br><span class="line">    dataType: &apos;text&apos;,</span><br><span class="line">    headers: &#123;&#125;,</span><br><span class="line">    onprogress: function () &#123; &#125;,</span><br><span class="line">    onuploadprogress: function () &#123; &#125;,</span><br><span class="line">    xhr: null</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * ajax函数，返回一个promise对象</span><br><span class="line"> * @param &#123;Object&#125; optionsOverride 参数设置，支持的参数如下</span><br><span class="line"> *   url:                     url地址，默认&quot;#&quot;</span><br><span class="line"> *   method:                  请求方法，仅支持GET,POST,默认GET</span><br><span class="line"> *   async:                   是否异步，默认true</span><br><span class="line"> *   timeout:                 请求时限，超时将在promise中调用reject函数</span><br><span class="line"> *   data:                    发送的数据，该函数不支持处理数据，将会直接发送</span><br><span class="line"> *   dataType:                接受的数据的类型，默认为text</span><br><span class="line"> *   headers:                 一个对象，包含请求头信息</span><br><span class="line"> *   onprogress:              处理onprogress的函数</span><br><span class="line"> *   ouploadprogress:         处理.upload.onprogress的函数</span><br><span class="line"> *   xhr:                     允许在函数外部创建xhr对象传入，但必须不能是使用过的</span><br><span class="line"> </span><br><span class="line"> * @return &#123;Promise&#125; </span><br><span class="line"> *   该函数注册xhr.onloadend回调函数，判断xhr.status是否属于 [200,300)&amp;&amp;304 ，</span><br><span class="line"> *   如果属于则promise引发resolve状态，允许拿到xhr对象</span><br><span class="line"> *   如果不属于，或已经引发了ontimeout,onabort,则引发reject状态，允许拿到xhr对象</span><br><span class="line"> * </span><br><span class="line"> * 关于reject</span><br><span class="line"> *   返回一个对象，包含</span><br><span class="line"> *     errorType:错误类型，</span><br><span class="line"> *     abort_error:   xhr对象调用abort函数</span><br><span class="line"> *     timeout_error: 请求超时</span><br><span class="line"> *     onerror:       xhr对象触发了onerror事件</span><br><span class="line"> *     send_error:    发送请求出现错误</span><br><span class="line"> *     status_error:  响应状态不属于 [200,300)&amp;&amp;304</span><br><span class="line"> */</span><br><span class="line">function ajax(optionsOverride) &#123;</span><br><span class="line">    // 将传入的参数与默认设置合并</span><br><span class="line">    var options = &#123;&#125;;</span><br><span class="line">    for (var k in ajaxOptions) &#123;</span><br><span class="line">        options[k] = optionsOverride[k] || ajaxOptions[k];</span><br><span class="line">    &#125;</span><br><span class="line">    options.async = options.async === false ? false : true;</span><br><span class="line">    var xhr = options.xhr = options.xhr || new XMLHttpRequest();</span><br><span class="line"></span><br><span class="line">    return new Promise(function (resolve, reject) &#123;</span><br><span class="line">        xhr.open(options.method, options.url, options.async);</span><br><span class="line">        xhr.timeout = options.timeout;</span><br><span class="line"></span><br><span class="line">        //设置请求头</span><br><span class="line">        for (var k in options.headers) &#123;</span><br><span class="line">            xhr.setRuquestHeader(k, options.headers[k]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // 注册xhr对象事件</span><br><span class="line">        xhr.onprogress = options.onprogress;</span><br><span class="line">        xhr.upload.onprogress = options.onuploadprogress;</span><br><span class="line">        xhr.responseType = options.dataType;</span><br><span class="line"></span><br><span class="line">        xhr.onabort = function () &#123;</span><br><span class="line">            reject(new Error(&#123;</span><br><span class="line">                errorType: &apos;abort_error&apos;,</span><br><span class="line">                xhr: xhr</span><br><span class="line">            &#125;));</span><br><span class="line">        &#125;</span><br><span class="line">        xhr.ontimeout = function () &#123;</span><br><span class="line">            reject(&#123;</span><br><span class="line">                errorType: &apos;timeout_error&apos;,</span><br><span class="line">                xhr: xhr</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        xhr.onerror = function () &#123;</span><br><span class="line">            reject(&#123;</span><br><span class="line">                errorType: &apos;onerror&apos;,</span><br><span class="line">                xhr: xhr</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        xhr.onloadend = function () &#123;</span><br><span class="line">            if ((xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) || xhr.status === 304)</span><br><span class="line">                resolve(xhr);</span><br><span class="line">            else&#123;</span><br><span class="line">	                reject(&#123;</span><br><span class="line">	                    errorType: &apos;status_error&apos;,</span><br><span class="line">	                    xhr: xhr</span><br><span class="line">	                &#125;)</span><br><span class="line">               &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            xhr.send(options.data);</span><br><span class="line">        &#125;</span><br><span class="line">        catch (e) &#123;</span><br><span class="line">            reject(&#123;</span><br><span class="line">                errorType: &apos;send_error&apos;,</span><br><span class="line">                error: e</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="二分查找-【二分查找也称折半查找-，时间复杂度：O-log2n-】"><a href="#二分查找-【二分查找也称折半查找-，时间复杂度：O-log2n-】" class="headerlink" title="二分查找  【二分查找也称折半查找 ，时间复杂度：O(log2n)】"></a>二分查找  【二分查找也称折半查找 ，时间复杂度：O(log2n)】</h3><blockquote>
<p>非递归算法</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">function binary_search(arr,key)&#123;</span><br><span class="line">  var low=0,</span><br><span class="line">  high=arr.length-1;</span><br><span class="line">  while(low&lt;=high)&#123;</span><br><span class="line">     var mid=parseInt((high+low)/2);</span><br><span class="line">     if(key==arr[mid])&#123;</span><br><span class="line">        return mid;</span><br><span class="line">     &#125;else if(key&gt;arr[mid])&#123;</span><br><span class="line">        low=mid+1;</span><br><span class="line">     &#125;else if(key&lt;arr[mid])&#123;</span><br><span class="line">        high=mid-1;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">      return -1;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">var arr=[1,2,3,4,5,6,7,8,9,10,11,23,44,86];</span><br><span class="line">var result=binary_search(arr,10);</span><br><span class="line">alert(result); // 9 返回目标元素的索引值</span><br></pre></td></tr></table></figure>
<blockquote>
<p>递归算法</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">function binary_search(arr,low,high,key)&#123;</span><br><span class="line">  if(low&gt;high)&#123;</span><br><span class="line">    return -1;</span><br><span class="line">  &#125;</span><br><span class="line">  var mid=parseInt((high+low)/2);</span><br><span class="line">  if(arr[mid]==key)&#123;</span><br><span class="line">    return mid;</span><br><span class="line">  &#125;else if(arr[mid]&gt;key)&#123;</span><br><span class="line">    high=mid-1;</span><br><span class="line">    return binary_search(arr,low,high,key);</span><br><span class="line">  &#125;else if(arr[mid]&lt;key)&#123;</span><br><span class="line">    low=mid+1;</span><br><span class="line">    return binary_search(arr,low,high,key);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">var arr=[1,2,3,4,5,6,7,8,9,10,11,23,44,86];</span><br><span class="line">var result=binary_search(arr,0,13,10);</span><br><span class="line">alert(result); // 9 返回目标元素的索引值</span><br></pre></td></tr></table></figure>
<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><blockquote>
<p>冒泡排序</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function bubbleSort(arr) &#123;</span><br><span class="line">    var len = arr.length;</span><br><span class="line">    for (var i = 0; i &lt; len - 1; i++) &#123;</span><br><span class="line">        for (var j = i+1; j &lt; len -1; j++) &#123;</span><br><span class="line">            arr[i] &gt; arr[j] ? [arr[i],arr[j]]= [arr[j],arr[i]]:null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return arr;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">bubbleSort([1,2,4,7,2,8,0,9,11,32,17])</span><br><span class="line">           [0, 1, 2, 2, 4, 7, 8, 9, 11, 32, 17]</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function bubble_sort(arr)&#123;</span><br><span class="line">  for(var i=0;i&lt;arr.length-1;i++)&#123;</span><br><span class="line">    for(var j=0;j&lt;arr.length-i-1;j++)&#123;</span><br><span class="line">      if(arr[j]&gt;arr[j+1])&#123;</span><br><span class="line">        var swap=arr[j];</span><br><span class="line">        arr[j]=arr[j+1];</span><br><span class="line">        arr[j+1]=swap;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var arr=[3,1,5,7,2,4,9,6,10,8];</span><br><span class="line">bubble_sort(arr);</span><br><span class="line">console.log(arr);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>快速排序</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">function quick_sort(arr)&#123;</span><br><span class="line">  if(arr.length&lt;=1)&#123;</span><br><span class="line">    return arr;</span><br><span class="line">  &#125;</span><br><span class="line">  var pivotIndex=Math.floor(arr.length/2);</span><br><span class="line">  var pivot=arr.splice(pivotIndex,1)[0];</span><br><span class="line"></span><br><span class="line">  var left=[];</span><br><span class="line">  var right=[];</span><br><span class="line">  for(var i=0;i&lt;arr.length;i++)&#123;</span><br><span class="line">    if(arr[i]&lt;pivot)&#123;</span><br><span class="line">      left.push(arr[i]);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">      right.push(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return quick_sort(left).concat([pivot],quick_sort(right));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var arr=[5,6,2,1,3,8,7,1,2,3,4,7];</span><br><span class="line">console.log(quick_sort(arr));</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function qSort(arr) &#123;</span><br><span class="line">      if (arr.length==0) &#123;</span><br><span class="line">          return [];</span><br><span class="line">      &#125;</span><br><span class="line">      var left = [];</span><br><span class="line">      var right = [];</span><br><span class="line">      var pivot = arr[0];</span><br><span class="line">      for (var i =1; i &lt;arr.length; i++) &#123; // 注意这里的起始值，因为有一个作为flag了</span><br><span class="line">         if (arr[i] &lt; pivot) &#123;</span><br><span class="line">               left.push(arr[i]);</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">              right.push(arr[i]);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      return qSort(left).concat(pivot, qSort(right));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="当我们-new-一个类的时候-都发生了什么"><a href="#当我们-new-一个类的时候-都发生了什么" class="headerlink" title="当我们 new 一个类的时候 都发生了什么"></a>当我们 new 一个类的时候 都发生了什么</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * new2 new关键字的代码实现演示</span><br><span class="line"> * @param &#123;function&#125; func 被new的类 (构造函数)</span><br><span class="line"> */</span><br><span class="line">function new2(func) &#123;</span><br><span class="line">    // 创建了一个实例对象 o，并且这个对象__proto__指向func这个类的原型对象 </span><br><span class="line">    let o = Object.create(func.prototype); </span><br><span class="line">    // (在构造函数中this指向当前实例)让这个类作为普通函数值行 并且里面this为实例对象 </span><br><span class="line">    let k = func.call(o);</span><br><span class="line">    // 最后再将实例对象返回 如果你在类中显示指定返回值k，</span><br><span class="line">    // 注意如果返回的是引用类型则将默认返回的实例对象o替代掉</span><br><span class="line">    return typeof k === &apos;object&apos; ? k : o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 实验</span><br><span class="line">functionM() &#123; // 即将被new的类</span><br><span class="line">    this.name = &apos;liwenli&apos;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let m = new2(M); // 等价于 new M 这里只是模拟</span><br><span class="line">console.log(m instanceof M); // instanceof 检测实例</span><br><span class="line">console.log(m instanceof Object);</span><br><span class="line">console.log(m.__proto__.constructor === M);</span><br></pre></td></tr></table></figure>
<h3 id="new操作符的工作原理"><a href="#new操作符的工作原理" class="headerlink" title="new操作符的工作原理"></a>new操作符的工作原理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">废话不多说，直接上代码</span><br><span class="line">var newObj = function(func)&#123;</span><br><span class="line">    var t = &#123;&#125;</span><br><span class="line">    t.prototype = func.prototype</span><br><span class="line">    var o = t</span><br><span class="line">    var k =func.call(o);</span><br><span class="line">    if(typeof k === &apos;object&apos;)&#123;</span><br><span class="line">        return k;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        return o;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">var parent1 = newObj(Parent)等价于new操作</span><br><span class="line"></span><br><span class="line">1.一个新对象被创建，它继承自func.prototype。</span><br><span class="line">2.构造函数func 被执行，执行的时候，相应的参数会被传入，同时上下文（this） 会被指定为这个新实例。</span><br><span class="line">3.如果构造函数返回了一个新对象，那么这个对象会取代整个new出来的结果，如果构造函数没有返回对象，</span><br><span class="line">那么new出来的结果为步骤1创建的对象。</span><br></pre></td></tr></table></figure>
<h3 id="Object-create-兼容实现"><a href="#Object-create-兼容实现" class="headerlink" title="Object.create 兼容实现"></a>Object.create 兼容实现</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">let obj1 = &#123;id: 1&#125;;</span><br><span class="line">        Object._create = (o) =&gt; &#123;</span><br><span class="line">            let Fn = function() &#123;&#125;; // 临时的构造函数</span><br><span class="line">            Fn.prototype = o;</span><br><span class="line">            return new Fn;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        let obj2 = Object._create(obj1);</span><br><span class="line">        console.log(obj2.__proto__ === obj1); // true</span><br><span class="line">        console.log(obj2.id); // 1</span><br><span class="line"></span><br><span class="line">        // 原生的Object.create</span><br><span class="line">        let obj3 = Object.create(obj1);</span><br><span class="line">        console.log(obj3.__proto__ === obj1); // true</span><br><span class="line">        console.log(obj3.id); // 1</span><br></pre></td></tr></table></figure>
<h3 id="curry-将多参数函数转换为接收单一参数的函数"><a href="#curry-将多参数函数转换为接收单一参数的函数" class="headerlink" title="curry 将多参数函数转换为接收单一参数的函数"></a>curry 将多参数函数转换为接收单一参数的函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">let fn = function(a, b, c) &#123; // 多参数函数</span><br><span class="line">           return a + b + c;</span><br><span class="line">        &#125;</span><br><span class="line">        function curry(fn) &#123;</span><br><span class="line">            let args = []; // 收集参数</span><br><span class="line">            let len = fn.length;</span><br><span class="line">            returnfunctionfe() &#123;</span><br><span class="line">                args = args.concat([].slice.call(arguments, 0));</span><br><span class="line">                if (args.length === len) &#123;</span><br><span class="line">                    return fn.apply(null, args);</span><br><span class="line">                &#125;</span><br><span class="line">                return fe;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        console.log(curry(fn)(1)(2)(3)); // 6</span><br></pre></td></tr></table></figure>
<h3 id="函数节流"><a href="#函数节流" class="headerlink" title="函数节流"></a>函数节流</h3><blockquote>
<p>throttle 策略的电梯。保证如果电梯第一个人进来后，50毫秒后准时运送一次，不等待。如果没有人，则待机。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">let throttle = (fn, delay = 50) =&gt; &#123; // 节流 控制执行间隔时间 防止频繁触发 scroll resize mousemove</span><br><span class="line">            let stattime = 0;</span><br><span class="line">            returnfunction (...args) &#123;</span><br><span class="line">                let curTime = new Date();</span><br><span class="line">                if (curTime - stattime &gt;= delay) &#123;</span><br><span class="line">                    fn.apply(this, args);</span><br><span class="line">                    stattime = curTime;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<h3 id="防抖动"><a href="#防抖动" class="headerlink" title="防抖动"></a>防抖动</h3><blockquote>
<p>debounce 策略的电梯。如果电梯里有人进来，等待50毫秒。如果又人进来，50毫秒等待重新计时，直到50毫秒超时，开始运送。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let debounce = (fn, time = 50) =&gt; &#123; // 防抖动 控制空闲时间 用户输入频繁</span><br><span class="line">            let timer;</span><br><span class="line">            returnfunction (...args) &#123;</span><br><span class="line">                let that = this;</span><br><span class="line">                clearTimeout(timer);</span><br><span class="line">                timer = setTimeout(fn.bind(that, ...args), time);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Function的bind实现"><a href="#Function的bind实现" class="headerlink" title="Function的bind实现"></a>Function的bind实现</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Function.prototype._bind = function(context) &#123;</span><br><span class="line">    let func = this;</span><br><span class="line">    let params = [].slice.call(arguments, 1);</span><br><span class="line">    returnfunction() &#123;</span><br><span class="line">        params = params.concat([].slice.call(arguments, 0));</span><br><span class="line">        func.apply(context, params);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let obj = &#123;id: 24&#125;</span><br><span class="line"></span><br><span class="line">function fn1(a) &#123;</span><br><span class="line">    console.log(this, arguments);</span><br><span class="line">&#125;</span><br><span class="line">let foo = fn1._bind(obj, obj.id);</span><br></pre></td></tr></table></figure>
<h3 id="函数组合串联compose（koa-reduce中间件）"><a href="#函数组合串联compose（koa-reduce中间件）" class="headerlink" title="函数组合串联compose（koa reduce中间件）"></a>函数组合串联compose（koa reduce中间件）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 组合串联</span><br><span class="line">let fn1 = (a) =&gt; a + 1;</span><br><span class="line">let fn2 = (b) =&gt; b + 2;</span><br><span class="line">let fn3 = (c) =&gt; c + 3;</span><br><span class="line"></span><br><span class="line">let funs = [fn1, fn2, fn3];</span><br><span class="line"></span><br><span class="line">let compose = (func) =&gt; &#123;</span><br><span class="line">    return arg =&gt; func.reduceRight((composed, fn) =&gt; fn(composed), arg);</span><br><span class="line">&#125;</span><br><span class="line">console.log(compose(funs)(100)); // 相当于fn1(fn2(fn3(100)))</span><br></pre></td></tr></table></figure>
<h3 id="co函数"><a href="#co函数" class="headerlink" title="co函数"></a>co函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">function* fn(a) &#123;</span><br><span class="line">  a = yield a;</span><br><span class="line">  let b = yield 2;</span><br><span class="line">  let c = yield 3;</span><br><span class="line">  return a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function co(fn, ...args) &#123;</span><br><span class="line">  let g = fn(...args);</span><br><span class="line">  return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    function next(lastValue) &#123;</span><br><span class="line">        let &#123; value, done &#125; = g.next(lastValue);</span><br><span class="line">        if (done) &#123;</span><br><span class="line">          resolve(value);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">         if (value instanceof Promise) &#123;</span><br><span class="line">           value.then(next, (val) =&gt; reject(val));</span><br><span class="line">         &#125; else &#123;</span><br><span class="line">           next(value)</span><br><span class="line">         &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    next();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">co(fn, 100).then(value =&gt; &#123;</span><br><span class="line">    console.log(value); // 105</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="如何主动中止Promise调用链"><a href="#如何主动中止Promise调用链" class="headerlink" title="如何主动中止Promise调用链"></a>如何主动中止Promise调用链</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">const p1 = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">  setTimeout(() =&gt; &#123; // 异步操作</span><br><span class="line">      resolve(&apos;start&apos;)</span><br><span class="line">  &#125;, 1000);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">p1.then((result) =&gt; &#123;</span><br><span class="line">   console.log(&apos;a&apos;, result); </span><br><span class="line">   return Promise.reject(&apos;中断后续调用&apos;); // 此时rejected的状态将直接跳到catch里，剩下的调用不会再继续</span><br><span class="line">&#125;).then(result =&gt; &#123;</span><br><span class="line">   console.log(&apos;b&apos;, result);</span><br><span class="line">&#125;).then(result =&gt; &#123;</span><br><span class="line">   console.log(&apos;c&apos;, result);</span><br><span class="line">&#125;).catch(err =&gt; &#123;</span><br><span class="line">   console.log(err);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// a start</span><br><span class="line">// 中断后续调用</span><br></pre></td></tr></table></figure>
<h3 id="window-requestAnimationFrame兼容性处理"><a href="#window-requestAnimationFrame兼容性处理" class="headerlink" title="window.requestAnimationFrame兼容性处理"></a>window.requestAnimationFrame兼容性处理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">window._requestAnimationFrame = (function()&#123;</span><br><span class="line">  return  window.requestAnimationFrame       ||</span><br><span class="line">          window.webkitRequestAnimationFrame ||</span><br><span class="line">          window.mozRequestAnimationFrame    ||</span><br><span class="line">          function(callback)&#123;</span><br><span class="line">            window.setTimeout(callback, 1000 / 60);</span><br><span class="line">          &#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<h3 id="字符串是否符合回文规则"><a href="#字符串是否符合回文规则" class="headerlink" title="字符串是否符合回文规则"></a>字符串是否符合回文规则</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">let str = &apos;My age is 0, 0 si ega ym.&apos;;</span><br><span class="line"></span><br><span class="line">方法一</span><br><span class="line">function palindrome(params) &#123;</span><br><span class="line">  params = params.replace(/[\W\s_]/ig, &apos;&apos;);</span><br><span class="line"> return params.toLowerCase()  === params.split(&apos;&apos;).reverse().join(&apos;&apos;).toLowerCase();</span><br><span class="line">&#125;</span><br><span class="line">console.log(palindrome(str));</span><br><span class="line"></span><br><span class="line">方法二</span><br><span class="line">function palindrome(params) &#123;</span><br><span class="line">  params = params.replace(/[\W\s_]/ig, &apos;&apos;).toLowerCase();</span><br><span class="line">  for (var i = 0, j = params.length-1; i&lt;j; i++, j--) &#123;</span><br><span class="line">    if (params[i] !== params[j]) &#123;</span><br><span class="line">      returnfalse;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  returntrue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="解构-将-destructuringArray-1-2-3-4-“-a-b-c-”-gt-a-1-b-2-c-4"><a href="#解构-将-destructuringArray-1-2-3-4-“-a-b-c-”-gt-a-1-b-2-c-4" class="headerlink" title="解构:将 destructuringArray([1, [2, 3], 4], “[a, [b], c]”) =&gt; {a: 1, b: 2, c: 4}"></a>解构:将 destructuringArray([1, [2, 3], 4], “[a, [b], c]”) =&gt; {a: 1, b: 2, c: 4}</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// 将 destructuringArray([1, [2, 3], 4], &quot;[a, [b], c]&quot;) =&gt; &#123;a: 1, b: 2, c: 4&#125;</span><br><span class="line">const targetArray = [1, [2, 3], 4];</span><br><span class="line">const formater = &quot;[a, [b], c]&quot;;</span><br><span class="line"></span><br><span class="line">const destructuringArray = (values, keys) =&gt; &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    const obj = &#123;&#125;;</span><br><span class="line">    if (typeof keys === &apos;string&apos;) &#123;</span><br><span class="line">      keys = JSON.parse(keys.replace(/\w+/g, &apos;&quot;$&amp;&quot;&apos;));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    const iterate = (values, keys) =&gt;</span><br><span class="line">      keys.forEach((key, i) =&gt; &#123;</span><br><span class="line">        if(Array.isArray(key)) iterate(values[i], key)</span><br><span class="line">        else obj[key] = values[i]</span><br><span class="line">      &#125;)</span><br><span class="line">      </span><br><span class="line">    iterate(values, keys)</span><br><span class="line">    </span><br><span class="line">    return obj;</span><br><span class="line">  &#125; catch (e) &#123;</span><br><span class="line">    console.error(e.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="数组展平"><a href="#数组展平" class="headerlink" title="数组展平"></a>数组展平</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">将[[1, 2], 3, [[[4], 5]]] 展平为 [1, 2, 3, 4, 5]</span><br><span class="line"></span><br><span class="line">let arr = [[1, 2], 3, [[[4], 5]]]; // 数组展平</span><br><span class="line">function flatten(arr) &#123;</span><br><span class="line">    return [].concat(</span><br><span class="line">        ...arr.map(x =&gt; Array.isArray(x) ? flatten(x) : x)</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="找出数组中重复出现过的元素"><a href="#找出数组中重复出现过的元素" class="headerlink" title="找出数组中重复出现过的元素"></a>找出数组中重复出现过的元素</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// 例如：[1，2，4，4，3，3，1，5，3]</span><br><span class="line">// 输出：[1，3，4]</span><br><span class="line">let arr = [1, 2, 4, 4, 3, 3, 1, 5, 3];</span><br><span class="line"></span><br><span class="line">// 方法一</span><br><span class="line">function repeat1(arr)&#123;</span><br><span class="line">	var result = [], map = &#123;&#125;;</span><br><span class="line">	arr.map(function(num)&#123;</span><br><span class="line">	if(map[num] === 1) result.push(num); // 等于1说明之前出现过一次 这次重复出现了</span><br><span class="line">		map[num] = (map[num] || 0) + 1; // 微妙之处 开始第一次出现无值 记为 0 + 1 = 1 下一次从1开始累加</span><br><span class="line">	&#125;);</span><br><span class="line">	return result;</span><br><span class="line">&#125;</span><br><span class="line">console.log(repeat1(arr));</span><br><span class="line"></span><br><span class="line">// 方法二</span><br><span class="line"></span><br><span class="line">function repeat(arr) &#123;</span><br><span class="line">    let result = arr.filter((x, i, self) =&gt; &#123;</span><br><span class="line">        return self.indexOf(x) === i &amp;&amp; self.lastIndexOf(x) !== i</span><br><span class="line">    &#125;); // </span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br><span class="line">console.log(repeat(arr));</span><br></pre></td></tr></table></figure>
<h3 id="将数组中按照数字重复出现的次数进行排序"><a href="#将数组中按照数字重复出现的次数进行排序" class="headerlink" title="将数组中按照数字重复出现的次数进行排序"></a>将数组中按照数字重复出现的次数进行排序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">// 如果次数相同 则按照值排序 比如  2, 2, 2和 1, 1, 1  应排序为 [1, 1, 1, 2, 2, 2]</span><br><span class="line">// 比如 [1,2,1,2,1,3,4,5,4,5,5,2,2] =&gt; [3, 4, 4, 1, 1, 1, 5, 5, 5, 2, 2, 2, 2]</span><br><span class="line"></span><br><span class="line">let arr = [9, 7, 7, 1, 2, 1, 2, 1, 3, 4, 5, 4, 5, 5, 2, 2];</span><br><span class="line">function sortArray(arr) &#123;</span><br><span class="line">    let obj = &#123;&#125;;</span><br><span class="line">    let newArr = [];</span><br><span class="line">    for(let i = 0; i &lt; arr.length; i++) &#123;</span><br><span class="line">      let cur = arr[i];</span><br><span class="line">      if(obj[cur])&#123;</span><br><span class="line">        obj[cur].push(cur);</span><br><span class="line">        continue;</span><br><span class="line">      &#125;</span><br><span class="line">      obj[cur] = [cur];</span><br><span class="line">    &#125;</span><br><span class="line">    for(let k in obj) &#123;</span><br><span class="line">      if(obj.hasOwnProperty(k)) &#123;</span><br><span class="line">        newArr.push(obj[k])</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    newArr.sort((a, b) =&gt; &#123;</span><br><span class="line">      if(a.length === b.length)&#123;</span><br><span class="line">        return a[0] - b[0];</span><br><span class="line">      &#125;</span><br><span class="line">        return a.length - b.length;</span><br><span class="line">    &#125;);</span><br><span class="line">    newArr = newArr.reduce((prev, cur) =&gt; prev.concat(cur));</span><br><span class="line">    return newArr;</span><br><span class="line">  &#125;</span><br><span class="line">  console.log(sortArray(arr)); // [ 3, 9, 4, 4, 7, 7, 1, 1, 1, 5, 5, 5, 2, 2, 2, 2 ]</span><br></pre></td></tr></table></figure>
<h3 id="移动端关闭虚拟键盘"><a href="#移动端关闭虚拟键盘" class="headerlink" title="移动端关闭虚拟键盘"></a>移动端关闭虚拟键盘</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.activeElement.blur();</span><br></pre></td></tr></table></figure>
<h3 id="解决setInterval在浏览器切换中的问题"><a href="#解决setInterval在浏览器切换中的问题" class="headerlink" title="解决setInterval在浏览器切换中的问题"></a>解决setInterval在浏览器切换中的问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">document.onvisibilitychange=function()&#123;</span><br><span class="line">  if(document.visibilityState==&quot;visible&quot;)&#123;</span><br><span class="line">      timer=setInterval(slidemove, 1000);</span><br><span class="line">  &#125;else&#123;</span><br><span class="line">      clearInterval(timer);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Promise-透传"><a href="#Promise-透传" class="headerlink" title="Promise 透传"></a>Promise 透传</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Promise.resolve(1).then(2).then((a)=&gt;console.log(a))</span><br><span class="line"> 1</span><br><span class="line">Promise &#123;&lt;resolved&gt;: undefined&#125;</span><br></pre></td></tr></table></figure>
<h3 id="不用循环，创建一个长度为-100-的数组，并且每个元素的值等于它的下标"><a href="#不用循环，创建一个长度为-100-的数组，并且每个元素的值等于它的下标" class="headerlink" title="不用循环，创建一个长度为 100 的数组，并且每个元素的值等于它的下标"></a>不用循环，创建一个长度为 100 的数组，并且每个元素的值等于它的下标</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">es6版：</span><br><span class="line">Array.from(Array(100).keys()) </span><br><span class="line">或者</span><br><span class="line">[...Array(100).keys()]</span><br><span class="line"></span><br><span class="line">Array(100).fill(0).map((t,i)=&gt;i)</span><br></pre></td></tr></table></figure>
<h3 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">（1）函数体内的this对象，就是定义时所在的对象，而不是使用时所在的对象。</span><br><span class="line"></span><br><span class="line">（2）不可以当作构造函数，也就是说，不可以使用new命令，否则会抛出一个错误。</span><br><span class="line"></span><br><span class="line">（3）不可以使用arguments对象，该对象在函数体内不存在。如果要用，可以用 rest 参数代替。</span><br><span class="line"></span><br><span class="line">（4）不可以使用yield命令，因此箭头函数不能用作 Generator 函数。</span><br><span class="line"></span><br><span class="line">上面四点中，第一点尤其值得注意。this对象的指向是可变的，但是在箭头函数中，它是固定的。</span><br><span class="line"></span><br><span class="line">function foo() &#123;</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">    console.log(&apos;id:&apos;, this.id);</span><br><span class="line">  &#125;, 100);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var id = 21;</span><br><span class="line"></span><br><span class="line">foo.call(&#123; id: 42 &#125;);</span><br><span class="line">// id: 42</span><br></pre></td></tr></table></figure>
<h3 id="异步加载的区别"><a href="#异步加载的区别" class="headerlink" title="异步加载的区别"></a>异步加载的区别</h3><ul>
<li>defer是在HTML解析完之后才会执行，如果是多个，按照加载的顺序依次执行</li>
<li>async是在加载完之后立即执行，如果是多个，执行顺序和加载顺序无关<br>async和defer<br><img src="/2015/01/01/JS原生常用API大全/640.webp" alt></li>
</ul>
<h3 id="html-触底的条件是："><a href="#html-触底的条件是：" class="headerlink" title="html 触底的条件是："></a>html 触底的条件是：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">document.documentElement.scrollHeight ===</span><br><span class="line">document.documentElement.clientHeight + document.documentElement.scrollTop</span><br></pre></td></tr></table></figure>
<h3 id="雅虎十四条优化"><a href="#雅虎十四条优化" class="headerlink" title="雅虎十四条优化"></a>雅虎十四条优化</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1. 尽可能的减少 HTTP 的请求数	content</span><br><span class="line">2. 使用 CDN（Content Delivery Network）	server</span><br><span class="line">3. 添加 Expires 头(或者 Cache-control )	server</span><br><span class="line">4. Gzip 组件	server</span><br><span class="line">5. 将 CSS 样式放在页面的上方	css</span><br><span class="line">6. 将脚本移动到底部（包括内联的）	javascript</span><br><span class="line">7. 避免使用 CSS 中的 Expressions	css</span><br><span class="line">8. 将 JavaScript 和 CSS 独立成外部文件	javascript css</span><br><span class="line">9. 减少 DNS 查询	content</span><br><span class="line">10. 压缩 JavaScript 和 CSS (包括内联的)	javascript css</span><br><span class="line">11. 避免重定向	server</span><br><span class="line">12. 移除重复的脚本	javascript</span><br><span class="line">13. 配置实体标签（ETags）	css</span><br><span class="line">14. 使 AJAX 缓存</span><br><span class="line">15. DNS预读取 &lt;link rel=&quot;dns-prefetch&quot; href=&quot;https://data.dadaabc.com/&quot;&gt;</span><br><span class="line">16. 多域名分发静态资源   同域下浏览器能并发的请求有限，为了增加并发，尤其是一些静态资源上，可以使用多个域名。</span><br><span class="line">17. 最小化重排和重绘</span><br><span class="line">18. 函数防抖和函数节流</span><br></pre></td></tr></table></figure>
<h3 id="微任务有两种-nextTick和then-那么这两个谁快呢？"><a href="#微任务有两种-nextTick和then-那么这两个谁快呢？" class="headerlink" title="微任务有两种 nextTick和then 那么这两个谁快呢？"></a>微任务有两种 nextTick和then 那么这两个谁快呢？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Promise.resolve(&apos;123&apos;).then(res=&gt;&#123;</span><br><span class="line">  console.log(res);</span><br><span class="line">  </span><br><span class="line">&#125;)</span><br><span class="line"> process.nextTick(() =&gt; console.log(&apos;nextTick&apos;))</span><br><span class="line"> </span><br><span class="line"> //顺序  nextTick 123</span><br><span class="line"> //很明显  nextTick快</span><br></pre></td></tr></table></figure>
<h3 id="setTimeout第三个参数"><a href="#setTimeout第三个参数" class="headerlink" title="setTimeout第三个参数"></a>setTimeout第三个参数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(function(...list)&#123;</span><br><span class="line">				console.log(list);    //  [1, 2, 3, 4, 5]</span><br><span class="line">			&#125;,100,1,2,3,4,5)</span><br></pre></td></tr></table></figure>
<h3 id="Object和Function之间最让人琢磨不透的"><a href="#Object和Function之间最让人琢磨不透的" class="headerlink" title="Object和Function之间最让人琢磨不透的"></a>Object和Function之间最让人琢磨不透的</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Object instanceof Object // true</span><br><span class="line">Object instanceof Function // true</span><br><span class="line">Function instanceof Function // true</span><br><span class="line">Function instanceof Object // true</span><br><span class="line"></span><br><span class="line">const o = &#123;&#125;</span><br><span class="line">o instanceof Object //true</span><br><span class="line">o instanceof Function // false</span><br><span class="line"></span><br><span class="line">function F () &#123;&#125;</span><br><span class="line">F instanceof Object //true</span><br><span class="line">F instanceof Function //true</span><br></pre></td></tr></table></figure>
<h3 id="文件上传进度提示使用Javascript的XMLHttpRequest的progress事件"><a href="#文件上传进度提示使用Javascript的XMLHttpRequest的progress事件" class="headerlink" title="文件上传进度提示使用Javascript的XMLHttpRequest的progress事件"></a>文件上传进度提示使用Javascript的XMLHttpRequest的progress事件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">使用Javascript的XMLHttpRequest的progress事件，实现示例代码为：</span><br><span class="line"></span><br><span class="line">var formData = new FormData(); </span><br><span class="line">formData.append(&quot;file&quot;, document.getElementById(&apos;file&apos;).files[0]); </span><br><span class="line">formData.append(&quot;token&quot;, token_value); // 其他参数按这样子加入</span><br><span class="line"></span><br><span class="line">var xhr = new XMLHttpRequest();</span><br><span class="line">xhr.open(&apos;POST&apos;, &apos;/uploadurl&apos;);</span><br><span class="line">// 上传完成后的回调函数</span><br><span class="line">xhr.onload = function () &#123;</span><br><span class="line">  if (xhr.status === 200) &#123;</span><br><span class="line">　　console.log(&apos;上传成功&apos;);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">  　console.log(&apos;上传出错&apos;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">// 获取上传进度</span><br><span class="line">xhr.upload.onprogress = function (event) &#123;</span><br><span class="line">  if (event.lengthComputable) &#123;</span><br><span class="line">    var percent = Math.floor(event.loaded / event.total * 100) ;</span><br><span class="line">    // 设置进度显示</span><br><span class="line">    $(&quot;#J_upload_progress&quot;).progress(&apos;set progress&apos;, percent);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">xhr.send(formData);</span><br></pre></td></tr></table></figure>
<h3 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">			function A(obj) &#123;</span><br><span class="line">				obj.s = &quot;哈&quot;</span><br><span class="line">				obj = &#123;                     //obj 重新赋值，并且是一个对象，此时obj指向a的指针指向这个赋值对象</span><br><span class="line">					&quot;name&quot;: 2,</span><br><span class="line">					&quot;city&quot;: &quot;亚洲&quot;</span><br><span class="line">				&#125;</span><br><span class="line">				return obj</span><br><span class="line">			&#125;</span><br><span class="line">			var a = &#123;</span><br><span class="line">				&quot;name&quot;: 1,</span><br><span class="line">				&quot;city&quot;: &quot;中国&quot;</span><br><span class="line">			&#125;</span><br><span class="line">			var b = A(a);</span><br><span class="line">			console.log(b);   //&#123;name: 2, city: &quot;亚洲&quot;&#125;</span><br><span class="line">			console.log(a);   //&#123;name: 1, city: &quot;中国&quot;, s: &quot;哈&quot;&#125;</span><br><span class="line">		&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="LESS和SASS"><a href="#LESS和SASS" class="headerlink" title="LESS和SASS"></a>LESS和SASS</h3><table>
<thead>
<tr>
<th>语言</th>
<th>实现</th>
<th>特性</th>
<th>赋值</th>
<th>缩进</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sass</td>
<td>Ruby</td>
<td>变量$开头</td>
<td>$var: value</td>
<td>不需要</td>
</tr>
<tr>
<td>Less</td>
<td>JavaSript</td>
<td>变量@开头</td>
<td>@var: value</td>
<td>不需要</td>
</tr>
<tr>
<td>Stylus</td>
<td>NodeJs</td>
<td>不能使用@开头</td>
<td>var:10</td>
<td>都可以</td>
</tr>
</tbody>
</table>
<h3 id="创造纯净的对象"><a href="#创造纯净的对象" class="headerlink" title="创造纯净的对象"></a>创造纯净的对象</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">你可以创造100%纯净的对象，它不会从Object类继承任何方法（例如：构造函数、toString() 等）。</span><br><span class="line"></span><br><span class="line">const pureObject =Object.create(null);</span><br><span class="line">console.log(pureObject);//=&gt; &#123;&#125;</span><br><span class="line">console.log(pureObject.constructor);//=&gt; undefined</span><br><span class="line">console.log(pureObject.toString);//=&gt; undefined</span><br><span class="line">console.log(pureObject.hasOwnProperty);//=&gt; undefined</span><br></pre></td></tr></table></figure>
<h3 id="将一个任意长的数字变成逗号分割的格式"><a href="#将一个任意长的数字变成逗号分割的格式" class="headerlink" title="将一个任意长的数字变成逗号分割的格式"></a>将一个任意长的数字变成逗号分割的格式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">例子：</span><br><span class="line"></span><br><span class="line">// 保留三位小数</span><br><span class="line">parseToMoney(1234.56); // return &apos;1,234.56&apos;</span><br><span class="line">parseToMoney(123456789); // return &apos;123,456,789&apos;</span><br><span class="line">parseToMoney(1087654.321); // return &apos;1,087,654.321&apos;</span><br><span class="line">答：</span><br><span class="line"></span><br><span class="line">functionparseToMoney(num) &#123;</span><br><span class="line">  num = parseFloat(num.toFixed(3));</span><br><span class="line">  let [integer, decimal] = String.prototype.split.call(num, &apos;.&apos;);</span><br><span class="line">  integer = integer.replace(/\d(?=(\d&#123;3&#125;)+$)/g, &apos;$&amp;,&apos;);</span><br><span class="line">  return integer + &apos;.&apos; + (decimal ? decimal : &apos;&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="检测对象中属性的存在"><a href="#检测对象中属性的存在" class="headerlink" title="检测对象中属性的存在"></a>检测对象中属性的存在</h3><blockquote>
<p>使用in关键字。</p>
</blockquote>
<p>该方法可以判断对象的自有属性和继承来的属性是否存在。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var o=&#123;x:1&#125;;</span><br><span class="line">&quot;x&quot; in o;            //true，自有属性存在</span><br><span class="line">&quot;y&quot; in o;            //false</span><br><span class="line">&quot;toString&quot; in o;     //true，是一个继承属性</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>使用对象的hasOwnProperty()方法。</p>
</blockquote>
<p>该方法只能判断自有属性是否存在，对于继承属性会返回false。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var o=&#123;x:1&#125;;</span><br><span class="line">o.hasOwnProperty(&quot;x&quot;);    　　 //true，自有属性中有x</span><br><span class="line">o.hasOwnProperty(&quot;y&quot;);    　　 //false，自有属性中不存在y</span><br><span class="line">o.hasOwnProperty(&quot;toString&quot;); //false，这是一个继承属性，但不是自有属性</span><br></pre></td></tr></table></figure></p>
<h3 id="n"><a href="#n" class="headerlink" title="n!"></a>n!</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">functionfactorial(number)&#123;</span><br><span class="line">    if(number==1) &#123;</span><br><span class="line">      return number;</span><br><span class="line">    &#125; else&#123;</span><br><span class="line">      return number*factorial(number-1);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="斐波那契数列-1-1-2-3-5-8-13-21-34-55-89-144-…-求第n个数是多少"><a href="#斐波那契数列-1-1-2-3-5-8-13-21-34-55-89-144-…-求第n个数是多少" class="headerlink" title="斐波那契数列:1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, … 求第n个数是多少"></a>斐波那契数列:1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, … 求第n个数是多少</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">functionfibonacci(number) &#123;</span><br><span class="line">     if (number &lt;=2) &#123;</span><br><span class="line">       return1;</span><br><span class="line">     &#125;</span><br><span class="line">     returnfibonacci(number-1) +fibonacci(number -2)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="服务端推送的几种方式"><a href="#服务端推送的几种方式" class="headerlink" title="服务端推送的几种方式"></a>服务端推送的几种方式</h3><p>服务端推送是现今<code>Web</code>开发过程中最常见的需求。例如：</p>
<ul>
<li>即时聊天工具</li>
<li>H5网络游戏</li>
<li>消息通知</li>
</ul>
<p>一般的服务器推送包括：</p>
<ul>
<li>最简单的是客户端轮询的方式，在客户端创建一个定时器，每隔一定的时间去请求服务端，每次请求检查状态变化以判断服务端是否有新数据更新。</li>
<li>基于 AJAX 的长轮询（<code>long-polling</code>）方式，服务器在一段时间后再返回信息；</li>
<li><code>HTTP Streaming</code>，通过<code>iframe</code>和<code>&lt;script&gt;</code>标签完成数据的传输；</li>
<li><code>TCP</code>长连接/<code>WebSocket</code>，可以实现服务器主动发送数据至网页端，它和<code>HTTP</code>一样，是一个基于<code>HTTP</code>的应用层协议，跑的是<code>TCP</code>，所以本质上还是个长连接，双向通信，意味着服务器端和客户端可以同时发送并响应请求，而不再像<code>HTTP</code>的请求和响应</li>
<li><code>SSE: Server-Sent Events</code>，【webpack】这是通过<code>http</code>协议变通实现的，通过服务端向客户端声明，接下来是要发送的是流信息，本质上就是完成一次耗时长的下载。</li>
</ul>
<hr>
<h3 id="JavaScript进阶提高必读"><a href="#JavaScript进阶提高必读" class="headerlink" title="JavaScript进阶提高必读"></a><a href="https://github.com/mqyqingfeng/Blog" target="_blank" rel="noopener">JavaScript进阶提高必读</a></h3><h3 id="JavaScript常用七种继承方案"><a href="#JavaScript常用七种继承方案" class="headerlink" title="JavaScript常用七种继承方案"></a><a href="https://juejin.im/post/5bcb2e295188255c55472db0" target="_blank" rel="noopener">JavaScript常用七种继承方案</a></h3><h3 id="JS-面试原生常用api-方法大全"><a href="#JS-面试原生常用api-方法大全" class="headerlink" title="JS 面试原生常用api 方法大全"></a><a href="https://github.com/libin1991/libin_Blog/issues/476?from=timeline" target="_blank" rel="noopener">JS 面试原生常用api 方法大全</a></h3><h3 id="JS代码手写题"><a href="#JS代码手写题" class="headerlink" title="JS代码手写题"></a><a href="https://github.com/libin1991/libin_Blog/issues/388?from=timeline" target="_blank" rel="noopener">JS代码手写题</a></h3><h3 id="PM2来部署nodejs服务器永久开启"><a href="#PM2来部署nodejs服务器永久开启" class="headerlink" title="PM2来部署nodejs服务器永久开启"></a><a href="https://www.cnblogs.com/lxg0/p/7771229.html?from=timeline" target="_blank" rel="noopener">PM2来部署nodejs服务器永久开启</a></h3><h3 id="JavaScript设计模式"><a href="#JavaScript设计模式" class="headerlink" title="JavaScript设计模式"></a><a href="http://techblog.sishuxuefu.com/" target="_blank" rel="noopener">JavaScript设计模式</a></h3><h3 id="URL-解析"><a href="#URL-解析" class="headerlink" title="URL 解析"></a><a href="https://juejin.im/post/5bce96bff265da0ae801513c" target="_blank" rel="noopener">URL 解析</a></h3><h3 id="JavaScript专题"><a href="#JavaScript专题" class="headerlink" title="JavaScript专题"></a><a href="https://juejin.im/user/58f980918d6d8100587ea7f4/posts" target="_blank" rel="noopener">JavaScript专题</a></h3><h3 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a><a href="https://www.cnblogs.com/jiqing9006/category/461295.html" target="_blank" rel="noopener">数据结构</a></h3><h3 id="轻松理解JavaScript原型及原型链"><a href="#轻松理解JavaScript原型及原型链" class="headerlink" title="轻松理解JavaScript原型及原型链"></a><a href="https://juejin.im/post/5be42b34f265da61616e3056" target="_blank" rel="noopener">轻松理解JavaScript原型及原型链</a></h3><h3 id="H5-移动调试全攻略"><a href="#H5-移动调试全攻略" class="headerlink" title="H5 移动调试全攻略"></a><a href="http://jartto.wang/2018/11/01/mobile-debug/" target="_blank" rel="noopener">H5 移动调试全攻略</a></h3><h3 id="JS-面试原生常用api-方法大全-1"><a href="#JS-面试原生常用api-方法大全-1" class="headerlink" title="JS 面试原生常用api 方法大全"></a><a href="https://github.com/libin1991/libin_Blog/issues/476" target="_blank" rel="noopener">JS 面试原生常用api 方法大全</a></h3><h3 id="javascript-原生常用API大全"><a href="#javascript-原生常用API大全" class="headerlink" title="javascript 原生常用API大全"></a><a href="https://github.com/libin1991/libin_Blog/issues/412" target="_blank" rel="noopener">javascript 原生常用API大全</a></h3><hr>
<p><img src="/2015/01/01/JS原生常用API大全/62002d6d0dab2d26a897d9591bb64efd.jpg" alt><br><img src="/2015/01/01/JS原生常用API大全/20181109201728.jpg" alt><br><img src="/2015/01/01/JS原生常用API大全/微信图片_20181109201653.jpg" alt><br><img src="/2015/01/01/JS原生常用API大全/微信图片_20181109201814.jpg" alt><br><img src="/2015/01/01/JS原生常用API大全/微信图片_20181109201821.jpg" alt><br><img src="/2015/01/01/JS原生常用API大全/微信图片_20181109201850.jpg" alt><br><img src="/2015/01/01/JS原生常用API大全/微信图片_20181109201858.jpg" alt><br><img src="/2015/01/01/JS原生常用API大全/微信图片_20181109201910.jpg" alt><br><img src="/2015/01/01/JS原生常用API大全/微信图片_20181109202057.jpg" alt><br><img src="/2015/01/01/JS原生常用API大全/微信图片_20181109202113.jpg" alt><br><img src="/2015/01/01/JS原生常用API大全/微信图片_20181109202129.jpg" alt><br><img src="/2015/01/01/JS原生常用API大全/微信图片_20181109202148.jpg" alt><br><img src="/2015/01/01/JS原生常用API大全/微信图片_20181109202207.jpg" alt><br><img src="/2015/01/01/JS原生常用API大全/微信图片_20181109202213.jpg" alt><br><img src="/2015/01/01/JS原生常用API大全/微信图片_20181109202237.jpg" alt></p>
<h3 id="preload、prefetch"><a href="#preload、prefetch" class="headerlink" title="preload、prefetch"></a>preload、prefetch</h3><p>现在的网络情况虽然很乐观，但是</p>
<h4 id="defer和async"><a href="#defer和async" class="headerlink" title="defer和async"></a>defer和async</h4><p>当浏览器碰到 script 脚本的时候：</p>
<p><code>&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;</code></p>
<p>没有 defer 或 async，浏览器会立即加载并执行指定的脚本，“立即”指的是在渲染该 script 标签之下的文档元素之前，也就是说不等待后续载入的文档元素，读到就加载并执行。</p>
<p><code>&lt;script async src=&quot;script.js&quot;&gt;&lt;/script&gt;</code></p>
<p>有 async，加载和渲染后续文档元素的过程将和 script.js 的加载与执行并行进行（异步）。</p>
<p><code>&lt;script defer src=&quot;myscript.js&quot;&gt;&lt;/script&gt;</code></p>
<p>有 defer，加载后续文档元素的过程将和 script.js 的加载并行进行（异步），但是 script.js 的执行要在所有元素解析完成之后，DOMContentLoaded 事件触发之前完成。</p>
<p>然后从实用角度来说呢，首先把所有脚本都丢到 之前是最佳实践，因为对于旧浏览器来说这是唯一的优化选择，此法可保证非脚本的其他一切元素能够以最快的速度得到加载和解析。</p>
<p>接着，我们来看一张图咯：</p>
<p><img src="/2015/01/01/JS原生常用API大全/640.webp" alt></p>
<p>此图告诉我们以下几个要点：</p>
<ol>
<li><p>defer 和 async 在网络读取（下载）这块儿是一样的，都是异步的（相较于 HTML 解析）</p>
</li>
<li><p>它俩的差别在于脚本下载完之后何时执行，显然 defer 是最接近我们对于应用脚本加载和执行的要求的</p>
</li>
<li><p>关于 defer，此图未尽之处在于它是按照加载顺序执行脚本的，这一点要善加利用</p>
</li>
<li><p>async 则是一个乱序执行的主，反正对它来说脚本的加载和执行是紧紧挨着的，所以不管你声明的顺序如何，只要它加载完了就会立刻执行</p>
</li>
<li><p>仔细想想，async 对于应用脚本的用处不大，因为它完全不考虑依赖（哪怕是最低级的顺序执行），不过它对于那些可以不依赖任何脚本或不被任何脚本依赖的脚本来说却是非常合适的，</p>
</li>
</ol>
<h3 id="preload和refetch"><a href="#preload和refetch" class="headerlink" title="preload和refetch"></a>preload和refetch</h3><p><code>preload</code>通常在页面中，我们需要加载一些脚本和样式，而使用 preload 可以对当前页面所需的脚本、样式等资源进行预加载，而无需等到解析到 script 和 link 标签时才进行加载。这一机制使得资源可以更早的得到加载并可用，且更不易阻塞页面的初步渲染，进而提升性能。</p>
<p>使用方式<br>将 link 标签的 rel 属性的值设为 preload，as 属性的值为资源类型（如脚本为 script，样式表为 style）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> &lt;head&gt;</span><br><span class="line"></span><br><span class="line">	&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line"></span><br><span class="line">	&lt;title&gt;</span><br><span class="line">		preload example</span><br><span class="line">	&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 对 style.css 和 index.js 进行预加载 --&gt;</span><br><span class="line"></span><br><span class="line">	&lt;link rel=&quot;preload&quot; href=&quot;style.css&quot; as=&quot;style&quot;&gt;</span><br><span class="line"></span><br><span class="line">	&lt;link rel=&quot;preload&quot; href=&quot;index.js&quot; as=&quot;script&quot;&gt;</span><br><span class="line"></span><br><span class="line">	&lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">	&lt;script src=&quot;index.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<font color="#dd0000"> <code>prefetch</code>与 <code>preload</code> 一样，都是对资源进行预加载，但是 prefetch 加载的资源一般不是用于当前页面的，即未来很可能用到的这样一些资源，简单点说就是其他页面会用到的资源。当然，prefetch 不会像 preload 一样，在页面渲染的时候加载资源，而是利用浏览器空闲时间来下载。当进入下一页面，就可直接从 disk cache 里面取，既不影响当前页面的渲染，又提高了其他页面加载渲染的速度。</font>

<p>使用方式<br>同 <code>preload</code> 很相似，无需指定 as 属性：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"> &lt;head&gt;</span><br><span class="line"></span><br><span class="line">	&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line"></span><br><span class="line">	&lt;title&gt;</span><br><span class="line">		preload example</span><br><span class="line">	&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 对 style.css 和 index.js 进行 preload 预加载 --&gt;</span><br><span class="line"></span><br><span class="line">	&lt;link rel=&quot;preload&quot; href=&quot;style.css&quot; as=&quot;style&quot;&gt;</span><br><span class="line"></span><br><span class="line">	&lt;link rel=&quot;preload&quot; href=&quot;index.js&quot; as=&quot;script&quot;&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 对资源进行 prefetch 预加载 --&gt;</span><br><span class="line"></span><br><span class="line">	&lt;link rel=&quot;prefetch&quot; href=&quot;next.css&quot;&gt;</span><br><span class="line"></span><br><span class="line">	&lt;link rel=&quot;prefetch&quot; href=&quot;next.js&quot;&gt;</span><br><span class="line"></span><br><span class="line">	&lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">	&lt;script src=&quot;index.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></p>
<table><tr><td bgcolor="#FF0000"><font color="#fff"><strong>总结:对当前页面需要的资源，使用 preload 进行预加载，对其它页面需要的资源进行 prefetch 预加载。</strong></font></td></tr></table>


<h4 id="Subresource和Prerender"><a href="#Subresource和Prerender" class="headerlink" title="Subresource和Prerender"></a>Subresource和Prerender</h4><p><code>subresource</code>可以用来指定资源是最高优先级的。比如，在Chrome和Opera中我们可以加上下面的代码：</p>
<p><code>&lt;link rel=&quot;subresource&quot; href=&quot;styles.css&quot;&gt;</code></p>
<blockquote>
<p>Chromium的文档这么解释：<br>和 “Link rel=prefetch”的语义不同，”Link rel=subresource”是一种新的连接关系。rel=prefetch指定了下载后续页面用到资源的低优先级，而rel=subresource则是指定当前页面资源的提前加载。</p>
</blockquote>
<p>所以，如果资源是在当前页面需要，或者马上就会用到，则推荐用subresource，否则还是用prefetch。</p>
<p><code>prerender</code>是一个重量级的选项，它可以让浏览器提前加载指定页面的所有资源。</p>
<p><code>&lt;link rel=&quot;prerender&quot; href=&quot;/thenextpage.html&quot; /&gt;</code></p>
<blockquote>
<p>Steve Souders的文章详细解释了这个技术：<br>prerender就像是在后台打开了一个隐藏的tab，会下载所有的资源、创建DOM、渲染页面、执行JS等等。如果用户进入指定的链接，隐藏的这个页面就会进入马上进入用户的视线。Google Search多年前就利用了这个特性实现了Instant Pages功能。微软最近也宣布会让Bing在IE11上用类似prerender的技术。</p>
</blockquote>
<h3 id="Axios拦截器"><a href="#Axios拦截器" class="headerlink" title="Axios拦截器"></a>Axios拦截器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">import axios from &apos;axios&apos;</span><br><span class="line">import &#123; throwErr &#125; from &apos;@/utils&apos; //utils 捕捉服务端http状态码的方法</span><br><span class="line">import store from &apos;@/store&apos;   //引入vuex的相关操作</span><br><span class="line">import &#123; Message &#125; from &apos;element-ui&apos; //element Toast的提示</span><br><span class="line">import router from &apos;@/router&apos;</span><br><span class="line"></span><br><span class="line">//过滤请求</span><br><span class="line">axios.interceptors.request.use(config =&gt; &#123;</span><br><span class="line">  //config 为请求的一些配置 例如：请求头 请求时间 Token  可以根据自己的项目需求个性化配置，参考axios的中文说明手册  自己多动动手</span><br><span class="line"> //由于我们项目的后端大大给力，很多东西在服务端帮我们处理好了所以请求阶段只要传好参数就好了</span><br><span class="line">  config.timeout = 10 * 1000 //请求响应时间</span><br><span class="line">  return config</span><br><span class="line">&#125;, error =&gt; &#123;</span><br><span class="line">  return Promise.reject(error)</span><br><span class="line">&#125;)</span><br><span class="line">// 添加响应拦截器</span><br><span class="line">axios.interceptors.response.use(</span><br><span class="line">  response =&gt; &#123;</span><br><span class="line">    if (response.data.code === 0) &#123;   //服务端定义的响应code码为0时请求成功</span><br><span class="line">      return Promise.resolve(response.data) //使用Promise.resolve 正常响应</span><br><span class="line">    &#125; else if (response.data.code === 1401) &#123; //服务端定义的响应code码为1401时为未登录</span><br><span class="line">      store.dispatch(&apos;setUserInfo&apos;, &#123;&#125;)</span><br><span class="line">      Message(&#123;</span><br><span class="line">        message: &apos;未登录&apos;</span><br><span class="line">      &#125;)</span><br><span class="line">      // router.push(&apos;/login&apos;)</span><br><span class="line">      return Promise.reject(response.data)    //使用Promise.reject 抛出错误和异常</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      return Promise.reject(response.data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    if (error &amp;&amp; error.response) &#123;</span><br><span class="line">      let res = &#123;&#125;</span><br><span class="line">      res.code = error.response.status</span><br><span class="line">      res.msg = throwErr(error.response.status, error.response) //throwErr 捕捉服务端的http状态码 定义在utils工具类的方法</span><br><span class="line">      return Promise.reject(res)</span><br><span class="line">    &#125;</span><br><span class="line">    return Promise.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line">export default function request(method, url, data) &#123;  //暴露 request 给我们好API 管理</span><br><span class="line">  method = method.toLocaleLowerCase()   //封装RESTful API的各种请求方式 以 post get delete为例</span><br><span class="line">  if (method === &apos;post&apos;) &#123;</span><br><span class="line">    return axios.post(url, data)    //axios的post 默认转化为json格式</span><br><span class="line">  &#125; else if (method === &apos;get&apos;) &#123;     </span><br><span class="line">    return axios.get(url, &#123;</span><br><span class="line">      params: data</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; else if (method === &apos;delete&apos;) &#123;</span><br><span class="line">    return axios.delete(url, &#123;</span><br><span class="line">      params: data</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JavaScript的值传递和引用传递"><a href="#JavaScript的值传递和引用传递" class="headerlink" title="*JavaScript的值传递和引用传递"></a>*<a href="https://juejin.im/post/5beb934df265da61797460fd" target="_blank" rel="noopener">JavaScript的值传递和引用传递</a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function changeAgeAndReference(person) &#123;</span><br><span class="line">    person.age = 25;</span><br><span class="line">    person = &#123;</span><br><span class="line">        name: &apos;John&apos;,</span><br><span class="line">        age: 50</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    return person;</span><br><span class="line">&#125;</span><br><span class="line">var personObj1 = &#123;</span><br><span class="line">    name: &apos;Alex&apos;,</span><br><span class="line">    age: 30</span><br><span class="line">&#125;;</span><br><span class="line">var personObj2 = changeAgeAndReference(personObj1);</span><br><span class="line">console.log(personObj1); // -&gt; &#123;name: &quot;Alex&quot;, age: 25&#125;</span><br><span class="line">console.log(personObj2); // -&gt; &#123;name: &quot;John&quot;, age: 50&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JSONP-【JSONP百度搜索框】"><a href="#JSONP-【JSONP百度搜索框】" class="headerlink" title="JSONP 【JSONP百度搜索框】"></a>JSONP 【JSONP百度搜索框】</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"></span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;title&gt;&lt;/title&gt;</span><br><span class="line">		&lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">		&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">			ul,</span><br><span class="line">			li &#123;</span><br><span class="line">				margin: 0;</span><br><span class="line">				padding: 0;</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			.search &#123;</span><br><span class="line">				display: block;</span><br><span class="line">				margin: 0 auto;</span><br><span class="line">				height: 22px;</span><br><span class="line">				position: relative;</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">		</span><br><span class="line">			.search-out &#123;</span><br><span class="line">				position: absolute;</span><br><span class="line">				width: 200px;</span><br><span class="line">				height: 300px;</span><br><span class="line">				z-index: 10;</span><br><span class="line">				top: 23px;</span><br><span class="line">				color: #7e8c8d;</span><br><span class="line">				overflow-x: hidden;</span><br><span class="line">				overflow-y: auto;</span><br><span class="line">				margin-top: 5px;</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			.search-out ul li &#123;</span><br><span class="line">				font-size: 12px;</span><br><span class="line">				height: 25px;</span><br><span class="line">				/*li溢出省略*/</span><br><span class="line">				overflow: hidden;</span><br><span class="line">				text-overflow: ellipsis;</span><br><span class="line">				white-space: nowrap;</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			.search-out ul li:hover &#123;</span><br><span class="line">				background-color: #edf0f1;</span><br><span class="line">			&#125;</span><br><span class="line">		&lt;/style&gt;</span><br><span class="line">		&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">			window.onload = function() &#123;</span><br><span class="line"></span><br><span class="line">				let input = document.getElementById(&apos;input&apos;),</span><br><span class="line">					body = document.getElementsByClassName(&apos;search&apos;)[0],</span><br><span class="line">					btn = document.getElementsByTagName(&quot;button&quot;)[0],</span><br><span class="line">					ul = document.getElementById(&apos;ul&apos;);</span><br><span class="line">				var globalData = [&apos;历史1&apos;, &apos;历史2&apos;]; //globalData数据，存储历史搜索</span><br><span class="line"></span><br><span class="line">				input.addEventListener(&apos;focus&apos;, function() &#123;</span><br><span class="line">					var htmlText = &apos;&apos;;</span><br><span class="line"></span><br><span class="line">					for(var i = 0; i &lt; globalData.length; i++) &#123;</span><br><span class="line">						htmlText += &apos;&lt;li&gt;&apos; + globalData[i] + &apos;&lt;/li&gt;&apos;;</span><br><span class="line">					&#125;</span><br><span class="line">					ul.innerHTML = htmlText;</span><br><span class="line">					ul.style.border = &quot;solid 1px #dee6e8&quot;;</span><br><span class="line">					ul.style.background = &quot;white&quot;;</span><br><span class="line">				&#125;);</span><br><span class="line">				btn.addEventListener(&quot;click&quot;, function() &#123; //当点击搜索按钮把输入框数据添加至历史数组</span><br><span class="line">					if(input.value) &#123;</span><br><span class="line">						globalData.push(input.value);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line"></span><br><span class="line">				input.addEventListener(&apos;blur&apos;, function() &#123; //离开输入框隐藏历史下拉列表</span><br><span class="line">					ul.style.border = &quot;&quot;;</span><br><span class="line">					ul.style.background = &quot;&quot;;</span><br><span class="line">					ul.innerHTML = &apos;&apos;;</span><br><span class="line"></span><br><span class="line">				&#125;);</span><br><span class="line"></span><br><span class="line">				//监听input事件</span><br><span class="line">				input.addEventListener(&apos;input&apos;, function() &#123;</span><br><span class="line">					console.log(input.value)</span><br><span class="line">					if(!input.value) &#123;</span><br><span class="line">						var htmlText = &apos;&apos;;</span><br><span class="line"></span><br><span class="line">						for(var i = 0; i &lt; globalData.length; i++) &#123;</span><br><span class="line">							htmlText += &apos;&lt;li&gt;&apos; + globalData[i] + &apos;&lt;/li&gt;&apos;;</span><br><span class="line">						&#125;</span><br><span class="line">						ul.innerHTML = htmlText;</span><br><span class="line">						ul.style.border = &quot;solid 1px #dee6e8&quot;;</span><br><span class="line">						ul.style.background = &quot;white&quot;;</span><br><span class="line"></span><br><span class="line">						return false;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">					var val = encodeURI(input.value);</span><br><span class="line">					ul.innerHTML = &apos;&apos;; //清空上一次请求所插入的li</span><br><span class="line">					jsonp(&#123;</span><br><span class="line">						url: &apos;https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd=&apos; + val + &apos;&amp;cb=&apos;,</span><br><span class="line">						time: 3000,</span><br><span class="line">						callback: function(json) &#123;</span><br><span class="line">							var htmlText = &apos;&apos;;</span><br><span class="line">							for(var i = 0; i &lt; json.s.length; i++) &#123;</span><br><span class="line">								htmlText += &apos;&lt;li&gt;&apos; + json[&apos;s&apos;][i] + &apos;&lt;/li&gt;&apos;;</span><br><span class="line">							&#125;</span><br><span class="line">							ul.innerHTML = htmlText;</span><br><span class="line">						&#125;,</span><br><span class="line">						fail: function(mes) &#123;</span><br><span class="line">							alert(mes);</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;);</span><br><span class="line">				&#125;);</span><br><span class="line"></span><br><span class="line">				function jsonp(objects) &#123;</span><br><span class="line">					objects = objects || &#123;&#125;;</span><br><span class="line">					if(!objects.url || !objects.callback) &#123;</span><br><span class="line">						throw new Error(&apos;参数不合法&apos;);</span><br><span class="line">					&#125;</span><br><span class="line">					//创建script标签并插入</span><br><span class="line">					var callbackName = (&apos;jsonp_&apos; + Math.random()).replace(&quot;.&quot;, &quot;&quot;); //随机生成callbackName</span><br><span class="line">					var script = document.createElement(&apos;script&apos;);</span><br><span class="line">					var body = document.getElementsByClassName(&apos;search&apos;)[0];</span><br><span class="line">					body.appendChild(script);</span><br><span class="line">					window[callbackName] = function(json) &#123;</span><br><span class="line">						body.removeChild(script);</span><br><span class="line">						clearTimeout(script.timer);</span><br><span class="line">						window[callbackName] = null;</span><br><span class="line">						objects.callback &amp;&amp; objects.callback(json);</span><br><span class="line">					&#125;;</span><br><span class="line"></span><br><span class="line">					//发出请求</span><br><span class="line">					script.src = objects.url + callbackName;</span><br><span class="line"></span><br><span class="line">					//响应时间</span><br><span class="line">					if(objects.time) &#123;</span><br><span class="line">						script.timer = setTimeout(function() &#123;</span><br><span class="line">							window[callbackName] = null;</span><br><span class="line">							body.removeChild(script);</span><br><span class="line">							objects.fail &amp;&amp; objects.fail(&apos;超时&apos;);</span><br><span class="line">						&#125;, objects.time);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&lt;/script&gt;</span><br><span class="line">	&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">	&lt;body&gt;</span><br><span class="line">		&lt;div class=&quot;search&quot;&gt;</span><br><span class="line">			&lt;input id=&quot;input&quot; type=&quot;text&quot; placeholder=&quot;搜索材质&quot;&gt;</span><br><span class="line">			&lt;span&gt;</span><br><span class="line">				&lt;button&gt;搜索&lt;/button&gt;</span><br><span class="line">			&lt;/span&gt;</span><br><span class="line">			&lt;div class=&quot;search-out&quot;&gt;</span><br><span class="line">				&lt;ul id=&quot;ul&quot;&gt;&lt;/ul&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">	&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Math-round-，Math-ceil-，Math-floor-的区别"><a href="#Math-round-，Math-ceil-，Math-floor-的区别" class="headerlink" title="Math.round()，Math.ceil()，Math.floor()的区别"></a>Math.round()，Math.ceil()，Math.floor()的区别</h3><p>1.Math.round()：根据“round”的字面意思“附近、周围”，可以猜测该函数是求一个附近的整数，看下面几个例子就明白。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">小数点后第一位&lt;5</span><br><span class="line">正数：Math.round(11.46)=11</span><br><span class="line">负数：Math.round(-11.46)=-11</span><br><span class="line"> </span><br><span class="line">小数点后第一位&gt;5</span><br><span class="line">正数：Math.round(11.68)=12</span><br><span class="line">负数：Math.round(-11.68)=-12</span><br><span class="line"> </span><br><span class="line">小数点后第一位=5</span><br><span class="line">正数：Math.round(11.5)=12</span><br><span class="line">负数：Math.round(-11.5)=-11</span><br><span class="line">总结：（小数点后第一位）大于五全部加，等于五正数加，小于五全不加。</span><br></pre></td></tr></table></figure></p>
<p>2.Math.ceil()：根据“ceil”的字面意思“天花板”去理解；<br>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Math.ceil(11.46)=Math.ceil(11.68)=Math.ceil(11.5)=12</span><br><span class="line">Math.ceil(-11.46)=Math.ceil(-11.68)=Math.ceil(-11.5)=-11</span><br></pre></td></tr></table></figure></p>
<p>3.Math.floor()：根据“floor”的字面意思“地板”去理解；<br>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Math.ceil(11.46)=Math.ceil(11.68)=Math.ceil(11.5)=11</span><br><span class="line">Math.ceil(-11.46)=Math.ceil(-11.68)=Math.ceil(-11.5)=-12</span><br></pre></td></tr></table></figure></p>
<h3 id="Math-random-函数生成n到m间的随机数字"><a href="#Math-random-函数生成n到m间的随机数字" class="headerlink" title="Math.random()函数生成n到m间的随机数字"></a>Math.random()函数生成n到m间的随机数字</h3><p>Math.random()函数返回0和1之间的伪随机数，可能为0，但总是小于1，[0,1)</p>
<blockquote>
<p>生成n-m，包含n但不包含m的整数：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">第一步算出 m-n的值，假设等于w</span><br><span class="line"></span><br><span class="line">第二步Math.random()*w</span><br><span class="line"></span><br><span class="line">第三步Math.random()*w+n</span><br><span class="line"></span><br><span class="line">第四步parseInt(Math.random()*w+n, 10)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>生成n-m，不包含n但包含m的整数：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">第一步算出 m-n的值，假设等于w</span><br><span class="line"></span><br><span class="line">第二步Math.random()*w</span><br><span class="line"></span><br><span class="line">第三步Math.random()*w+n</span><br><span class="line"></span><br><span class="line">第四步Math.floor(Math.random()*w+n) + 1</span><br></pre></td></tr></table></figure>
<blockquote>
<p>生成n-m，不包含n和m的整数：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">第一步算出 m-n-2的值，假设等于w</span><br><span class="line"></span><br><span class="line">第二步Math.random()*w</span><br><span class="line"></span><br><span class="line">第三步Math.random()*w+n +1</span><br><span class="line"></span><br><span class="line">第四步Math.round(Math.random()*w+n+1) 或者 Math.ceil(Math.random()*w+n+1)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>生成n-m，包含n和m的随机数：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">第一步算出 m-n的值，假设等于w</span><br><span class="line"></span><br><span class="line">第二步Math.random()*w</span><br><span class="line"></span><br><span class="line">第三步Math.random()*w+n</span><br><span class="line"></span><br><span class="line">第四步Math.round(Math.random()*w+n) 或者 Math.ceil(Math.random()*w+n)</span><br></pre></td></tr></table></figure>
<h3 id="ES6事件总线-EventBus"><a href="#ES6事件总线-EventBus" class="headerlink" title="ES6事件总线 EventBus"></a>ES6事件总线 EventBus</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class EventBus &#123;</span><br><span class="line"></span><br><span class="line">    constructor() &#123;</span><br><span class="line">        this.events = &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    on(type, callback, scope, ...args) &#123;</span><br><span class="line">        if (typeof this.events[type] == &quot;undefined&quot;) &#123;</span><br><span class="line">            this.events[type] = [];</span><br><span class="line">        &#125;</span><br><span class="line">        this.events[type].push(&#123;scope: scope, callback: callback, args: args&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    off(type, callback, scope) &#123;</span><br><span class="line">        if (typeof this.events[type] == &quot;undefined&quot;) &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        let numOfCallbacks = this.events[type].length;</span><br><span class="line">        let newArray = [];</span><br><span class="line">        for (let i = 0; i &lt; numOfCallbacks; i++) &#123;</span><br><span class="line">            let event = this.events[type][i];</span><br><span class="line">            if (event.scope == scope &amp;&amp; event.callback == callback) &#123;</span><br><span class="line"></span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                newArray.push(event);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        this.events[type] = newArray;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    has(type, callback, scope) &#123;</span><br><span class="line">        if (typeof this.events[type] == &quot;undefined&quot;) &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        let numOfCallbacks = this.events[type].length;</span><br><span class="line">        if (callback === undefined &amp;&amp; scope === undefined) &#123;</span><br><span class="line">            return numOfCallbacks &gt; 0;</span><br><span class="line">        &#125;</span><br><span class="line">        for (let i = 0; i &lt; numOfCallbacks; i++) &#123;</span><br><span class="line">            let event = this.events[type][i];</span><br><span class="line">            if ((scope ? event.scope == scope : true) &amp;&amp; event.callback == callback) &#123;</span><br><span class="line">                return true;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    emit(type, target, ...args) &#123;</span><br><span class="line">        if (typeof this.events[type] == &quot;undefined&quot;) &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        let bag = &#123;</span><br><span class="line">            type: type,</span><br><span class="line">            target: target</span><br><span class="line">        &#125;;</span><br><span class="line">        args = [bag].concat(args);</span><br><span class="line">        let events = this.events[type].slice();</span><br><span class="line">        let numOfCallbacks = events.length;</span><br><span class="line">        for (let i = 0; i &lt; numOfCallbacks; i++) &#123;</span><br><span class="line">            let event = events[i];</span><br><span class="line">            if (event &amp;&amp; event.callback) &#123;</span><br><span class="line">                let concatArgs = args.concat(event.args);</span><br><span class="line">                event.callback.apply(event.scope, concatArgs);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    debug() &#123;</span><br><span class="line">        let str = &quot;&quot;;</span><br><span class="line">        for (let type in this.events) &#123;</span><br><span class="line">            let numOfCallbacks = this.events[type].length;</span><br><span class="line">            for (let i = 0; i &lt; numOfCallbacks; i++) &#123;</span><br><span class="line">                let event = this.events[type][i];</span><br><span class="line">                let className = &quot;Anonymous&quot;;</span><br><span class="line">                if (event.scope) &#123;</span><br><span class="line">                    if (event.scope.constructor.name) &#123;</span><br><span class="line">                        className = event.scope.constructor.name;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                str += `$&#123;className&#125; listening for &quot;$&#123;type&#125;&quot;\n`;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default new EventBus();</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;EventBus Examples&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type=&quot;module&quot;&gt;</span><br><span class="line">    import EventBus from &apos;/src/eventbus.js&apos;;</span><br><span class="line">    // Simple example</span><br><span class="line">    &#123;</span><br><span class="line">        function myHandler(event) &#123;</span><br><span class="line">            console.log(&quot;myHandler / type: &quot; + event.type);</span><br><span class="line">        &#125;</span><br><span class="line">        EventBus.on(&quot;my_event&quot;, myHandler);</span><br><span class="line">        EventBus.emit(&quot;my_event&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    // Keeping the scope</span><br><span class="line">    &#123;</span><br><span class="line">        class TestClass1 &#123;</span><br><span class="line">            constructor() &#123;</span><br><span class="line">                this.className = &quot;TestClass1&quot;;</span><br><span class="line">                EventBus.on(&quot;callback_event&quot;, this.callback, this);</span><br><span class="line">            &#125;</span><br><span class="line">            callback(event) &#123;</span><br><span class="line">                console.log(this.className + &quot; / type: &quot; + event.type + &quot; / dispatcher: &quot; + event.target.className);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        class TestClass2 &#123;</span><br><span class="line">            constructor() &#123;</span><br><span class="line">                this.className = &quot;TestClass2&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">            dispatch() &#123;</span><br><span class="line">                EventBus.emit(&quot;callback_event&quot;, this);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        let t1 = new TestClass1();</span><br><span class="line">        let t2 = new TestClass2();</span><br><span class="line">        t2.dispatch();</span><br><span class="line">    &#125;</span><br><span class="line">    // Passing additional parameters</span><br><span class="line">    &#123;</span><br><span class="line">        class TestClass1 &#123;</span><br><span class="line">            constructor() &#123;</span><br><span class="line">                this.className = &quot;TestClass1&quot;;</span><br><span class="line">                EventBus.on(&quot;custom_event&quot;, this.doSomething, this);</span><br><span class="line">            &#125;</span><br><span class="line">            doSomething(event, param1, param2) &#123;</span><br><span class="line">                console.log(this.className + &quot;.doSomething&quot;);</span><br><span class="line">                console.log(&quot;type=&quot; + event.type);</span><br><span class="line">                console.log(&quot;params=&quot; + param1 + param2);</span><br><span class="line">                console.log(&quot;coming from=&quot; + event.target.className);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        class TestClass2 &#123;</span><br><span class="line">            constructor() &#123;</span><br><span class="line">                this.className = &quot;TestClass2&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">            ready() &#123;</span><br><span class="line">                EventBus.emit(&quot;custom_event&quot;, this, &quot;javascript events&quot;, &quot; are really useful&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        let t1 = new TestClass1();</span><br><span class="line">        let t2 = new TestClass2();</span><br><span class="line">        t2.ready();</span><br><span class="line">    &#125;</span><br><span class="line">    // Debugging</span><br><span class="line">    console.log(EventBus.debug());</span><br><span class="line">    // Removing a registered handler</span><br><span class="line">    &#123;</span><br><span class="line">        var handler = function() &#123;</span><br><span class="line">            console.log(&apos;example callback&apos;);</span><br><span class="line">        &#125;;</span><br><span class="line">        EventBus.on(&apos;EXAMPLE_EVENT&apos;, handler);</span><br><span class="line">        EventBus.emit(&apos;EXAMPLE_EVENT&apos;);</span><br><span class="line">        EventBus.off(&apos;EXAMPLE_EVENT&apos;, handler);</span><br><span class="line">        // Not emitted because event was removed</span><br><span class="line">        EventBus.emit(&apos;EXAMPLE_EVENT&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="JS全排列-【全排列是一种时间复杂度为：O-n-的算法】"><a href="#JS全排列-【全排列是一种时间复杂度为：O-n-的算法】" class="headerlink" title="JS全排列  【全排列是一种时间复杂度为：O(n!)的算法】"></a>JS全排列  【全排列是一种时间复杂度为：O(n!)的算法】</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"></span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">		&lt;title&gt;&lt;/title&gt;</span><br><span class="line">	&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">	&lt;body&gt;</span><br><span class="line">		&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">			//实现两数交换</span><br><span class="line">			function swap(arr, i, j) &#123;</span><br><span class="line">				var tmp = arr[i];</span><br><span class="line">				arr[i] = arr[j];</span><br><span class="line">				arr[j] = tmp;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			//递归实现数组全排列并打印</span><br><span class="line">			function permutation(arr, index) &#123;</span><br><span class="line">				if(index == arr.length) &#123; //全排列结束</span><br><span class="line">					console.log(arr);</span><br><span class="line">				&#125; else &#123;</span><br><span class="line">					for(var i = index; i &lt; arr.length; i++) &#123;</span><br><span class="line">						//将第i个元素交换至当前index下标处</span><br><span class="line">						swap(arr, index, i);</span><br><span class="line">						//以递归的方式对剩下元素进行全排列</span><br><span class="line">						permutation(arr, index + 1);</span><br><span class="line">						//将第i个元素交换回原处</span><br><span class="line">						swap(arr, index, i);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			function main() &#123;</span><br><span class="line">				var arr = [1, 2, 3]</span><br><span class="line">				permutation(arr, 0);</span><br><span class="line">			&#125;</span><br><span class="line">			main();</span><br><span class="line">		&lt;/script&gt;</span><br><span class="line">	&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="一年半经验，百度、有赞、阿里面试总结"><a href="#一年半经验，百度、有赞、阿里面试总结" class="headerlink" title="一年半经验，百度、有赞、阿里面试总结"></a><a href="https://juejin.im/post/5befeb5051882511a8527dbe" target="_blank" rel="noopener">一年半经验，百度、有赞、阿里面试总结</a></h3><h3 id="2018-大厂高级前端面试题汇总"><a href="#2018-大厂高级前端面试题汇总" class="headerlink" title="2018 大厂高级前端面试题汇总"></a><a href="https://mp.weixin.qq.com/s?__biz=MzAxODE2MjM1MA==&amp;mid=2651555265&amp;idx=1&amp;sn=d60e4f4f5a145f8e93187d51fae57a43&amp;chksm=80255200b752db160ff8569d0795b8eaac096b8c62b30b3cf0ff93340c6f6a0b3b172ec308aa&amp;mpshare=1&amp;scene=1&amp;srcid=1118bWRTURLW0bpQa841O5x7#rd" target="_blank" rel="noopener">2018 大厂高级前端面试题汇总</a></h3><h3 id="Google-Chrome可跨域模式"><a href="#Google-Chrome可跨域模式" class="headerlink" title="Google Chrome可跨域模式"></a>Google Chrome可跨域模式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open -a &apos;Google Chrome&apos; --args --disable-web-security  --user-data-dir</span><br></pre></td></tr></table></figure>
<h3 id="v-for-循环-index的传值问题"><a href="#v-for-循环-index的传值问题" class="headerlink" title="v-for 循环 index的传值问题"></a>v-for 循环 index的传值问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-submenu :index=&quot;index&quot; v-for=&quot;(item,index) in menuList&quot;&gt;</span><br><span class="line">    &lt;el-menu-item :index=&quot;index&quot; </span><br><span class="line">       v-for=&quot;(subItem,subindex) in item.subMenuList&quot;&gt;</span><br><span class="line">        &#123;&#123;index&#125;&#125;-&#123;&#123;subItem.subMenuName&#125;&#125;&lt;/el-menu-item&gt;</span><br><span class="line">  </span><br><span class="line">&lt;/el-submenu&gt;</span><br></pre></td></tr></table></figure>
<p>发现子组件获取到的index一直都是undefined。</p>
<p>修改办法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-menu-item :index=&quot;&apos;&apos;+index&quot; </span><br><span class="line">     v-for=&quot;(subItem,subindex) in item.subMenuList&quot;&gt;</span><br><span class="line">  &#123;&#123;index&#125;&#125;-&#123;&#123;subItem.subMenuName&#125;&#125;</span><br><span class="line">&lt;/el-menu-item&gt;</span><br></pre></td></tr></table></figure></p>
<p>将 :index 的制改为’’+index，一定是单引号’’ ，子组件获取的到的就变成字符串”0,””1”…..</p>
<p>将字符串”0”变成整数   +”0” 即可！</p>
<h3 id="vue文件的一个小细节"><a href="#vue文件的一个小细节" class="headerlink" title=".vue文件的一个小细节"></a>.vue文件的一个小细节</h3><p>top.vue<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div class=&quot;ds&quot;&gt;</span><br><span class="line">		&lt;div class=&quot;left&quot;&gt;</span><br><span class="line">			&lt;p&gt;SX&lt;/p&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;div class=&quot;right&quot;&gt;</span><br><span class="line">			&lt;p&gt;SB&lt;/p&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    console.log(&quot;-------------------------&quot;);     //只执行一次</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">        props: [],</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        components: &#123;</span><br><span class="line">           </span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        created() &#123;</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        mounted() &#123;</span><br><span class="line">            console.log(&quot;$$$$$$$$$$$$$$$$$$$$$$$&quot;)；  //执行多次</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped=&quot;scoped&quot;&gt;</span><br><span class="line">	.guize &#123;</span><br><span class="line">		box-sizing: border-box;</span><br><span class="line">		padding: 0 0.4rem;</span><br><span class="line">		margin-top: -0.3rem;</span><br><span class="line">		width: 100%;</span><br><span class="line">		height: 1.2rem;</span><br><span class="line">		font-size: 0.24rem;</span><br><span class="line">		color: white;</span><br><span class="line">		position: relative;</span><br><span class="line">		.left &#123;</span><br><span class="line">			color: #abc4ed;</span><br><span class="line">			float: left;</span><br><span class="line">			transform:scale(0.85);</span><br><span class="line">			transform-origin:0 0; </span><br><span class="line">			p &#123;</span><br><span class="line">				font-size: 0.24rem;</span><br><span class="line">				line-height: 2;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		.right &#123;</span><br><span class="line">			float: left;</span><br><span class="line">			width: 1.6rem;</span><br><span class="line">			height: 0.44rem;</span><br><span class="line">			line-height: 0.44rem;</span><br><span class="line">			border: 1px solid white;</span><br><span class="line">			color: white;</span><br><span class="line">			border-radius: 0.24rem;</span><br><span class="line">			text-align: center;</span><br><span class="line">			position: absolute;</span><br><span class="line">			right: 0.4rem;</span><br><span class="line">			bottom: 0.04rem;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2015/01/01/JS原生常用API大全/v2-57add9333368254c8b108fdd00160585_hd.jpg" alt><br><img src="/2015/01/01/JS原生常用API大全/v2-2ac46bc7c3c82fdde73c1f53cf8e39d5_hd.jpg" alt></p>
<h3 id="由浏览器端判断是否支持WebP格式"><a href="#由浏览器端判断是否支持WebP格式" class="headerlink" title="由浏览器端判断是否支持WebP格式"></a>由浏览器端判断是否支持WebP格式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if(document.createElement(&apos;canvas&apos;).toDataURL(&apos;image/webp&apos;).indexOf(&apos;data:image/webp&apos;) == 0)&#123;</span><br><span class="line">   //  该浏览器支持WebP格式的图片</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="src转img"><a href="#src转img" class="headerlink" title="src转img"></a>src转img</h3><pre><code>function srctoimg(src){
  return new Promise((reslove,reject)=&gt;{
    let img = new Image()
    img.onload = function(){
      reslove(img)
    }
    img.onerror = function(err) {
      reject(err)
    }
    img.src = src
  })
}
</code></pre><h3 id="img转canvas"><a href="#img转canvas" class="headerlink" title="img转canvas"></a>img转canvas</h3><pre><code>function imgtocanvas(img){
  let canvas = document.createElement(&quot;canvas&quot;);
  let ctx = canvas.getContext(&apos;2d&apos;)
  canvas.width = img.width
  canvas.height = img.height
  ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
  return canvas
}
</code></pre><h3 id="ImageData转canvas"><a href="#ImageData转canvas" class="headerlink" title="ImageData转canvas"></a>ImageData转canvas</h3><pre><code>function ImageDatetocanvas(imgData){
 let canvas = document.createElement(&quot;canvas&quot;);
 let ctx = canvas.getContext(&apos;2d&apos;)
 canvas.width = imgData.width
 canvas.height = imgData.height
 ctx.putImageData(imgData,canvas.width, canvas.height);
 return canvas
}
</code></pre><h3 id="canvas转ImageData"><a href="#canvas转ImageData" class="headerlink" title="canvas转ImageData"></a>canvas转ImageData</h3><pre><code>function canvastoImageDate(canvas){
 let ctx = canvas.getContext(&apos;2d&apos;)
 return ctx.createImageData(canvas.width,canvas.height)
}
</code></pre><h3 id="canvas像素操作"><a href="#canvas像素操作" class="headerlink" title="canvas像素操作"></a>canvas像素操作</h3><pre><code>function canvaspixel(canvas,deal) {
  let ctx = canvas.getContext(&apos;2d&apos;)
  var imgData = ctx.createImageData(canvas.width, canvas.height);
  for (var i = 0; i &lt; imgData.data.length; i += 4) {
    deal(r,g,b,a)
  }
  ctx.putImageData(imgData, canvas.width, canvas.height);
  return canvas
}
</code></pre><h3 id="canava转DataURL-base64"><a href="#canava转DataURL-base64" class="headerlink" title="canava转DataURL(base64)"></a>canava转DataURL(base64)</h3><pre><code>canvas.toDataURL()
</code></pre><h3 id="DataURL-base64-转blob"><a href="#DataURL-base64-转blob" class="headerlink" title="DataURL(base64)转blob"></a>DataURL(base64)转blob</h3><pre><code>function dataURLtoBlob(dataurl) {
  var arr = dataurl.split(&apos;,&apos;), mime = arr[0].match(/:(.*?);/)[1],
    bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);
  while (n--) {
    u8arr[n] = bstr.charCodeAt(n);
  }
  return new Blob([u8arr], { type: mime });
}
</code></pre><h3 id="file转arrayBuffer"><a href="#file转arrayBuffer" class="headerlink" title="file转arrayBuffer"></a>file转arrayBuffer</h3><pre><code>function filetoblob(file){
  return new Promise((resolve, reject) =&gt; {
    var reader = new FileReader();
    reader.readAsArrayBuffer(file);
    reader.onload = function (e) {
      resolve(reader.result)
    }
  })
}
</code></pre><h3 id="file转blob"><a href="#file转blob" class="headerlink" title="file转blob"></a>file转blob</h3><pre><code>function filetoblob(file){
  return new Promise((resolve, reject) =&gt; {
    var reader = new FileReader();
    reader.readAsArrayBuffer(file);
    reader.onload = function (e) {
      resolve(new Blob([reader.result],{type:file.type}))
    }
  })
}
</code></pre><h3 id="blob-arraybuffer-转file"><a href="#blob-arraybuffer-转file" class="headerlink" title="(blob,arraybuffer)转file"></a>(blob,arraybuffer)转file</h3><pre><code>function blobtofile(blob,name){
    return new File([blob], name ,{type:blob.type})
}
</code></pre><h3 id="file-blob-转DataURL-base64"><a href="#file-blob-转DataURL-base64" class="headerlink" title="file(blob)转DataURL(base64)"></a>file(blob)转DataURL(base64)</h3><pre><code>function filetoblob(file) {
  return new Promise((resolve, reject) =&gt; {
    var reader = new FileReader();
    reader.readAsDataURL(file);
    reader.onload = function (e) {
      resolve(reader.result)
    }
    reader.onerror = function (e) {
      resolve(reader.result)
    }
  })
}
</code></pre><h3 id="dataURL转File"><a href="#dataURL转File" class="headerlink" title="dataURL转File"></a>dataURL转File</h3><pre><code>function dataURLtoFile(dataurl, filename) {
    var arr = dataurl.split(&apos;,&apos;), mime = arr[0].match(/:(.*?);/)[1],
        bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);
    while(n--){
        u8arr[n] = bstr.charCodeAt(n);
    }
    return new File([u8arr], filename, {type:mime});
}
</code></pre><h3 id="blob转objectURL"><a href="#blob转objectURL" class="headerlink" title="blob转objectURL"></a>blob转objectURL</h3><pre><code>window.URL.createObjectURL(blob)
</code></pre><h3 id="objectURL转img"><a href="#objectURL转img" class="headerlink" title="objectURL转img"></a>objectURL转img</h3><pre><code>srctoimg(src)
</code></pre><h3 id="objectURL-url-转blob"><a href="#objectURL-url-转blob" class="headerlink" title="objectURL(url)转blob"></a>objectURL(url)转blob</h3><pre><code>functionURLtoblob(){
    return new Promise((resolve, reject) =&gt; {
      const xhr = new XMLHttpRequest()
      xhr.open(&apos;GET&apos;, input)
      xhr.responseType = &apos;blob&apos;
      xhr.onload = () =&gt; {
        if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) {
          resolve(xhr.response)
        } else {
          reject(xhr.statusText)
        }
      }
      xhr.onerror = () =&gt; reject(xhr.statusText)
      xhr.send()
    })
  }
}
</code></pre><h3 id="objectURL-url-转arraybuffer，当服务端传递二级制数据时使用"><a href="#objectURL-url-转arraybuffer，当服务端传递二级制数据时使用" class="headerlink" title="objectURL(url)转arraybuffer，当服务端传递二级制数据时使用"></a>objectURL(url)转arraybuffer，当服务端传递二级制数据时使用</h3><pre><code>functionURLtoblob(){
    return new Promise((resolve, reject) =&gt; {
      const xhr = new XMLHttpRequest()
      xhr.open(&apos;GET&apos;, input)
      xhr.responseType = &apos;arraybuffer&apos;
      xhr.onload = () =&gt; {
        if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) {
          resolve(xhr.response)
        } else {
          reject(xhr.statusText)
        }
      }
      xhr.onerror = () =&gt; reject(xhr.statusText)
      xhr.send()
    })
  }
}
</code></pre><h3 id="FormData设置blob"><a href="#FormData设置blob" class="headerlink" title="FormData设置blob"></a>FormData设置blob</h3><pre><code>function appendBlob(blob){
 var fd = new FormData();
 fd.append(&quot;image&quot;, blob, &quot;image.png&quot;);
 return fd
}
</code></pre><h3 id="Uint8ClampedArray-Uint8Array-区别"><a href="#Uint8ClampedArray-Uint8Array-区别" class="headerlink" title="Uint8ClampedArray Uint8Array 区别"></a>Uint8ClampedArray Uint8Array 区别</h3><pre><code>Uint8ClampedArray 
 1 ,它会将负数归入0，大于255的数归入255，所以取模就不用了。
 2 ,小数取整
Uint8Array
 1,Uint8Array([-23]) 等价于 new Uint8Array([ 233 ]) 
 2,四舍五入
在处理0-255无区别
</code></pre><h3 id="arraybuffer-视图-Uint8Array、Float64Array等-之slice"><a href="#arraybuffer-视图-Uint8Array、Float64Array等-之slice" class="headerlink" title="arraybuffer,视图(Uint8Array、Float64Array等)之slice"></a>arraybuffer,视图(Uint8Array、Float64Array等)之slice</h3><p>buf返回buf<br>视图返回视图<br>1,分配内存<br>2，拷贝数据</p>
<h3 id="数据"><a href="#数据" class="headerlink" title="数据"></a>数据</h3><p>1,new ArrayBuffer(40)<br>2,new Uint8Array( [ 1, 2, 3, 4 ] )<br>3,Array.from(uint8Array);</p>
<h3 id="视图参数"><a href="#视图参数" class="headerlink" title="视图参数"></a>视图参数</h3><p>var v3 = new Int16Array(buf, 2, 2);<br>第一个参数：视图对应的底层ArrayBuffer对象，该参数是必需的。<br>第二个参数：视图开始的字节序号，默认从0开始。<br>第三个参数：视图包含的数据个数，默认直到本段内存区域结束。</p>
<p>视图.buffer 获取缓冲区</p>
<h3 id="视图对象DataView"><a href="#视图对象DataView" class="headerlink" title="视图对象DataView"></a>视图对象DataView</h3><pre><code>var buffer = new ArrayBuffer(24);
var dv = new DataView(buffer);
// 从第1个字节读取一个8位无符号整数
var v1 = dv.getUint8(0);
// 从第2个字节读取一个16位无符号整数
var v2 = dv.getUint16(1); 
// 从第4个字节读取一个16位无符号整数
var v3 = dv.getUint16(3);

setInt8：写入1个字节的8位整数。
setUint8：写入1个字节的8位无符号整数。
setInt16：写入2个字节的16位整数。
setUint16：写入2个字节的16位无符号整数。
setInt32：写入4个字节的32位整数。
setUint32：写入4个字节的32位无符号整数。
setFloat32：写入4个字节的32位浮点数。
setFloat64：写入8个字节的64位浮点数。

// 在第1个字节，以大端字节序写入值为25的32位整数
dv.setInt32(0, 25, false); 
// 在第5个字节，以大端字节序写入值为25的32位整数
dv.setInt32(4, 25); 
// 在第9个字节，以小端字节序写入值为2.5的32位浮点数
dv.setFloat32(8, 2.5, true);
</code></pre><h3 id="实现atob-string-转-base64-window-atob"><a href="#实现atob-string-转-base64-window-atob" class="headerlink" title="实现atob(string 转 base64) window.atob"></a>实现atob(string 转 base64) window.atob</h3><pre><code>function _atob(s) {
  var base64hash = &apos;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&apos;;
  s = s.replace(/\s|=/g, &apos;&apos;);
  var cur,
    prev,
    mod,
    i = 0,
    result = [];
  while (i &lt; s.length) {
    cur = base64hash.indexOf(s.charAt(i));
    mod = i % 4;
    switch (mod) {
      case 0:
        //TODO
        break;
      case 1:
        result.push(String.fromCharCode(prev &lt;&lt; 2 | cur &gt;&gt; 4));
        break;
      case 2:
        result.push(String.fromCharCode((prev &amp; 0x0f) &lt;&lt; 4 | cur &gt;&gt; 2));
        break;
      case 3:
        result.push(String.fromCharCode((prev &amp; 3) &lt;&lt; 6 | cur));
        break;
    }
    prev = cur;
    i++;
  }
  return result.join(&apos;&apos;);
}
</code></pre><h3 id="实现btoa-base64-转-string-window-btoa"><a href="#实现btoa-base64-转-string-window-btoa" class="headerlink" title="实现btoa(base64 转 string) window.btoa"></a>实现btoa(base64 转 string) window.btoa</h3><pre><code>function _btoa(s) {
  var base64hash = &apos;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&apos;;
  if (/([^\u0000-\u00ff])/.test(s)) {
    throw new Error(&apos;INVALID_CHARACTER_ERR&apos;);
  }
  var i = 0,
    prev,
    ascii,
    mod,
    result = [];
  while (i &lt; s.length) {
    ascii = s.charCodeAt(i);
    mod = i % 3;
    switch (mod) {
      // 第一个6位只需要让8位二进制右移两位
      case 0:
        result.push(base64hash.charAt(ascii &gt;&gt; 2));
        break;
      //第二个6位 = 第一个8位的后两位 + 第二个8位的前4位
      case 1:
        result.push(base64hash.charAt((prev &amp; 3) &lt;&lt; 4 | (ascii &gt;&gt; 4)));
        break;
      //第三个6位 = 第二个8位的后4位 + 第三个8位的前2位
      //第4个6位 = 第三个8位的后6位
      case 2:
        result.push(base64hash.charAt((prev &amp; 0x0f) &lt;&lt; 2 | (ascii &gt;&gt; 6)));
        result.push(base64hash.charAt(ascii &amp; 0x3f));
        break;
    }
    prev = ascii;
    i++;
  }
  // 循环结束后看mod, 为0 证明需补3个6位，第一个为最后一个8位的最后两位后面补4个0。另外两个6位对应的是异常的“=”；
  // mod为1，证明还需补两个6位，一个是最后一个8位的后4位补两个0，另一个对应异常的“=”
  if (mod == 0) {
    result.push(base64hash.charAt((prev &amp; 3) &lt;&lt; 4));
    result.push(&apos;==&apos;);
  } elseif (mod == 1) {
    result.push(base64hash.charAt((prev &amp; 0x0f) &lt;&lt; 2));
    result.push(&apos;=&apos;);
  }
  return result.join(&apos;&apos;);
}
</code></pre><h3 id="atob-btoa-不能编码解码中文"><a href="#atob-btoa-不能编码解码中文" class="headerlink" title="atob,btoa 不能编码解码中文"></a>atob,btoa 不能编码解码中文</h3><pre><code>var str = &quot;China，中国&quot;;
window.btoa(window.encodeURIComponent(str))
//&quot;Q2hpbmElRUYlQkMlOEMlRTQlQjglQUQlRTUlOUIlQkQ=&quot;
window.decodeURIComponent(window.atob(&apos;Q2hpbmElRUYlQkMlOEMlRTQlQjglQUQlRTUlOUIlQkQ=&apos;))
//&quot;China，中国&quot;
</code></pre><h3 id="编码含义"><a href="#编码含义" class="headerlink" title="编码含义"></a>编码含义</h3><pre><code>1，区分数据部分和参数部分
2，解决中文乱码(服务端和客户端编码不一致)

escape不编码字符有69个：*，+，-，.，/，@，_，0-9，a-z，A-Z
encodeURI不编码字符有82个：!，#，$，&amp;，&apos;，(，)，*，+，,，-，.，/，:，;，=，?，@，_，~，0-9，a-z，A-Z
encodeURIComponent不编码字符有71个：!， &apos;，(，)，*，-，.，_，~，0-9，a-z，A-Z
</code></pre><h3 id="内存模型"><a href="#内存模型" class="headerlink" title="内存模型"></a>内存模型</h3><blockquote>
<p>JS内存空间分为栈(stack)、堆(heap)、池(一般也会归类为栈中)。 其中栈存放变量，堆存放复杂对象，池存放常量。</p>
</blockquote>
<h4 id="内存的生命周期"><a href="#内存的生命周期" class="headerlink" title="内存的生命周期"></a>内存的生命周期</h4><p> 内存分配 — 内存使用 — 内存回收</p>
<h4 id="内存回收算法"><a href="#内存回收算法" class="headerlink" title="内存回收算法"></a>内存回收算法</h4><ul>
<li>引用计数算法</li>
</ul>
<p>存在一个致命的问题：循环引用。如果两个对象相互引用，尽管他们已不再使用，垃圾回收器不会进行回收，导致内存泄露。</p>
<ul>
<li>标记清除算法</li>
</ul>
<p>标记清除算法将“不再使用的对象”定义为“无法达到的对象”。从根部（在JS中就是全局对象）出发定时扫描内存中的对象，凡是能从根部到达的对象，都是还需要使用的。那些无法由根部出发触及到的对象被标记为不再使用，稍后进行回收。<br>内存泄漏</p>
<h4 id="内存泄漏的识别方法"><a href="#内存泄漏的识别方法" class="headerlink" title="内存泄漏的识别方法"></a>内存泄漏的识别方法</h4><ul>
<li>浏览器方法</li>
<li>命令行方法</li>
<li>WeakMap（ES6）</li>
</ul>
<h3 id="判断字节长度"><a href="#判断字节长度" class="headerlink" title="判断字节长度"></a>判断字节长度</h3><p><img src="/2015/01/01/JS原生常用API大全/10.png" alt></p>
<h3 id="破解循环引用"><a href="#破解循环引用" class="headerlink" title="破解循环引用"></a>破解循环引用</h3><p><a href="https://segmentfault.com/a/1190000016672263" target="_blank" rel="noopener">深拷贝的终极探索,破解循环引用（99%的人都不知道）</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Uncaught TypeError: Converting circular structure to JSON</span><br><span class="line">    at JSON.stringify (&lt;anonymous&gt;)</span><br><span class="line">    at mainctrl.js:234</span><br><span class="line">    at Object.getUser (api.js:247)</span><br><span class="line">    at mainctrl.js:228</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// Demo: Circular reference</span><br><span class="line">var o = &#123;&#125;;</span><br><span class="line">o.o = o;</span><br><span class="line"></span><br><span class="line">// Note: cache should not be re-used by repeated calls to JSON.stringify.</span><br><span class="line">var cache = [];</span><br><span class="line">JSON.stringify(o, function(key, value) &#123;</span><br><span class="line">    if (typeof value === &apos;object&apos; &amp;&amp; value !== null) &#123;</span><br><span class="line">        if (cache.indexOf(value) !== -1) &#123;</span><br><span class="line">            // Circular reference found, discard key</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        // Store value in our collection</span><br><span class="line">        cache.push(value);</span><br><span class="line">    &#125;</span><br><span class="line">    return value;</span><br><span class="line">&#125;);</span><br><span class="line">cache = null;</span><br></pre></td></tr></table></figure>
<h3 id="JPG、GIF、PNG和BMP格式的图片各有什么优点和缺点"><a href="#JPG、GIF、PNG和BMP格式的图片各有什么优点和缺点" class="headerlink" title="JPG、GIF、PNG和BMP格式的图片各有什么优点和缺点"></a>JPG、GIF、PNG和BMP格式的图片各有什么优点和缺点</h3><h4 id="都说-WebP-厉害，究竟厉害在哪里？"><a href="#都说-WebP-厉害，究竟厉害在哪里？" class="headerlink" title="都说 WebP 厉害，究竟厉害在哪里？"></a><a href="https://www.cnblogs.com/upyun/p/7813319.html" target="_blank" rel="noopener">都说 WebP 厉害，究竟厉害在哪里？</a></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">BMP：优点（无损压缩，图质最好），缺点（文件太大，不利于网络传输）</span><br><span class="line">GIF：优点（动画存储格式），缺点（最多256色，画质差）</span><br><span class="line">PNG：优点（可保存透明背景的图片,压缩比高，生成文件体积小,16位48位颜色存储），缺点（画质中等）</span><br><span class="line">JPG：优点（文件小，支持最高级别的压缩，利于网络传输），缺点（画质损失）</span><br><span class="line">WebP 支持动画，小 ，浏览器支持不好</span><br></pre></td></tr></table></figure>
<blockquote>
<p>BMP</p>
</blockquote>
<p>BMP（全称Bitmap）是Windows操作系统中的标准图像文件格式，可以分成两类：设备相关位图（DDB）和设备无关位图（DIB），使用非常广。它采用位映射存储格式，除了图像深度可选以外，不采用其他任何压缩，因此，BMP文件所占用的空间很大。BMP文件的图像深度可选lbit、4bit、8bit及24bit。BMP文件存储数据时，图像的扫描方式是按从左到右、从下到上的顺序。由于BMP文件格式是Windows环境中交换与图有关的数据的一种标准，因此在Windows环境中运行的图形图像软件都支持BMP图像格式。</p>
<blockquote>
<p>GIF</p>
</blockquote>
<p>GIF文件的数据，是一种基于LZW算法的连续色调的无损压缩格式。其压缩率一般在50%左右，它不属于任何应用程序。目前几乎所有相关软件都支持它，公共领域有大量的软件在使用GIF图像文件。GIF图像文件的数据是经过压缩的，而且是采用了可变长度等压缩算法。GIF格式的另一个特点是其在一个GIF文件中可以存多幅彩色图像，如果把存于一个文件中的多幅图像数据逐幅读出并显示到屏幕上，就可构成一种最简单的动画。</p>
<blockquote>
<p>PNG</p>
</blockquote>
<p>PNG图像文件存储格式，其设计目的是试图替代GIF和TIFF文件格式，同时增加一些GIF文件格式所不具备的特性。PNG用来存储灰度图像时，灰度图像的深度可多到16位，存储彩色图像时，彩色图像的深度可多到48位，并且还可存储多到16位的α通道数据。PNG使用从LZ77派生的无损数据压缩算法，一般应用于JAVA程序、网页或S60程序中，原因是它压缩比高，生成文件体积小。</p>
<blockquote>
<p>JPG</p>
</blockquote>
<p>JPG全名是JPEG。JPEG图片以 24 位颜色存储单个位图。JPEG 是与平台无关的格式，支持最高级别的压缩，不过，这种压缩是有损耗的。渐近式 JPEG 文件支持交错。</p>
<hr>
<h3 id="URL-createObjectURL-FileReader上传图片预览"><a href="#URL-createObjectURL-FileReader上传图片预览" class="headerlink" title="URL.createObjectURL,FileReader上传图片预览"></a>URL.createObjectURL,FileReader上传图片预览</h3><h4 id="js图片前端预览之-filereader-和-window-URL-createObjectURL"><a href="#js图片前端预览之-filereader-和-window-URL-createObjectURL" class="headerlink" title="js图片前端预览之 filereader 和 window.URL.createObjectURL"></a><a href="https://www.cnblogs.com/saysmy/p/5626337.html" target="_blank" rel="noopener">js图片前端预览之 filereader 和 window.URL.createObjectURL</a></h4><p>URL.createObjectURL() 静态方法会创建一个 DOMString，其中包含一个表示参数中给出的对象的URL。这个 URL 的生命周期和创建它的窗口中的 document 绑定。这个新的URL 对象表示指定的 File 对象或 Blob 对象。<br>URL.createObjectURL(blob)和FileReader.readAsDataURL(file)很相似：</p>
<p>区别</p>
<ul>
<li>通过FileReader.readAsDataURL(file)可以获取一段data:base64的字符串</li>
<li>通过URL.createObjectURL(blob)可以获取当前文件的一个内存URL</li>
</ul>
<p>执行时机</p>
<ul>
<li>createObjectURL是同步执行（立即的）</li>
<li>FileReader.readAsDataURL是异步执行（过一段时间）</li>
</ul>
<p>内存使用</p>
<ul>
<li>createObjectURL返回一段带hash的url，并且一直存储在内存中，直到document触发了unload事件（例如：document close）或者执行revokeObjectURL来释放。</li>
<li>FileReader.readAsDataURL则返回包含很多字符的base64，并会比blob url消耗更多内存，但是在不用的时候会自动从内存中清除（通过垃圾回收机制）</li>
<li>兼容性方面两个属性都兼容ie10以上的浏览器。</li>
</ul>
<p>优劣对比：</p>
<ul>
<li>使用createObjectURL可以节省性能并更快速，只不过需要在不使用的情况下手动释放内存</li>
<li>如果不太在意设备性能问题，并想获取图片的base64，则推荐使用FileReader.readAsDataURL</li>
</ul>
<p><img src="/2015/01/01/JS原生常用API大全/001.jpg" alt><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"></span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">		&lt;title&gt;&lt;/title&gt;</span><br><span class="line">		&lt;script src=&quot;http://libs.baidu.com/jquery/2.0.0/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">	&lt;body&gt;</span><br><span class="line">		&lt;input type=&quot;file&quot; name=&quot;&quot; id=&quot;imgFile1&quot; value=&quot;&quot; /&gt;</span><br><span class="line">		&lt;div class=&quot;preview_wrap1&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">		&lt;input type=&quot;file&quot; name=&quot;&quot; id=&quot;imgFile2&quot; value=&quot;&quot; /&gt;</span><br><span class="line">		&lt;div class=&quot;preview_wrap2&quot;&gt;&lt;/div&gt;</span><br><span class="line">	&lt;/body&gt;</span><br><span class="line">	&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">		document.getElementById(&apos;imgFile1&apos;).onchange = function(e) &#123;</span><br><span class="line"></span><br><span class="line">			var ele = document.getElementById(&apos;imgFile1&apos;).files[0];</span><br><span class="line"></span><br><span class="line">			var fr = new FileReader();</span><br><span class="line">			fr.onload = function(ele) &#123;</span><br><span class="line"></span><br><span class="line">				var pvImg = new Image();</span><br><span class="line">				pvImg.src = ele.target.result;</span><br><span class="line">				pvImg.setAttribute(&apos;id&apos;, &apos;previewImg1&apos;);</span><br><span class="line"></span><br><span class="line">				$(&apos;.preview_wrap1&apos;).html(&apos;&apos;).append(pvImg);</span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line">			fr.readAsDataURL(ele);</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">	&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">		document.getElementById(&apos;imgFile2&apos;).onchange = function(e) &#123;</span><br><span class="line">			var ele = document.getElementById(&apos;imgFile2&apos;).files[0];</span><br><span class="line"></span><br><span class="line">			var createObjectURL = function(blob) &#123;</span><br><span class="line">				return window[window.webkitURL ? &apos;webkitURL&apos; : &apos;URL&apos;][&apos;createObjectURL&apos;](blob);</span><br><span class="line">			&#125;;</span><br><span class="line">			var newimgdata = createObjectURL(ele);</span><br><span class="line"></span><br><span class="line">			var pvImg = new Image();</span><br><span class="line">			pvImg.src = newimgdata;</span><br><span class="line">			pvImg.setAttribute(&apos;id&apos;, &apos;previewImg2&apos;);</span><br><span class="line"></span><br><span class="line">			$(&apos;.preview_wrap2&apos;).html(&apos;&apos;).append(pvImg);</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="字符串混淆处理"><a href="#字符串混淆处理" class="headerlink" title="字符串混淆处理"></a>字符串混淆处理</h3><ul>
<li>加强密码等敏感数据传输安全性</li>
<li>客户端加密，服务器端解密</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> softdog = <span class="built_in">require</span>(<span class="string">"softdog"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> input = &#123;</span><br><span class="line">    type: <span class="string">"password"</span>, </span><br><span class="line">    value: <span class="string">"abc731"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 客户端加密</span></span><br><span class="line"><span class="keyword">var</span> client2serverStr = softdog.encrypt(input.value);</span><br><span class="line"><span class="built_in">console</span>.log(client2serverStr);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 服务器端解密</span></span><br><span class="line"><span class="keyword">var</span> rawStr = softdog.decrypt(client2serverStr);</span><br><span class="line"><span class="built_in">console</span>.log(rawStr);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结果校验</span></span><br><span class="line"><span class="built_in">console</span>.log(rawStr === input.value);</span><br></pre></td></tr></table></figure>
<ul>
<li>特别提示<blockquote>
<p>加密|解密方法参数如果数据类型非字符串或者为空字符串，返回结果均为空字符串</p>
</blockquote>
</li>
</ul>
<h4 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h4><h5 id="softdog"><a href="#softdog" class="headerlink" title="softdog"></a><a href="https://github.com/maqing01/softdog" target="_blank" rel="noopener">softdog</a></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> * @module &#123;Object&#125; softdog 简单的字符串加密|解密，防止密码提交拦截</span><br><span class="line"> * @interface Softdog</span><br><span class="line"> * @method encrypt  ----------  字符串加密</span><br><span class="line"> * @method decrypt  ----------  字符串解密</span><br><span class="line"> */</span><br><span class="line">(function (factory) &#123;</span><br><span class="line">    if (typeof module === &quot;object&quot; &amp;&amp; typeof module.exports === &quot;object&quot;) &#123;</span><br><span class="line">        var v = factory(require, exports);</span><br><span class="line">        if (v !== undefined) module.exports = v;</span><br><span class="line">    &#125;</span><br><span class="line">    else if (typeof define === &quot;function&quot; &amp;&amp; define.amd) &#123;</span><br><span class="line">        define([&quot;require&quot;, &quot;exports&quot;], factory);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)(function (require, exports) &#123;</span><br><span class="line">    &quot;use strict&quot;;</span><br><span class="line">    // 功能函数</span><br><span class="line">    function _confuse(str, sign) &#123;</span><br><span class="line">        if (typeof str !== &apos;string&apos; || !str) &#123;</span><br><span class="line">            return &apos;&apos;;</span><br><span class="line">        &#125;</span><br><span class="line">        var newStr = &apos;&apos;;</span><br><span class="line">        for (var i = 0; i &lt; str.length; i++) &#123;</span><br><span class="line">            newStr += String.fromCharCode(str.charCodeAt(i) + sign * 2);</span><br><span class="line">        &#125;</span><br><span class="line">        return newStr;</span><br><span class="line">    &#125;</span><br><span class="line">    ;</span><br><span class="line">    var softdog = &#123;</span><br><span class="line">        encrypt: function (str) &#123;</span><br><span class="line">            return _confuse(str, 1);</span><br><span class="line">        &#125;,</span><br><span class="line">        decrypt: function (str) &#123;</span><br><span class="line">            return _confuse(str, -1);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    return softdog;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="DEMO"><a href="#DEMO" class="headerlink" title="DEMO"></a>DEMO</h4><p><img src="/2015/01/01/JS原生常用API大全/122.webp" alt></p>
<h3 id="判断是否为整数"><a href="#判断是否为整数" class="headerlink" title="判断是否为整数"></a>判断是否为整数</h3><h4 id="Number-isInteger"><a href="#Number-isInteger" class="headerlink" title="Number.isInteger()"></a><a href="http://es6.ruanyifeng.com/#docs/number#Number-parseInt-Number-parseFloat" target="_blank" rel="noopener">Number.isInteger()</a></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">以前，没想过小数取余数会怎样，比如 JS 中 3.5%2 。</span><br><span class="line">其结果为 1.5，也就是说可以用 v % 1 == 0 来判断 v 是否为整数了。</span><br><span class="line"></span><br><span class="line">ES6</span><br><span class="line">Number.isInteger()用来判断一个数值是否为整数。</span><br><span class="line"></span><br><span class="line">Number.isInteger(25) // true</span><br><span class="line">Number.isInteger(25.1) // false</span><br></pre></td></tr></table></figure>
<h3 id="css、js实现网页内容禁止选中"><a href="#css、js实现网页内容禁止选中" class="headerlink" title="css、js实现网页内容禁止选中"></a>css、js实现网页内容禁止选中</h3><p>css<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">	moz-user-select: -moz-none;</span><br><span class="line">	-moz-user-select: none;</span><br><span class="line">	-o-user-select:none;</span><br><span class="line">	-khtml-user-select:none;</span><br><span class="line">	-webkit-user-select:none;</span><br><span class="line">	-ms-user-select:none;</span><br><span class="line">	user-select:none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>通过body标签<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;body oncontextmenu=&quot;return false;&quot; onselectstart=&quot;return false&quot;&gt;</span><br><span class="line">//前面一句是禁止右键，后面一句是禁止复制。</span><br></pre></td></tr></table></figure></p>
<p>通过js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//禁止页面选择以及鼠标右键</span><br><span class="line">document.oncontextmenu=function()&#123;return false;&#125;; </span><br><span class="line">document.onselectstart=function()&#123;return false;&#125;;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/面试/" rel="tag"># 面试</a>
          
            <a href="/tags/js/" rel="tag"># js</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/01/01/原生-JS-汇总/" rel="prev" title="原生 JS 汇总">
                原生 JS 汇总 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/tx.jpg" alt="李斌">
            
              <p class="site-author-name" itemprop="name">李斌</p>
              <p class="site-description motion-element" itemprop="description">人生如逆旅     我亦是行人</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">180</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">121</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/libin1991" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://juejin.im/user/57e737f6c4c971005f6bcd8d" target="_blank" title="juejin">
                      
                        <i class="fa fa-fw fa-spinner"></i>juejin</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#用devicePixelRatio判断当前浏览器是否处于缩放状态"><span class="nav-number">1.</span> <span class="nav-text">用devicePixelRatio判断当前浏览器是否处于缩放状态</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ES6模块是编译时加载是什么意思"><span class="nav-number">2.</span> <span class="nav-text">ES6模块是编译时加载是什么意思</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#原生JS-API"><span class="nav-number">3.</span> <span class="nav-text">原生JS API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setTimeout-fn-0-的作用"><span class="nav-number">4.</span> <span class="nav-text">setTimeout(fn, 0) 的作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#深拷贝"><span class="nav-number">5.</span> <span class="nav-text">深拷贝</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#POST和GET的区别，HTTP状态码"><span class="nav-number">6.</span> <span class="nav-text">POST和GET的区别，HTTP状态码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Post-Get接口傻傻分不清？"><span class="nav-number">7.</span> <span class="nav-text">Post,Get接口傻傻分不清？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#301和302"><span class="nav-number">8.</span> <span class="nav-text">301和302</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JS返回所有子节点对象childNodes"><span class="nav-number">9.</span> <span class="nav-text">JS返回所有子节点对象childNodes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#insertBefore-插入节点（父节点内容的最前面）"><span class="nav-number">10.</span> <span class="nav-text">insertBefore()插入节点（父节点内容的最前面）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Element-matches-精确匹配"><span class="nav-number">11.</span> <span class="nav-text">Element.matches 精确匹配</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#移动端touch事件-区分webkit-和-winphone"><span class="nav-number">12.</span> <span class="nav-text">移动端touch事件(区分webkit 和 winphone)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#全局错误监控"><span class="nav-number">13.</span> <span class="nav-text">全局错误监控</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#手动触发一个dom事件，需要3步，如果你对document-createEvent-�不是很熟悉，可以点击查看。"><span class="nav-number">14.</span> <span class="nav-text">手动触发一个dom事件，需要3步，如果你对document.createEvent,�不是很熟悉，可以点击查看。</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取元素的绝对位置"><span class="nav-number">15.</span> <span class="nav-text">获取元素的绝对位置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#动画结束时事件"><span class="nav-number">16.</span> <span class="nav-text">动画结束时事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解决键盘弹出遮挡："><span class="nav-number">17.</span> <span class="nav-text">解决键盘弹出遮挡：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#单个for循环实现排序："><span class="nav-number">18.</span> <span class="nav-text">单个for循环实现排序：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Object-assign实现"><span class="nav-number">19.</span> <span class="nav-text">Object.assign实现:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JavaScript中巧用位运算"><span class="nav-number">20.</span> <span class="nav-text">JavaScript中巧用位运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#将颜色从RGA转换为Hex格式"><span class="nav-number">21.</span> <span class="nav-text">将颜色从RGA转换为Hex格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常用函数："><span class="nav-number">22.</span> <span class="nav-text">常用函数：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#performance"><span class="nav-number">23.</span> <span class="nav-text">performance</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cookie"><span class="nav-number">24.</span> <span class="nav-text">Cookie</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsonp"><span class="nav-number">25.</span> <span class="nav-text">jsonp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#js判断DOM是否包含另一个DOM"><span class="nav-number">26.</span> <span class="nav-text">js判断DOM是否包含另一个DOM</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#回到顶部带动画"><span class="nav-number">27.</span> <span class="nav-text">回到顶部带动画</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用js唤起Native下的App"><span class="nav-number">28.</span> <span class="nav-text">使用js唤起Native下的App</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#高阶函数"><span class="nav-number">29.</span> <span class="nav-text">高阶函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#add-2-3-add-2-3-输出5"><span class="nav-number">29.1.</span> <span class="nav-text">add(2)(3)(),add(2,3)()输出5</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取CSS样式"><span class="nav-number">30.</span> <span class="nav-text">获取CSS样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Colors"><span class="nav-number">31.</span> <span class="nav-text">Colors</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#750rem"><span class="nav-number">32.</span> <span class="nav-text">750rem</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#表单验证"><span class="nav-number">33.</span> <span class="nav-text">表单验证</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#navigator帮助类"><span class="nav-number">34.</span> <span class="nav-text">navigator帮助类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#promise"><span class="nav-number">35.</span> <span class="nav-text">promise</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ES6-promise"><span class="nav-number">36.</span> <span class="nav-text">ES6 promise</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用promise手动封装ajax函数"><span class="nav-number">37.</span> <span class="nav-text">使用promise手动封装ajax函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#GET"><span class="nav-number">37.1.</span> <span class="nav-text">GET</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#POST"><span class="nav-number">37.2.</span> <span class="nav-text">POST</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二分查找-【二分查找也称折半查找-，时间复杂度：O-log2n-】"><span class="nav-number">38.</span> <span class="nav-text">二分查找  【二分查找也称折半查找 ，时间复杂度：O(log2n)】</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#排序"><span class="nav-number">39.</span> <span class="nav-text">排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#当我们-new-一个类的时候-都发生了什么"><span class="nav-number">40.</span> <span class="nav-text">当我们 new 一个类的时候 都发生了什么</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#new操作符的工作原理"><span class="nav-number">41.</span> <span class="nav-text">new操作符的工作原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Object-create-兼容实现"><span class="nav-number">42.</span> <span class="nav-text">Object.create 兼容实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#curry-将多参数函数转换为接收单一参数的函数"><span class="nav-number">43.</span> <span class="nav-text">curry 将多参数函数转换为接收单一参数的函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数节流"><span class="nav-number">44.</span> <span class="nav-text">函数节流</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#防抖动"><span class="nav-number">45.</span> <span class="nav-text">防抖动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Function的bind实现"><span class="nav-number">46.</span> <span class="nav-text">Function的bind实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数组合串联compose（koa-reduce中间件）"><span class="nav-number">47.</span> <span class="nav-text">函数组合串联compose（koa reduce中间件）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#co函数"><span class="nav-number">48.</span> <span class="nav-text">co函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如何主动中止Promise调用链"><span class="nav-number">49.</span> <span class="nav-text">如何主动中止Promise调用链</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#window-requestAnimationFrame兼容性处理"><span class="nav-number">50.</span> <span class="nav-text">window.requestAnimationFrame兼容性处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串是否符合回文规则"><span class="nav-number">51.</span> <span class="nav-text">字符串是否符合回文规则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解构-将-destructuringArray-1-2-3-4-“-a-b-c-”-gt-a-1-b-2-c-4"><span class="nav-number">52.</span> <span class="nav-text">解构:将 destructuringArray([1, [2, 3], 4], “[a, [b], c]”) =&gt; {a: 1, b: 2, c: 4}</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数组展平"><span class="nav-number">53.</span> <span class="nav-text">数组展平</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#找出数组中重复出现过的元素"><span class="nav-number">54.</span> <span class="nav-text">找出数组中重复出现过的元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#将数组中按照数字重复出现的次数进行排序"><span class="nav-number">55.</span> <span class="nav-text">将数组中按照数字重复出现的次数进行排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#移动端关闭虚拟键盘"><span class="nav-number">56.</span> <span class="nav-text">移动端关闭虚拟键盘</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解决setInterval在浏览器切换中的问题"><span class="nav-number">57.</span> <span class="nav-text">解决setInterval在浏览器切换中的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Promise-透传"><span class="nav-number">58.</span> <span class="nav-text">Promise 透传</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#不用循环，创建一个长度为-100-的数组，并且每个元素的值等于它的下标"><span class="nav-number">59.</span> <span class="nav-text">不用循环，创建一个长度为 100 的数组，并且每个元素的值等于它的下标</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#箭头函数"><span class="nav-number">60.</span> <span class="nav-text">箭头函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#异步加载的区别"><span class="nav-number">61.</span> <span class="nav-text">异步加载的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#html-触底的条件是："><span class="nav-number">62.</span> <span class="nav-text">html 触底的条件是：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#雅虎十四条优化"><span class="nav-number">63.</span> <span class="nav-text">雅虎十四条优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#微任务有两种-nextTick和then-那么这两个谁快呢？"><span class="nav-number">64.</span> <span class="nav-text">微任务有两种 nextTick和then 那么这两个谁快呢？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setTimeout第三个参数"><span class="nav-number">65.</span> <span class="nav-text">setTimeout第三个参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Object和Function之间最让人琢磨不透的"><span class="nav-number">66.</span> <span class="nav-text">Object和Function之间最让人琢磨不透的</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件上传进度提示使用Javascript的XMLHttpRequest的progress事件"><span class="nav-number">67.</span> <span class="nav-text">文件上传进度提示使用Javascript的XMLHttpRequest的progress事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#面试题"><span class="nav-number">68.</span> <span class="nav-text">面试题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LESS和SASS"><span class="nav-number">69.</span> <span class="nav-text">LESS和SASS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创造纯净的对象"><span class="nav-number">70.</span> <span class="nav-text">创造纯净的对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#将一个任意长的数字变成逗号分割的格式"><span class="nav-number">71.</span> <span class="nav-text">将一个任意长的数字变成逗号分割的格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#检测对象中属性的存在"><span class="nav-number">72.</span> <span class="nav-text">检测对象中属性的存在</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#n"><span class="nav-number">73.</span> <span class="nav-text">n!</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#斐波那契数列-1-1-2-3-5-8-13-21-34-55-89-144-…-求第n个数是多少"><span class="nav-number">74.</span> <span class="nav-text">斐波那契数列:1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, … 求第n个数是多少</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#服务端推送的几种方式"><span class="nav-number">75.</span> <span class="nav-text">服务端推送的几种方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JavaScript进阶提高必读"><span class="nav-number">76.</span> <span class="nav-text">JavaScript进阶提高必读</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JavaScript常用七种继承方案"><span class="nav-number">77.</span> <span class="nav-text">JavaScript常用七种继承方案</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JS-面试原生常用api-方法大全"><span class="nav-number">78.</span> <span class="nav-text">JS 面试原生常用api 方法大全</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JS代码手写题"><span class="nav-number">79.</span> <span class="nav-text">JS代码手写题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PM2来部署nodejs服务器永久开启"><span class="nav-number">80.</span> <span class="nav-text">PM2来部署nodejs服务器永久开启</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JavaScript设计模式"><span class="nav-number">81.</span> <span class="nav-text">JavaScript设计模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#URL-解析"><span class="nav-number">82.</span> <span class="nav-text">URL 解析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JavaScript专题"><span class="nav-number">83.</span> <span class="nav-text">JavaScript专题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据结构"><span class="nav-number">84.</span> <span class="nav-text">数据结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#轻松理解JavaScript原型及原型链"><span class="nav-number">85.</span> <span class="nav-text">轻松理解JavaScript原型及原型链</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#H5-移动调试全攻略"><span class="nav-number">86.</span> <span class="nav-text">H5 移动调试全攻略</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JS-面试原生常用api-方法大全-1"><span class="nav-number">87.</span> <span class="nav-text">JS 面试原生常用api 方法大全</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#javascript-原生常用API大全"><span class="nav-number">88.</span> <span class="nav-text">javascript 原生常用API大全</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#preload、prefetch"><span class="nav-number">89.</span> <span class="nav-text">preload、prefetch</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#defer和async"><span class="nav-number">89.1.</span> <span class="nav-text">defer和async</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#preload和refetch"><span class="nav-number">90.</span> <span class="nav-text">preload和refetch</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Subresource和Prerender"><span class="nav-number">90.1.</span> <span class="nav-text">Subresource和Prerender</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Axios拦截器"><span class="nav-number">91.</span> <span class="nav-text">Axios拦截器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JavaScript的值传递和引用传递"><span class="nav-number">92.</span> <span class="nav-text">*JavaScript的值传递和引用传递</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSONP-【JSONP百度搜索框】"><span class="nav-number">93.</span> <span class="nav-text">JSONP 【JSONP百度搜索框】</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Math-round-，Math-ceil-，Math-floor-的区别"><span class="nav-number">94.</span> <span class="nav-text">Math.round()，Math.ceil()，Math.floor()的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Math-random-函数生成n到m间的随机数字"><span class="nav-number">95.</span> <span class="nav-text">Math.random()函数生成n到m间的随机数字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ES6事件总线-EventBus"><span class="nav-number">96.</span> <span class="nav-text">ES6事件总线 EventBus</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JS全排列-【全排列是一种时间复杂度为：O-n-的算法】"><span class="nav-number">97.</span> <span class="nav-text">JS全排列  【全排列是一种时间复杂度为：O(n!)的算法】</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#一年半经验，百度、有赞、阿里面试总结"><span class="nav-number">98.</span> <span class="nav-text">一年半经验，百度、有赞、阿里面试总结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2018-大厂高级前端面试题汇总"><span class="nav-number">99.</span> <span class="nav-text">2018 大厂高级前端面试题汇总</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Google-Chrome可跨域模式"><span class="nav-number">100.</span> <span class="nav-text">Google Chrome可跨域模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#v-for-循环-index的传值问题"><span class="nav-number">101.</span> <span class="nav-text">v-for 循环 index的传值问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vue文件的一个小细节"><span class="nav-number">102.</span> <span class="nav-text">.vue文件的一个小细节</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#由浏览器端判断是否支持WebP格式"><span class="nav-number">103.</span> <span class="nav-text">由浏览器端判断是否支持WebP格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#src转img"><span class="nav-number">104.</span> <span class="nav-text">src转img</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#img转canvas"><span class="nav-number">105.</span> <span class="nav-text">img转canvas</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ImageData转canvas"><span class="nav-number">106.</span> <span class="nav-text">ImageData转canvas</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#canvas转ImageData"><span class="nav-number">107.</span> <span class="nav-text">canvas转ImageData</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#canvas像素操作"><span class="nav-number">108.</span> <span class="nav-text">canvas像素操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#canava转DataURL-base64"><span class="nav-number">109.</span> <span class="nav-text">canava转DataURL(base64)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DataURL-base64-转blob"><span class="nav-number">110.</span> <span class="nav-text">DataURL(base64)转blob</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#file转arrayBuffer"><span class="nav-number">111.</span> <span class="nav-text">file转arrayBuffer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#file转blob"><span class="nav-number">112.</span> <span class="nav-text">file转blob</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#blob-arraybuffer-转file"><span class="nav-number">113.</span> <span class="nav-text">(blob,arraybuffer)转file</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#file-blob-转DataURL-base64"><span class="nav-number">114.</span> <span class="nav-text">file(blob)转DataURL(base64)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dataURL转File"><span class="nav-number">115.</span> <span class="nav-text">dataURL转File</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#blob转objectURL"><span class="nav-number">116.</span> <span class="nav-text">blob转objectURL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#objectURL转img"><span class="nav-number">117.</span> <span class="nav-text">objectURL转img</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#objectURL-url-转blob"><span class="nav-number">118.</span> <span class="nav-text">objectURL(url)转blob</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#objectURL-url-转arraybuffer，当服务端传递二级制数据时使用"><span class="nav-number">119.</span> <span class="nav-text">objectURL(url)转arraybuffer，当服务端传递二级制数据时使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FormData设置blob"><span class="nav-number">120.</span> <span class="nav-text">FormData设置blob</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Uint8ClampedArray-Uint8Array-区别"><span class="nav-number">121.</span> <span class="nav-text">Uint8ClampedArray Uint8Array 区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#arraybuffer-视图-Uint8Array、Float64Array等-之slice"><span class="nav-number">122.</span> <span class="nav-text">arraybuffer,视图(Uint8Array、Float64Array等)之slice</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据"><span class="nav-number">123.</span> <span class="nav-text">数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#视图参数"><span class="nav-number">124.</span> <span class="nav-text">视图参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#视图对象DataView"><span class="nav-number">125.</span> <span class="nav-text">视图对象DataView</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现atob-string-转-base64-window-atob"><span class="nav-number">126.</span> <span class="nav-text">实现atob(string 转 base64) window.atob</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现btoa-base64-转-string-window-btoa"><span class="nav-number">127.</span> <span class="nav-text">实现btoa(base64 转 string) window.btoa</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#atob-btoa-不能编码解码中文"><span class="nav-number">128.</span> <span class="nav-text">atob,btoa 不能编码解码中文</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#编码含义"><span class="nav-number">129.</span> <span class="nav-text">编码含义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#内存模型"><span class="nav-number">130.</span> <span class="nav-text">内存模型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#内存的生命周期"><span class="nav-number">130.1.</span> <span class="nav-text">内存的生命周期</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#内存回收算法"><span class="nav-number">130.2.</span> <span class="nav-text">内存回收算法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#内存泄漏的识别方法"><span class="nav-number">130.3.</span> <span class="nav-text">内存泄漏的识别方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#判断字节长度"><span class="nav-number">131.</span> <span class="nav-text">判断字节长度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#破解循环引用"><span class="nav-number">132.</span> <span class="nav-text">破解循环引用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JPG、GIF、PNG和BMP格式的图片各有什么优点和缺点"><span class="nav-number">133.</span> <span class="nav-text">JPG、GIF、PNG和BMP格式的图片各有什么优点和缺点</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#都说-WebP-厉害，究竟厉害在哪里？"><span class="nav-number">133.1.</span> <span class="nav-text">都说 WebP 厉害，究竟厉害在哪里？</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#URL-createObjectURL-FileReader上传图片预览"><span class="nav-number">134.</span> <span class="nav-text">URL.createObjectURL,FileReader上传图片预览</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#js图片前端预览之-filereader-和-window-URL-createObjectURL"><span class="nav-number">134.1.</span> <span class="nav-text">js图片前端预览之 filereader 和 window.URL.createObjectURL</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串混淆处理"><span class="nav-number">135.</span> <span class="nav-text">字符串混淆处理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Code"><span class="nav-number">135.1.</span> <span class="nav-text">Code</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#softdog"><span class="nav-number">135.1.1.</span> <span class="nav-text">softdog</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DEMO"><span class="nav-number">135.2.</span> <span class="nav-text">DEMO</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#判断是否为整数"><span class="nav-number">136.</span> <span class="nav-text">判断是否为整数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Number-isInteger"><span class="nav-number">136.1.</span> <span class="nav-text">Number.isInteger()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#css、js实现网页内容禁止选中"><span class="nav-number">137.</span> <span class="nav-text">css、js实现网页内容禁止选中</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">李斌</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

  
  <!--
  	描述：点击红心
  -->
  <script type="text/javascript" src="/js/src/clicklove.js"></script>
  <!--
  	描述：复制代码
  -->
  <script type="text/javascript" src="/js/src/clipboard.min.js"></script>
  <script type="text/javascript" src="/js/src/clipboard-use.js"></script>
</body>
</html>


