<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="React,">










<meta name="description" content="由于React的简陋 【什么都没有】的API的设计，在React组件使用过渡动画十分困难,当然可以用 react-transition-group  ,不过不好用啊！  相比Vue官方的过渡组件transition 组件就十分强大，很贴心 ，确切的说真香！ 鉴于React什么都没有,什么都需要你自己搞 的情况下,在这里就研究下React的过渡组件的实现…   my-React-Transition">
<meta name="keywords" content="React">
<meta property="og:type" content="article">
<meta property="og:title" content="写一个类似Vue的Transition的React组件">
<meta property="og:url" content="http://yoursite.com/2019/06/09/写一个类似Vue的Transition的React组件/index.html">
<meta property="og:site_name" content="舞动乾坤">
<meta property="og:description" content="由于React的简陋 【什么都没有】的API的设计，在React组件使用过渡动画十分困难,当然可以用 react-transition-group  ,不过不好用啊！  相比Vue官方的过渡组件transition 组件就十分强大，很贴心 ，确切的说真香！ 鉴于React什么都没有,什么都需要你自己搞 的情况下,在这里就研究下React的过渡组件的实现…   my-React-Transition">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2019/06/09/写一个类似Vue的Transition的React组件/1.gif">
<meta property="og:updated_time" content="2019-06-12T15:09:48.462Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="写一个类似Vue的Transition的React组件">
<meta name="twitter:description" content="由于React的简陋 【什么都没有】的API的设计，在React组件使用过渡动画十分困难,当然可以用 react-transition-group  ,不过不好用啊！  相比Vue官方的过渡组件transition 组件就十分强大，很贴心 ，确切的说真香！ 鉴于React什么都没有,什么都需要你自己搞 的情况下,在这里就研究下React的过渡组件的实现…   my-React-Transition">
<meta name="twitter:image" content="http://yoursite.com/2019/06/09/写一个类似Vue的Transition的React组件/1.gif">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/06/09/写一个类似Vue的Transition的React组件/">





  <title>写一个类似Vue的Transition的React组件 | 舞动乾坤</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband">
    	<div class="eevee"><div class="body"><div class="head"><div class="ears"><div class="ear"><div class="lobe"></div></div><div class="ear"><div class="lobe"></div></div></div><div class="face"><div class="eyes"><div class="eye"><div class="eyelid"></div></div><div class="eye"><div class="eyelid"></div></div></div><div class="nose"></div><div class="mouth"></div></div></div><div class="chest"><div class="fur"><div class="patch"></div></div><div class="fur"><div class="patch"></div></div><div class="fur"><div class="patch"></div></div></div><div class="legs"><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div></div><div class="tail"><div class="tail"><div class="tail"><div class="tail"><div class="tail"><div class="tail -end"></div></div></div></div></div></div></div></div>
    </div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
    	<div id="sky">
				<div id="background" class="container">
			<!-- svg file -->
			<svg id="svgout" height="100%" width="100%" viewbox="0 0 550 400">
				<defs>
					<g id="bottomShadow">
						<path fill="#000000" stroke="none" d="
		M 270.5 225.95
		L 127.35 316.65 266.8 400 409.6 309.25 270.5 225.95 Z"/>
					</g>
					<g id="Layer52_0_FILL">
						<path class="topGrass" fill="#B9D668" stroke="none" d="
	M 397.85 229.3
	L 397.85 225.6 269.85 152 135.75 228.6 135.75 233.65 262.1 306.55 397.85 229.3 Z"/>
					</g>
					<g id="Layer51_0_FILL">
						<path class="leftSideGrass" fill="#6E9E4F" stroke="none" d="
	M 135.1 229.95
	L 135.1 256.85 262.1 328.4 262.1 301.85 135.1 229.95 Z"/>
					</g>
					<g id="Layer50_0_FILL">
						<path class="rightGrassTop" fill="#8CB154" stroke="none" d="
	M 397.85 225.95
	L 395.8 225.95 261.75 301.55 261.75 328.4 397.85 251.15 397.85 225.95 Z"/>
					</g>
					<g id="Layer48_0_FILL">
						<path class="crustLeftTop" fill="#955541" stroke="none" d="
	M 135.45 282.4
	L 135.75 298.15 262.1 372.1 261.75 355.65 135.45 282.4 Z"/>
					</g>
					<g id="Layer47_0_FILL">
						<path class="middleLeftCrust" fill="#C77E61" stroke="none" d="
	M 135.1 270.3
	L 135.1 283.05 275.9 364.35 271.85 348.9 135.1 270.3 Z"/>
					</g>
					<g id="Layer46_0_FILL">
						<path class="crustLeftTop" fill="#955541" stroke="none" d="
	M 135.1 255.15
	L 135.1 270.3 262.1 343.55 262.1 328.05 135.1 255.15 Z"/>
					</g>
					<g id="Layer45_0_FILL">
						<path class="topRightCrust" fill="#A47237" stroke="none" d="
	M 397.5 294.5
	L 397.5 277 261.75 355.3 261.75 372.75 397.5 294.5 Z"/>
					</g>
					<g id="Layer44_0_FILL">
						<path class="middleRightCrust" fill="#C89451" stroke="none" d="
	M 397.5 269.95
	L 397.15 266.6 262.1 343.2 262.1 355.95 397.5 279.7 397.5 269.95 Z"/>
					</g>
					<g id="Layer43_0_FILL">
						<path class="topRightCrust" fill="#A47237" stroke="none" d="
	M 397.5 266.6
	L 397.5 250.45 261.75 328.4 261.75 343.85 397.5 266.6 Z"/>
					</g>
					<g id="Layer41_0_FILL">
						<path class="greyRoad" fill="#B2B2B1" stroke="none" d="
	M 295.05 283.05
	Q 299.05 280.35 308.45 275.3 317.85 269.95 323.6 266.9
	L 268.8 233.65 338.05 191.35 309.15 174.55 177.75 254.5
	Q 191.55 262.2 198.25 266.25 204.65 269.95 209.7 271.95
	L 241.6 250.45 295.05 283.05 Z"/>
					</g>
					<g id="Layer40_0_FILL">
						<path fill="#FFFFFF" stroke="none" d="
	M 199.95 256.85
	Q 194.55 261.2 191.9 262.2
	L 194.9 263.9 200.95 259.2 199.95 256.85
	M 225.8 243.75
	L 224.8 241.75 211.05 250.8 212.05 252.8 225.8 243.75
	M 308.15 275.65
	L 296.7 266.6 295.35 268.6 306.8 277.7 308.15 275.65
	M 275.9 253.5
	L 274.55 255.5 285.95 264.55 287.3 262.55 275.9 253.5
	M 251.7 227.3
	L 250.7 225.25 236.9 234.35 237.9 236.35 251.7 227.3
	M 257.05 240.7
	L 254.05 240.7 268.8 249.8 269.5 247.75 257.05 240.7
	M 277.2 207.8
	L 263.45 216.85 264.45 218.9 278.25 209.8 277.2 207.8
	M 305.1 192.65
	L 304.1 190.65 290.3 199.75 291.35 201.75 305.1 192.65 Z"/>
					</g>
					<g id="Layer38_0_FILL">
						<path class="frontFascia" fill="#ECB27B" stroke="none" d="
	M 359.25 187.95
	L 346.4 174.95 333.85 202.9 359.25 187.95 Z"/>
					</g>
					<g id="Layer37_0_FILL">
						<path class="frontWall" fill="#EFA258" stroke="none" d="
	M 334 201.05
	L 334.35 232 359.2 217.55 359.25 187.95 334 201.05 Z"/>
					</g>
					<g id="Layer36_0_FILL">
						<path class="leftWall" fill="#C57F42" stroke="none" d="
	M 334.35 232.3
	L 334.35 205.1 305.1 191.35 305.1 216.85 334.35 232.3 Z"/>
					</g>
					<g id="Layer35_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 329.7 167.9
	L 331.05 167.9 344.55 176.7 347.85 176.7 363 192.25 363.15 189.55 350.65 176.7 350.55 176.7 334.25 167.5 334.25 159.1 329.7 159.1 329.7 164.9 322.65 160.95 322.3 162.15 329.7 167 329.7 167.9 Z"/>
					</g>
					<g id="Layer34_0_FILL">
						<path class="leftRoof" fill="#F2563B" stroke="none" d="
	M 334.05 207.05
	L 350.65 176.7 322.1 160.45 302.1 192.05 334.05 207.05 Z"/>
					</g>
					<g id="Layer30_0_FILL">
						<path id="windowFour" class="windows" stroke="none" fill="#975A42" d="
	M 341.35 203.3
	Q 340.9 203.45 340.5 203.8 340.1 204.2 339.85 204.75 339.7 205 339.7 205.3 339.6 205.75 339.7 206.1 339.7 206.15 339.7 206.2 339.8 206.5 340 206.8 340.55 207.4 341.45 207.4 342.35 207.4 343 206.8 343.4 206.5 343.65 206.1 343.85 205.75 343.95 205.3 344.05 204.4 343.55 203.8 343.3 203.45 343 203.3 342.65 203.15 342.2 203.15 341.8 203.15 341.35 203.3
	M 355.85 198.45
	Q 355.8 198.2 355.6 198 355.1 197.4 354.2 197.4 353.35 197.4 352.6 198 351.85 198.65 351.7 199.55 351.7 199.7 351.7 199.85 351.6 200.5 352 201.05 352.55 201.65 353.45 201.65 354.3 201.65 355.05 201.05 355.45 200.7 355.7 200.25 355.8 200.05 355.9 199.85 355.95 199.7 355.95 199.55 356.05 198.95 355.85 198.45 Z"/>
						<path class="door" fill="#B65041" stroke="none" d="
	M 351.95 211.2
	L 351.8 211.2 346.05 215.1 346.05 225.2 351.95 221.6 351.95 211.2
	M 351.2 211.2
	L 351.35 211.2 351.35 211.1 351.2 211.2 Z"/>
					</g>
					<g>
						<path id="Layer30_0_FILL" fill="#000000" fill-opacity="1" stroke="none" d="
	M 183.7 215.3
	L 183.7 215.6
	Q 187.25 231.75 212.25 234.35
	L 183.7 215.3 Z"/>
					</g>
					<g id="Layer29_0_FILL">
						<path fill="#000000" fill-opacity="0.4" stroke="none" d="
	M 305.1 216.85
	L 305.15 217.2
	Q 309.45 233.2 334.35 232.3
	L 305.1 216.85 Z"/>
					</g>
					<g id="Layer27_0_FILL">
						<path class="vegetation" fill="#78A950" stroke="none" d="
	M 177.45 231.65
	Q 175.75 235.35 181.8 239.35 185.5 235.7 185.15 231.3 182.8 230.65 181.45 234 179.45 231.3 177.45 231.65
	M 236.9 266.6
	Q 235.2 270.3 241.25 274.3 244.95 270.6 244.65 266.25 242.3 265.6 240.95 268.95 238.9 266.25 236.9 266.6
	M 254.7 277
	Q 253.05 280.7 259.1 284.75 262.75 281.05 262.45 276.65 260.1 276 258.75 279.35 256.7 276.65 254.7 277
	M 315.5 245.75
	Q 313.5 243.05 311.5 243.4 309.8 247.1 315.85 251.15 319.55 247.45 319.2 243.05 316.85 242.4 315.5 245.75
	M 295.35 232.65
	Q 293.7 236.35 299.75 240.4 303.45 236.7 303.1 232.3 300.75 231.65 299.4 235 297.4 232.3 295.35 232.65
	M 277.2 171.85
	Q 275.55 175.55 281.6 179.55 285.3 175.85 284.95 171.5 282.6 170.85 281.25 174.2 279.25 171.5 277.2 171.85 Z"/>
					</g>
					<g id="Layer26_0_FILL">
						<path class="treeWood" fill="#AE663D" stroke="none" d="
	M 175.1 177.55
	L 172.05 177.55 172.05 191.1 159.3 172.85
	Q 154.6 171.5 172.05 195.7
	L 172.05 212.5 175.1 212.5 175.1 177.55
	M 252.7 151.35
	L 249 151.35 249 176.9 252.7 176.9 252.7 151.35 Z"/>
					</g>
					<g id="Layer25_0_FILL">
						<path class="vegetation" fill="#77A951" stroke="none" d="
	M 192.55 179.55
	Q 200.95 173.5 200.95 165.1 200.95 156.4 192.55 150 184.15 144.3 172.05 144.3 160.3 144.3 151.9 150 143.15 156.4 143.15 165.1 143.15 173.5 151.9 179.55 160.3 185.95 172.05 185.95 184.15 185.95 192.55 179.55
	M 236.25 106.65
	Q 230.2 116.05 230.2 129.15 230.2 142.25 236.25 151.35 242.3 160.75 250.7 160.75 258.75 160.75 264.8 151.35 270.85 142.25 270.85 129.15 270.85 116.05 264.8 106.65 258.75 97.6 250.7 97.6 242.3 97.6 236.25 106.65 Z"/>
					</g>
					<g id="Layer24_0_FILL">
						<path class="vegetation" fill="#77A951" stroke="none" d="
	M 158.3 221.9
	Q 160.65 221.9 161.95 220.2 163 219.55 163.3 218.55 164.65 218.9 166.35 218.9 170.05 218.9 172.4 216.2 175.1 213.85 175.1 210.15 175.1 206.45 172.4 203.75 170.05 201.4 166.35 201.4 162.65 201.4 159.95 203.75 157.6 206.45 157.6 210.15 157.6 210.8 157.6 211.15 155.95 211.5 154.6 212.5 152.9 214.15 152.9 216.55 152.9 218.9 154.6 220.2 156.25 221.9 158.3 221.9
	M 338.35 240.05
	Q 341.05 237.7 341.05 234 341.05 230.3 338.35 227.6 336 225.25 332.3 225.25 328.65 225.25 325.95 227.6 323.6 230.3 323.6 234 323.6 237.7 325.95 240.05 328.65 242.75 332.3 242.75 336 242.75 338.35 240.05 Z"/>
					</g>
					<g id="Layer22_0_FILL">
						<path class="rightRoof" fill="#D05041" stroke="none" d="
	M 220 173.85
	L 236.8 186.7 264.35 171.15 244.5 159.55 220 173.85 Z"/>
					</g>
					<g id="Layer21_0_FILL">
						<path class="leftWall" fill="#C57F42" stroke="none" d="
	M 212.25 191.35
	L 183.35 172.3 183.7 215.3 212.25 234.35 212.25 191.35 Z"/>
					</g>
					<g id="Layer20_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 192.1 149.85
	L 236.45 174.8 243.1 171.4
	Q 220.05 150.55 196.3 139.95
	L 192.1 149.85 Z"/>
					</g>
					<g id="Layer19_0_FILL">
						<path class="frontFascia" fill="#EBB17B" stroke="none" d="
	M 226.85 160.95
	L 212 190.6 229.75 192.6 239.75 172.85 226.85 160.95 Z"/>
					</g>
					<g id="Layer18_0_FILL">
						<path class="frontWall" fill="#EFA258" stroke="none" d="
	M 240.15 172.65
	L 211.9 191.6 212.25 233.65 264.35 201.7 264.35 170.8 240.8 184.45 240.15 172.65 Z"/>
					</g>
					<g id="Layer17_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 210.9 142.2
	L 205.9 142.2 205.9 152.65 210.9 152.65 210.9 142.2 Z"/>
					</g>
					<g>
						<path id="Layer16_0_FILL" class="leftRoof" fill="#F2563B" stroke="none" d="
	M 210.25 195.5
	L 227.4 160.95 195.45 141.35 177.65 175.85 210.25 195.5 Z"/>
					</g>
					<g>
						<path id="sun" fill="#E3BD0E" stroke="none" d="
	M 257.05 15.95
	Q 251.7 15.95 248 19.65 244.3 23.35 244.3 28.7 244.3 34.1 248 37.8 251.7 41.5 257.05 41.5 262.45 41.5 266.15 37.8 269.85 34.1 269.85 28.7 269.85 23.35 266.15 19.65 262.45 15.95 257.05 15.95 Z"/>
					</g>
					<g id="Layer8_0_FILL">
						<path fill="#975A42" stroke="none" d="
	M 238.45 189.65
	Q 238.295703125 189.362109375 238.05 189.1 237.35 188.3 236.2 188.3 235.05 188.3 234.15 189.1 233.3 189.9 233.2 191.05 233.1 192.2 233.8 193 234.55 193.8 235.7 193.8 236.85 193.8 237.7 193 238.1970703125 192.558203125 238.45 192 238.6552734375 191.56484375 238.7 191.05 238.7671875 190.276953125 238.45 189.65
	M 220.55 197.55
	Q 220 197.55 219.5 197.75 218.95 197.95 218.5 198.35 217.933203125 198.8833984375 217.7 199.55 217.5833984375 199.916796875 217.55 200.3 217.4923828125 200.96171875 217.7 201.5 217.852734375 201.9103515625 218.15 202.25 218.95 203.05 220.1 203.05 221.25 203.05 222.05 202.25 222.95 201.45 223.05 200.3 223.15 199.15 222.4 198.35 222.05 197.95 221.65 197.75 221.15 197.55 220.55 197.55 Z"/>
					</g>
					<g id="Layer7_0_FILL">
						<path class="door" fill="#B65041" stroke="none" d="
	M 233.55 206.75
	L 225.9 211.95 226.25 225.5 233.95 220.35 233.55 206.75 Z"/>
					</g>
					<g>
						<path id="windowOne" class="windows" fill="#975A42" stroke="none" d="
	M 188.65 198.4
	L 188.8 204.1 198.65 210.45 198.55 204.75 188.65 198.4
	M 208.45 216.8
	L 208.35 211.1 198.55 204.75 198.65 210.45 208.45 216.8
	M 188.8 204.1
	L 188.95 209.8 198.8 216.15 198.65 210.45 188.8 204.1
	M 208.6 222.5
	L 208.45 216.8 198.65 210.45 198.8 216.15 208.6 222.5 Z"/>
					</g>
					<g>
						<path id="windowThree" class="windows" fill="#975A42" stroke="none" d="
	M 311.7 214.1
	L 318.55 217.55 318.45 211.9 311.6 208.45 311.7 214.1
	M 325.4 221
	L 325.25 215.35 318.45 211.9 318.55 217.55 325.4 221
	M 318.4 206.2
	L 311.5 202.75 311.6 208.45 318.45 211.9 318.4 206.2
	M 325.25 215.35
	L 325.2 209.7 318.4 206.2 318.45 211.9 325.25 215.35 Z"/>
					</g>
					<g id="Layer2_0_FILL">
						<path class="door" fill="#B65041" stroke="none" d="
	M 259.7 183.25
	L 244.6 191.9 244.6 213.8 259.7 204.55 259.7 183.25 Z"/>
					</g>
					<path id="windowTwo" fill="#975A42" class="windows" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" d="
	M 223.05 200.3
	Q 222.95 201.45 222.05 202.25 221.25 203.05 220.1 203.05 218.95 203.05 218.15 202.25 217.852734375 201.9103515625 217.7 201.5 217.4923828125 200.96171875 217.55 200.3 217.5833984375 199.916796875 217.7 199.575 217.933203125 198.8833984375 218.5 198.35 218.95 197.95 219.5 197.75 220 197.55 220.55 197.55 221.15 197.55 221.65 197.75 222.05 197.95 222.4 198.35 223.15 199.15 223.05 200.3 Z
	M 238.7 191.05
	Q 238.6552734375 191.56484375 238.45 192 238.1970703125 192.558203125 237.7 193 236.85 193.8 235.7 193.8 234.55 193.8 233.8 193 233.1 192.2 233.2 191.05 233.3 189.9 234.15 189.1 235.05 188.3 236.2 188.3 237.35 188.3 238.05 189.1 238.295703125 189.362109375 238.45 189.65 238.7671875 190.276953125 238.7 191.05 Z"/>
					<path fill="#F2563B" stroke="none" d=" M 351.95 211.2 L 351.8 211.2 346.05 215.1 346.05 225.2 351.95 221.6 351.95 211.2 Z"/>
					<path id="Layer6_0_1_STROKES" class="windowRims" stroke="#AE663D" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" fill="none" d="
	M 198.55 204.75
	L 208.35 211.1 208.45 216.8 208.6 222.5 198.8 216.15 188.95 209.8 188.8 204.1 188.65 198.4 198.55 204.75 198.65 210.45 208.45 216.8
	M 198.8 216.15
	L 198.65 210.45 188.8 204.1"/>
					<path id="Layer5_0_1_STROKES" class="windowRims" stroke="#AE663D" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" fill="none" d="
	M 325.25 215.35
	L 325.4 221 318.55 217.55 311.7 214.1 311.6 208.45 311.5 202.75 318.4 206.2 325.2 209.7 325.25 215.35 318.45 211.9 318.55 217.55
	M 318.4 206.2
	L 318.45 211.9 311.6 208.45"/>
				</defs>
				<g id="shadow">
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use xlink:href="#bottomShadow"/>
					</g>
				</g>
				<g transform="matrix( 1, 0, 0, 1, 0,0) ">
					<use xlink:href="#sun"/>
				</g>
				<g id="earth">
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer52_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer51_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer50_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer48_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer47_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer46_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer45_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer44_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer43_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer41_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer40_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer38_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer37_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer36_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer35_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer34_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowFour"/>
						<use class="element" xlink:href="#Layer32_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer30_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer27_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer26_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer25_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer24_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer22_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer21_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer20_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer19_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer18_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer17_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer16_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer8_0_FILL"/>
						<use class="element" xlink:href="#windowTwo"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer7_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowOne"/>
						<use class="element" xlink:href="#Layer6_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowThree"/>
						<use class="element" xlink:href="#Layer5_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer2_0_FILL"/>
					</g>
				</g>
			</svg>
			<! -- End of SVG file -->
			<! -- Moon/Sun Toggle -->
			<div id="toggleButton" class="day-toggle">
				<div class="sun-icon"></div>
				<label class="switch">
            <input id="toggleCheckbox" type="checkbox">
            <div class="slider"></div>
        </label>
				<div class="cloud-icon"></div>
			</div>
			<! -- Moon/Sun Toggle -->
			<! -- End of Container -->
		</div>
			</div>
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">舞动乾坤</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">星光不问赶路人 岁月不负有心人</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/09/写一个类似Vue的Transition的React组件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="李斌">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="舞动乾坤">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">写一个类似Vue的Transition的React组件</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-09T23:22:49+08:00">
                2019-06-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>由于React的简陋 <strong>【什么都没有】</strong>的API的设计，在React组件使用过渡动画十分困难,当然可以用 <strong><a href="https://github.com/reactjs/react-transition-group" target="_blank" rel="noopener">react-transition-group</a> </strong> ,不过不好用啊！ </p>
<p>相比Vue官方的过渡组件<strong><a href="https://cn.vuejs.org/v2/guide/transitions.html" target="_blank" rel="noopener">transition 组件</a></strong>就十分强大，很贴心 ，确切的说真香！</p>
<p>鉴于React什么都没有,什么都需要你自己搞 的情况下,在这里就研究下React的过渡组件的实现…</p>
<p><img src="/2019/06/09/写一个类似Vue的Transition的React组件/1.gif" alt></p>
<h3 id="my-React-Transition-Group"><a href="#my-React-Transition-Group" class="headerlink" title=" my-React-Transition-Group "></a><a href="https://github.com/libin1991/my-React-Transition-Group" target="_blank" rel="noopener"><font color="#ff0000"><strong> my-React-Transition-Group </strong></font></a></h3><h3 id="classnames-源码"><a href="#classnames-源码" class="headerlink" title="classnames 源码"></a>classnames 源码</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> hasOwn = &#123;&#125;.hasOwnProperty;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">classNames</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> classes = [];</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">arguments</span>.length; i++) &#123;</span><br><span class="line">			<span class="keyword">var</span> arg = <span class="built_in">arguments</span>[i];</span><br><span class="line">			<span class="keyword">if</span> (!arg) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">var</span> argType = <span class="keyword">typeof</span> arg;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (argType === <span class="string">'string'</span> || argType === <span class="string">'number'</span>) &#123;</span><br><span class="line">				classes.push(arg);</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(arg)) &#123;</span><br><span class="line">				classes.push(classNames.apply(<span class="literal">null</span>, arg));</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (argType === <span class="string">'object'</span>) &#123;</span><br><span class="line">				<span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> arg) &#123;</span><br><span class="line">					<span class="keyword">if</span> (hasOwn.call(arg, key) &amp;&amp; arg[key]) &#123;</span><br><span class="line">						classes.push(key);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> classes.join(<span class="string">' '</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">module</span> !== <span class="string">'undefined'</span> &amp;&amp; <span class="built_in">module</span>.exports) &#123;</span><br><span class="line">		<span class="built_in">module</span>.exports = classNames;</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> define === <span class="string">'function'</span> &amp;&amp; <span class="keyword">typeof</span> define.amd === <span class="string">'object'</span> &amp;&amp; define.amd) &#123;</span><br><span class="line">		<span class="comment">// register as 'classnames', consistent with npm package name</span></span><br><span class="line">		define(<span class="string">'classnames'</span>, [], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> classNames;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="built_in">window</span>.classNames = classNames;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<h3 id="React-顶层-API"><a href="#React-顶层-API" class="headerlink" title="React 顶层 API"></a><a href="https://react.docschina.org/docs/react-api.html" target="_blank" rel="noopener">React 顶层 API</a></h3><h3 id="React-相关方法（API）介绍－元素与组件操作"><a href="#React-相关方法（API）介绍－元素与组件操作" class="headerlink" title="React 相关方法（API）介绍－元素与组件操作"></a><a href="https://blog.csdn.net/u013063153/article/details/52488904" target="_blank" rel="noopener">React 相关方法（API）介绍－元素与组件操作</a></h3><h3 id="React-新特性讲解及实例Context-ContextType-lazy-Suspense-错误边界（Error-boundaries）-memo"><a href="#React-新特性讲解及实例Context-ContextType-lazy-Suspense-错误边界（Error-boundaries）-memo" class="headerlink" title="React 新特性讲解及实例Context,ContextType,lazy,Suspense,错误边界（Error boundaries）,memo"></a><a href="https://juejin.im/post/5d0043915188255e780b6309#heading-1" target="_blank" rel="noopener">React 新特性讲解及实例Context,ContextType,lazy,Suspense,错误边界（Error boundaries）,memo</a></h3><hr>
<h3 id="react中实用的一些API"><a href="#react中实用的一些API" class="headerlink" title="react中实用的一些API"></a>react中实用的一些API</h3><h4 id="React-createClass"><a href="#React-createClass" class="headerlink" title="React.createClass:"></a>React.createClass:</h4><p>创建一个ReactClass（组件类），参数是一个对象且必须带有 render 属性方法，该方法必须返回一个封闭的容器（容器内可以有其它不限结构的容器）或 null/false（表示啥都不渲染）</p>
<h4 id="React-createElement"><a href="#React-createElement" class="headerlink" title="React.createElement"></a>React.createElement</h4><p>React.createElement:第一个参数是DOM,第二个是属性,第三个是值<br>创建一个指定类型的React元素，注意第三个参数children可以是任意个React元素：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">React.createElement( <span class="string">'p'</span>, <span class="literal">null</span>,</span><br><span class="line">React.createElement(<span class="string">'span'</span>, <span class="literal">null</span>, <span class="string">'Hello,'</span>),</span><br><span class="line">React.createElement(<span class="string">'span'</span>, <span class="literal">null</span>, <span class="string">'world,'</span>),</span><br><span class="line">React.createElement( Component, &#123;<span class="attr">a</span> : <span class="number">1</span>&#125;)</span><br><span class="line">)</span><br><span class="line">React.createElement(type, props, children)如:React.createElement(<span class="string">'span'</span>, <span class="literal">null</span>, <span class="string">'Hello,'</span>)</span><br></pre></td></tr></table></figure></p>
<h4 id="React-cloneElement"><a href="#React-cloneElement" class="headerlink" title="React.cloneElement:"></a>React.cloneElement:</h4><p>克隆并返回一个新的 ReactElement （内部子元素也会跟着克隆），新返回的元素会保留有旧元素的 props、ref、key，也会集成新的 props（只要在第二个参数中有定义）<br>var newSpan = React.cloneElement(span, {b:’2’}<br>要注意的是，createElement 的第一个参数必须是字符串或 ReactClass，而在 cloneElement 里第一个参数应该是 ReactElement</p>
<blockquote>
<p>React.createFactory:</p>
</blockquote>
<p>返回一个某种类型的ReactElement工厂函数，可以利用返回的函数来创建一个ReactElement(配置 props 和 children)<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = React.createFactory(Component),</span><br><span class="line">ReactElementP = p(&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;),</span><br><span class="line">div = React.createFactory(<span class="string">'div'</span>),</span><br><span class="line">ReactElementDiv = div(<span class="literal">null</span>, ReactElementP);</span><br></pre></td></tr></table></figure></p>
<h4 id="React-Children"><a href="#React-Children" class="headerlink" title="React.Children:"></a>React.Children:</h4><ol>
<li><p>React.Children.map(object children, function fn [, object context])<br>遍历子元素，映射为一个新的子元素集合（跟 ES5 的 Array.map 差不多）</p>
</li>
<li><p>React.Children.forEach(object children, function fn [, object context])<br>遍历子元素，对每一个子元素执行回调，但不像上述的 map 那样最终返回一个新的集合（跟 ES5 的 Array.forEach 差不多）</p>
</li>
<li><p>React.Children.count(object children)<br>返回子元素的总数</p>
</li>
<li><p>React.Children.only(object children)<br>返回仅有的一个子元素，否则（没有子元素或超过一个子元素）报错且不渲染任何东西：</p>
</li>
</ol>
<p>5.React.initializeTouchEvents:<br>开启或关闭 React 的触摸事件机制，传入参数 true 使 React 能处理移动设备的触摸（ touch ）事件</p>
<h4 id="React-DOM-tag"><a href="#React-DOM-tag" class="headerlink" title="React.DOM.tag:"></a>React.DOM.tag:</h4><p>常规是用于在非 JSX 下来创建 ReactElement，tag 表示相应的DOM类型（比如“div”、“p”）。另外首个参数可以定制相关的 DOM 属性（比如“name”），第二个参数表示 DOM 内的内容<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div = React.DOM.div(&#123;<span class="attr">name</span> : <span class="string">'div1'</span>&#125;, </span><br><span class="line">            <span class="string">'HELLO '</span>, </span><br><span class="line">            React.DOM.span(<span class="literal">null</span>, &lt;em&gt;WORLD&lt;<span class="regexp">/em&gt;)</span></span><br><span class="line"><span class="regexp">        );</span></span><br><span class="line"><span class="regexp">React.render(</span></span><br><span class="line"><span class="regexp">    div, document.body</span></span><br><span class="line"><span class="regexp">)</span></span><br></pre></td></tr></table></figure></p>
<p>生成结果:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">name</span>=<span class="string">"div1"</span> <span class="attr">data-reactid</span>=<span class="string">".0"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">span</span> <span class="attr">data-reactid</span>=<span class="string">".0.0"</span>&gt;</span>HELLO<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">span</span> <span class="attr">data-reactid</span>=<span class="string">".0.1"</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">em</span> <span class="attr">data-reactid</span>=<span class="string">".0.1.0"</span>&gt;</span>WORLD<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="React-isValidElement"><a href="#React-isValidElement" class="headerlink" title="React.isValidElement:"></a>React.isValidElement:</h4><p>判断参数是否一个合法的 ReactElement，并返回 Boolean 值<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Component = React.createClass(&#123;</span><br><span class="line">	render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.props.a==<span class="number">1</span> ? <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>123<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span> : <span class="literal">null</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> com = <span class="xml"><span class="tag">&lt;<span class="name">Component</span>/&gt;</span></span>,</span><br><span class="line">com2 = <span class="string">'&lt;Component/&gt;'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(React.isValidElement(com)); <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(React.isValidElement(com2)); <span class="comment">//false</span></span><br></pre></td></tr></table></figure></p>
<h4 id="React-renderToStaticMarkup"><a href="#React-renderToStaticMarkup" class="headerlink" title="React.renderToStaticMarkup:"></a>React.renderToStaticMarkup:</h4><p>类似 React.renderToString ，但只生成纯粹的HTML标记字符串，不会包含类似 data-reactid 之类的React属性，从而节省字节数<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Component = React.createClass(&#123;</span><br><span class="line">	render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.props.a==<span class="number">1</span> ? <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>123<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span> : <span class="literal">null</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> com = <span class="xml"><span class="tag">&lt;<span class="name">Component</span> <span class="attr">a</span>=<span class="string">"1"</span> /&gt;</span>,</span></span><br><span class="line"><span class="xml">comHTML = React.renderToStaticMarkup(com);</span></span><br><span class="line"><span class="xml">console.log(comHTML);  //输出“<span class="tag">&lt;<span class="name">p</span>&gt;</span>123<span class="tag">&lt;/<span class="name">p</span>&gt;</span>”</span></span><br></pre></td></tr></table></figure></p>
<h4 id="React-renderToString"><a href="#React-renderToString" class="headerlink" title="React.renderToString:"></a>React.renderToString:</h4><p>React为服务端提供的一个方法，可以直接输出 ReactElement 为 HTML 字符串，将这些标记发送（比如 res.write(HTMLString)）给客户端，可以获得更快的页面加载速度，并且有利于搜索引擎抓取页面，方便做 SEO（主要是百度不争气，谷歌早可以从内存中去抓最终生成的HTML内容了）<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Component = React.createClass(&#123;</span><br><span class="line">	render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.props.a==<span class="number">1</span> ? <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>123<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span> : <span class="literal">null</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> com = <span class="xml"><span class="tag">&lt;<span class="name">Component</span> <span class="attr">a</span>=<span class="string">"1"</span> /&gt;</span>,</span></span><br><span class="line"><span class="xml">comHTML = React.renderToString(com);</span></span><br><span class="line"><span class="xml">console.log(comHTML); //  输出“<span class="tag">&lt;<span class="name">p</span> <span class="attr">data-reactid</span>=<span class="string">".0"</span> <span class="attr">data-react-checksum</span>=<span class="string">"-2122315716"</span>&gt;</span>123<span class="tag">&lt;/<span class="name">p</span>&gt;</span>”</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="Transition-js"><a href="#Transition-js" class="headerlink" title="Transition.js"></a>Transition.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">"prop-types"</span></span><br><span class="line"><span class="keyword">import</span> classNames <span class="keyword">from</span> <span class="string">'./classnames'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./transition.css'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">noop</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Transition</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">	<span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">		className: PropTypes.string,</span><br><span class="line">		onEnter: PropTypes.func,</span><br><span class="line">		onLeave: PropTypes.func,</span><br><span class="line">		show: PropTypes.bool</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">		className: <span class="string">''</span>,</span><br><span class="line">		onEnter: noop,</span><br><span class="line">		onLeave: noop,</span><br><span class="line">		show: <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">		<span class="keyword">super</span>(props)</span><br><span class="line">		<span class="keyword">this</span>.state = &#123;</span><br><span class="line">			entering: props.show,</span><br><span class="line">			leaving: <span class="literal">false</span>,</span><br><span class="line">			visible: props.show</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	componentWillReceiveProps(nextProps) &#123;</span><br><span class="line">		<span class="keyword">if</span>(!<span class="keyword">this</span>.props.show &amp;&amp; nextProps.show) &#123;</span><br><span class="line">			<span class="keyword">this</span>.setState(&#123;</span><br><span class="line">				entering: <span class="literal">true</span>,</span><br><span class="line">				leaving: <span class="literal">false</span>,</span><br><span class="line">				visible: <span class="literal">true</span></span><br><span class="line">			&#125;)</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">this</span>.props.show &amp;&amp; !nextProps.show) &#123;</span><br><span class="line">			<span class="keyword">this</span>.setState(&#123;</span><br><span class="line">				entering: <span class="literal">false</span>,</span><br><span class="line">				leaving: <span class="literal">true</span>,</span><br><span class="line">				visible: <span class="literal">true</span></span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	componentWillUnmount() &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'&gt;&gt;&gt;&gt;&gt; componentWillUnmount'</span>)</span><br><span class="line">		<span class="keyword">this</span>.setState(&#123;</span><br><span class="line">			entering: <span class="literal">false</span>,</span><br><span class="line">			leaving: <span class="literal">false</span>,</span><br><span class="line">			visible: <span class="literal">false</span></span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	animationEnd = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">const</span> el = e.target</span><br><span class="line">		<span class="keyword">const</span> &#123;</span><br><span class="line">			onEnter,</span><br><span class="line">			onLeave</span><br><span class="line">		&#125; = <span class="keyword">this</span>.props;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">const</span> &#123;</span><br><span class="line">			entering,</span><br><span class="line">			leaving</span><br><span class="line">		&#125; = <span class="keyword">this</span>.state;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">this</span>.setState(&#123;</span><br><span class="line">			entering: <span class="literal">false</span>,</span><br><span class="line">			leaving: <span class="literal">false</span>,</span><br><span class="line">			visible: entering</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(entering) &#123;</span><br><span class="line">			onEnter &amp;&amp; onEnter(el)</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span>(leaving) &#123;</span><br><span class="line">			onLeave &amp;&amp; onLeave(el)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	getClasses() &#123;</span><br><span class="line">		<span class="keyword">const</span> &#123;</span><br><span class="line">			className</span><br><span class="line">		&#125; = <span class="keyword">this</span>.props;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">const</span> &#123;</span><br><span class="line">			entering,</span><br><span class="line">			leaving</span><br><span class="line">		&#125; = <span class="keyword">this</span>.state;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> classNames(&#123;</span><br><span class="line">			[<span class="string">`rodal-<span class="subst">$&#123;className&#125;</span>-enter`</span>]: entering,</span><br><span class="line">			[<span class="string">`rodal-<span class="subst">$&#123;className&#125;</span>-leave`</span>]: leaving</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	render() &#123;</span><br><span class="line">		<span class="keyword">const</span> &#123;</span><br><span class="line">			visible</span><br><span class="line">		&#125; = <span class="keyword">this</span>.state;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">const</span> &#123;</span><br><span class="line">			children,</span><br><span class="line">			...inProps</span><br><span class="line">		&#125; = <span class="keyword">this</span>.props;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">var</span> childrenPropsList=children.props.className||<span class="string">''</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">const</span> style = &#123;</span><br><span class="line">			display: visible ? <span class="string">''</span> : <span class="string">'none'</span></span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">const</span> child = React.Children.only(children);</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">const</span> childProps = &#123; ...inProps,</span><br><span class="line">			className: childrenPropsList+<span class="string">' '</span>+<span class="keyword">this</span>.getClasses(),</span><br><span class="line">			style: style,</span><br><span class="line">			onAnimationEnd: <span class="keyword">this</span>.animationEnd,</span><br><span class="line">			ref: <span class="function">(<span class="params">el</span>) =&gt;</span> &#123;</span><br><span class="line">				<span class="keyword">this</span>.refs = el</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">delete</span> childProps.onEnter;</span><br><span class="line">		<span class="keyword">delete</span> childProps.onLeave;</span><br><span class="line">		<span class="keyword">delete</span> childProps.show;</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		<span class="built_in">console</span>.log(React.cloneElement(child, childProps))</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> React.cloneElement(child, childProps)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="TransitionGroup-js"><a href="#TransitionGroup-js" class="headerlink" title="TransitionGroup.js"></a>TransitionGroup.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Children, cloneElement, isValidElement &#125; <span class="keyword">from</span> <span class="string">"react"</span></span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">"prop-types"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">TransitionGroup</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">        component: PropTypes.any</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">        component: <span class="string">'div'</span>,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">        <span class="keyword">super</span>(props);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">this</span>.state = &#123;</span><br><span class="line">            children: Children.map(props.children, (child) =&gt; &#123;</span><br><span class="line">            	</span><br><span class="line">            	<span class="built_in">console</span>.log(child);</span><br><span class="line">            	</span><br><span class="line">            	</span><br><span class="line">                <span class="keyword">const</span> &#123; show, ...inProps &#125; = child.props</span><br><span class="line">                <span class="keyword">return</span> cloneElement(child, &#123; <span class="attr">show</span>: <span class="literal">true</span>, ...inProps &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentWillReceiveProps(nextProps) &#123;</span><br><span class="line">        <span class="keyword">const</span> props = <span class="keyword">this</span>.props</span><br><span class="line">        <span class="keyword">const</span> newChildren = nextProps.children</span><br><span class="line">        <span class="keyword">const</span> oldChildren = <span class="keyword">this</span>.state.children</span><br><span class="line">        <span class="keyword">const</span> oldCount = Children.count(oldChildren)</span><br><span class="line">        <span class="keyword">const</span> newCount = Children.count(newChildren)</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'oldCount:'</span>, oldCount)</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'newCount:'</span>, newCount)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (newCount &gt; oldCount) &#123;</span><br><span class="line">            Children.forEach(newChildren, (child, key) =&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (oldChildren[key]) &#123;</span><br><span class="line">                    newChildren[key] = oldChildren[key]</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">const</span> &#123; show, ...inProps &#125; = child.props</span><br><span class="line">                    newChildren[key] = cloneElement(child, &#123;<span class="attr">show</span>: <span class="literal">true</span>, ...inProps&#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="keyword">const</span> children = newChildren</span><br><span class="line">            <span class="keyword">this</span>.setState(&#123; children &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Children.forEach(oldChildren, (child, key) =&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (!newChildren[key]) &#123;</span><br><span class="line">                    <span class="keyword">const</span> &#123; show, onLeave, ...inProps &#125; = child.props</span><br><span class="line">                    newChildren[key] = cloneElement(child, &#123;</span><br><span class="line">                        show: <span class="literal">false</span>, </span><br><span class="line">                        onLeave: <span class="keyword">this</span>.handleLeave.bind(<span class="keyword">this</span>, child),</span><br><span class="line">                        ...inProps&#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    newChildren[key] = child</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="keyword">const</span> children = newChildren</span><br><span class="line">            <span class="keyword">this</span>.setState(&#123; children &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    handleLeave = <span class="function">(<span class="params">child</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'handleLeave:key:'</span>, child.key)</span><br><span class="line">        <span class="keyword">const</span> children = <span class="keyword">this</span>.state.children</span><br><span class="line">        children.splice(child.key, <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123; children &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; children &#125; = <span class="keyword">this</span>.state</span><br><span class="line">        <span class="keyword">const</span> &#123; <span class="attr">component</span>: Component ,...propsList&#125; = <span class="keyword">this</span>.props</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;Component &#123;...propsList&#125;&gt;&#123;children&#125;&lt;<span class="regexp">/Component&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="transition-css"><a href="#transition-css" class="headerlink" title="transition.css"></a>transition.css</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* -- fade -- */</span></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> rodal-fade-enter &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> rodal-fade-enter &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.rodal-fade-enter</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: rodal-fade-enter <span class="number">0.4s</span> both ease-in;</span><br><span class="line">    <span class="attribute">animation</span>: rodal-fade-enter <span class="number">0.4s</span> both ease-in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> rodal-fade-leave &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> rodal-fade-leave &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.rodal-fade-leave</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: rodal-fade-leave <span class="number">0.4s</span> both ease-out;</span><br><span class="line">    <span class="attribute">animation</span>: rodal-fade-leave <span class="number">0.4s</span> both ease-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* -- zoom -- */</span></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> rodal-zoom-enter &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">scale3d</span>(.3, .3, .3);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale3d</span>(.3, .3, .3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> rodal-zoom-enter &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">scale3d</span>(.3, .3, .3);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale3d</span>(.3, .3, .3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.rodal-zoom-enter</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: rodal-zoom-enter <span class="number">0.4s</span> both <span class="built_in">cubic-bezier</span>(0.4, 0, 0, 1.5);</span><br><span class="line">    <span class="attribute">animation</span>: rodal-zoom-enter <span class="number">0.4s</span> both <span class="built_in">cubic-bezier</span>(0.4, 0, 0, 1.5);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> rodal-zoom-leave &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">scale3d</span>(.3, .3, .3);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale3d</span>(.3, .3, .3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> rodal-zoom-leave &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">scale3d</span>(.3, .3, .3);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale3d</span>(.3, .3, .3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.rodal-zoom-leave</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: rodal-zoom-leave <span class="number">0.4s</span> both;</span><br><span class="line">    <span class="attribute">animation</span>: rodal-zoom-leave <span class="number">0.4s</span> both;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* -- slideDown -- */</span></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> rodal-slideDown-enter &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">translate3d</span>(0, -100px, 0);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(0, -100px, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> rodal-slideDown-enter &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">translate3d</span>(0, -100px, 0);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(0, -100px, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.rodal-slideDown-enter</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: rodal-slideDown-enter <span class="number">0.4s</span> both <span class="built_in">cubic-bezier</span>(0.4, 0, 0, 1.5);</span><br><span class="line">    <span class="attribute">animation</span>: rodal-slideDown-enter <span class="number">0.4s</span> both <span class="built_in">cubic-bezier</span>(0.4, 0, 0, 1.5);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> rodal-slideDown-leave &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">translate3d</span>(0, -100px, 0);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(0, -100px, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> rodal-slideDown-leave &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">translate3d</span>(0, -100px, 0);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(0, -100px, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.rodal-slideDown-leave</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: rodal-slideDown-leave <span class="number">0.4s</span> both;</span><br><span class="line">    <span class="attribute">animation</span>: rodal-slideDown-leave <span class="number">0.4s</span> both;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* -- slideLeft -- */</span></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> rodal-slideLeft-enter &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">translate3d</span>(-150px, 0, 0);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(-150px, 0, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> rodal-slideLeft-enter &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">translate3d</span>(-150px, 0, 0);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(-150px, 0, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.rodal-slideLeft-enter</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: rodal-slideLeft-enter <span class="number">0.4s</span> both <span class="built_in">cubic-bezier</span>(0.4, 0, 0, 1.5);</span><br><span class="line">    <span class="attribute">animation</span>: rodal-slideLeft-enter <span class="number">0.4s</span> both <span class="built_in">cubic-bezier</span>(0.4, 0, 0, 1.5);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> rodal-slideLeft-leave &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">translate3d</span>(-150px, 0, 0);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(-150px, 0, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> rodal-slideLeft-leave &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">translate3d</span>(-150px, 0, 0);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(-150px, 0, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.rodal-slideLeft-leave</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: rodal-slideLeft-leave <span class="number">0.4s</span> both;</span><br><span class="line">    <span class="attribute">animation</span>: rodal-slideLeft-leave <span class="number">0.4s</span> both;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* -- slideRight -- */</span></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> rodal-slideRight-enter &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">translate3d</span>(150px, 0, 0);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(150px, 0, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> rodal-slideRight-enter &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">translate3d</span>(150px, 0, 0);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(150px, 0, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.rodal-slideRight-enter</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: rodal-slideRight-enter <span class="number">0.4s</span> both <span class="built_in">cubic-bezier</span>(0.4, 0, 0, 1.5);</span><br><span class="line">    <span class="attribute">animation</span>: rodal-slideRight-enter <span class="number">0.4s</span> both <span class="built_in">cubic-bezier</span>(0.4, 0, 0, 1.5);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> rodal-slideRight-leave &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">translate3d</span>(150px, 0, 0);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(150px, 0, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> rodal-slideRight-leave &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">translate3d</span>(150px, 0, 0);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(150px, 0, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.rodal-slideRight-leave</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: rodal-slideRight-leave <span class="number">0.4s</span> both;</span><br><span class="line">    <span class="attribute">animation</span>: rodal-slideRight-leave <span class="number">0.4s</span> both;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* -- slideUp -- */</span></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> rodal-slideUp-enter &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">translate3d</span>(0, 100px, 0);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(0, 100px, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> rodal-slideUp-enter &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">translate3d</span>(0, 100px, 0);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(0, 100px, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.rodal-slideUp-enter</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: rodal-slideUp-enter <span class="number">0.4s</span> both <span class="built_in">cubic-bezier</span>(0.4, 0, 0, 1.5);</span><br><span class="line">    <span class="attribute">animation</span>: rodal-slideUp-enter <span class="number">0.4s</span> both <span class="built_in">cubic-bezier</span>(0.4, 0, 0, 1.5);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> rodal-slideUp-leave &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">translate3d</span>(0, 100px, 0);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(0, 100px, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> rodal-slideUp-leave &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">translate3d</span>(0, 100px, 0);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(0, 100px, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.rodal-slideUp-leave</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: rodal-slideUp-leave <span class="number">0.4s</span> both;</span><br><span class="line">    <span class="attribute">animation</span>: rodal-slideUp-leave <span class="number">0.4s</span> both;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* -- flip -- */</span></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> rodal-flip-enter &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">perspective</span>(400px) <span class="built_in">rotate3d</span>(1, 0, 0, 60deg);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">perspective</span>(400px) <span class="built_in">rotate3d</span>(1, 0, 0, 60deg);</span><br><span class="line">    &#125;</span><br><span class="line">    70% &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">perspective</span>(400px) <span class="built_in">rotate3d</span>(1, 0, 0, -15deg);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">perspective</span>(400px) <span class="built_in">rotate3d</span>(1, 0, 0, -15deg);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">perspective</span>(400px);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">perspective</span>(400px);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> rodal-flip-enter &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">perspective</span>(400px) <span class="built_in">rotate3d</span>(1, 0, 0, 60deg);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">perspective</span>(400px) <span class="built_in">rotate3d</span>(1, 0, 0, 60deg);</span><br><span class="line">    &#125;</span><br><span class="line">    70% &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">perspective</span>(400px) <span class="built_in">rotate3d</span>(1, 0, 0, -15deg);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">perspective</span>(400px) <span class="built_in">rotate3d</span>(1, 0, 0, -15deg);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">perspective</span>(400px);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">perspective</span>(400px);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.rodal-flip-enter</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: rodal-flip-enter <span class="number">0.4s</span> both ease-in;</span><br><span class="line">    <span class="attribute">animation</span>: rodal-flip-enter <span class="number">0.4s</span> both ease-in;</span><br><span class="line">    <span class="attribute">-webkit-backface-visibility</span>: visible <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">backface-visibility</span>: visible <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> rodal-flip-leave &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">perspective</span>(400px);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">perspective</span>(400px);</span><br><span class="line">    &#125;</span><br><span class="line">    30% &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">perspective</span>(400px) <span class="built_in">rotate3d</span>(1, 0, 0, -15deg);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">perspective</span>(400px) <span class="built_in">rotate3d</span>(1, 0, 0, -15deg);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">perspective</span>(400px) <span class="built_in">rotate3d</span>(1, 0, 0, 45deg);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">perspective</span>(400px) <span class="built_in">rotate3d</span>(1, 0, 0, 45deg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> rodal-flip-leave &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">perspective</span>(400px);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">perspective</span>(400px);</span><br><span class="line">    &#125;</span><br><span class="line">    30% &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">perspective</span>(400px) <span class="built_in">rotate3d</span>(1, 0, 0, -15deg);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">perspective</span>(400px) <span class="built_in">rotate3d</span>(1, 0, 0, -15deg);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">perspective</span>(400px) <span class="built_in">rotate3d</span>(1, 0, 0, 45deg);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">perspective</span>(400px) <span class="built_in">rotate3d</span>(1, 0, 0, 45deg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.rodal-flip-leave</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: rodal-flip-leave <span class="number">0.4s</span> both;</span><br><span class="line">    <span class="attribute">animation</span>: rodal-flip-leave <span class="number">0.4s</span> both;</span><br><span class="line">    <span class="attribute">-webkit-backface-visibility</span>: visible <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">backface-visibility</span>: visible <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* -- rotate -- */</span></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> rodal-rotate-enter &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">rotate3d</span>(0, 0, 1, -180deg) <span class="built_in">scale3d</span>(.3, .3, .3);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate3d</span>(0, 0, 1, -180deg) <span class="built_in">scale3d</span>(.3, .3, .3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> rodal-rotate-enter &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">rotate3d</span>(0, 0, 1, -180deg) <span class="built_in">scale3d</span>(.3, .3, .3);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate3d</span>(0, 0, 1, -180deg) <span class="built_in">scale3d</span>(.3, .3, .3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.rodal-rotate-enter</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: rodal-rotate-enter <span class="number">0.4s</span> both;</span><br><span class="line">    <span class="attribute">animation</span>: rodal-rotate-enter <span class="number">0.4s</span> both;</span><br><span class="line">    <span class="attribute">-webkit-transform-origin</span>: center;</span><br><span class="line">    <span class="attribute">transform-origin</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> rodal-rotate-leave &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">rotate3d</span>(0, 0, 1, 180deg) <span class="built_in">scale3d</span>(.3, .3, .3);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate3d</span>(0, 0, 1, 180deg) <span class="built_in">scale3d</span>(.3, .3, .3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> rodal-rotate-leave &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">rotate3d</span>(0, 0, 1, 180deg) <span class="built_in">scale3d</span>(.3, .3, .3);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate3d</span>(0, 0, 1, 180deg) <span class="built_in">scale3d</span>(.3, .3, .3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.rodal-rotate-leave</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: rodal-rotate-leave <span class="number">0.4s</span> both;</span><br><span class="line">    <span class="attribute">animation</span>: rodal-rotate-leave <span class="number">0.4s</span> both;</span><br><span class="line">    <span class="attribute">-webkit-transform-origin</span>: center;</span><br><span class="line">    <span class="attribute">transform-origin</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* -- door -- */</span></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> rodal-door-enter &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">scale3d</span>(0, 1, 1);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale3d</span>(0, 1, 1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> rodal-door-enter &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">scale3d</span>(0, 1, 1);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale3d</span>(0, 1, 1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.rodal-door-enter</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: rodal-door-enter <span class="number">0.4s</span> both <span class="built_in">cubic-bezier</span>(0.4, 0, 0, 1.5);</span><br><span class="line">    <span class="attribute">animation</span>: rodal-door-enter <span class="number">0.4s</span> both <span class="built_in">cubic-bezier</span>(0.4, 0, 0, 1.5);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> rodal-door-leave &#123;</span><br><span class="line">    60% &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">scale3d</span>(.01, 1, 1);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale3d</span>(.01, 1, 1);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">scale3d</span>(0, 1, .1);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale3d</span>(0, 1, .1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> rodal-door-leave &#123;</span><br><span class="line">    60% &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">scale3d</span>(.01, 1, 1);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale3d</span>(.01, 1, 1);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">scale3d</span>(0, 1, .1);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale3d</span>(0, 1, .1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.rodal-door-leave</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: rodal-door-leave <span class="number">0.4s</span> both;</span><br><span class="line">    <span class="attribute">animation</span>: rodal-door-leave <span class="number">0.4s</span> both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="组件中的使用"><a href="#组件中的使用" class="headerlink" title="组件中的使用"></a>组件中的使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Loading <span class="keyword">from</span> <span class="string">'./Loading/index'</span> </span><br><span class="line"><span class="keyword">import</span> Transition <span class="keyword">from</span> <span class="string">'./transition/Transition'</span></span><br><span class="line"><span class="keyword">import</span> TransitionGroup <span class="keyword">from</span> <span class="string">'./transition/TransitionGroup'</span></span><br><span class="line"><span class="keyword">import</span> &#123; CSSTransition &#125; <span class="keyword">from</span> <span class="string">'react-transition-group'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./App.css'</span></span><br><span class="line"><span class="keyword">import</span> logo <span class="keyword">from</span> <span class="string">'./logo.svg'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> idx = <span class="number">1</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    list: [<span class="string">'Transition-Group-Demo-0'</span>],</span><br><span class="line">    show: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  addClick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> list = <span class="keyword">this</span>.state.list.slice()</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      show: <span class="literal">true</span>,</span><br><span class="line">      list: list.concat([<span class="string">'Transition-Group-Demo-'</span> + idx++])</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  deleteClick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> list = <span class="keyword">this</span>.state.list.slice()</span><br><span class="line">    <span class="keyword">if</span> (list.length === <span class="number">0</span>) <span class="keyword">return</span></span><br><span class="line">    list.splice(<span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'list=&gt;'</span>, list);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      show: <span class="literal">false</span>,</span><br><span class="line">      list: list</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  loading=<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">  	Loading.loading(<span class="string">"哈哈"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  handleEnter = <span class="function">(<span class="params">el</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//console.log('111', el.scrollHeight)</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleLeave = <span class="function">(<span class="params">el</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="comment">//console.log('222', el.scrollHeight)</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"App"</span>&gt;</span><br><span class="line">        &lt;header className=<span class="string">"App-header"</span>&gt;</span><br><span class="line">          &lt;h1 className=<span class="string">"App-title"</span>&gt;Welcome to React&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">          &lt;div className="btn-con"&gt;</span></span><br><span class="line"><span class="regexp">	          &lt;button onClick=&#123;this.addClick&#125;&gt;增加一条数据&lt;/</span>button&gt;</span><br><span class="line">	          &lt;button onClick=&#123;<span class="keyword">this</span>.deleteClick&#125;&gt;删除一条数据&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">	          &lt;button onClick=&#123;this.loading&#125;&gt;loading&lt;/</span>button&gt;</span><br><span class="line">          &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>header&gt;</span><br><span class="line">         &#123;<span class="comment">/*</span></span><br><span class="line"><span class="comment">         &lt;Transition show=&#123;this.state.show&#125; className="zoom" onEnter=&#123;this.handleEnter&#125; onLeave=&#123;this.handleLeave&#125;&gt;</span></span><br><span class="line"><span class="comment">          &lt;div&gt;&lt;h1&gt;see you next time 1&lt;/h1&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="comment">        &lt;/Transition&gt;</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">        &lt;CSSTransition in=&#123;this.state.show&#125; timeout=&#123;400&#125; classNames="fade"&gt;</span></span><br><span class="line"><span class="comment">          &lt;div&gt;&lt;h1&gt;see you next time 2&lt;/h1&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="comment">        &lt;/CSSTransition&gt;</span></span><br><span class="line"><span class="comment">        */</span>&#125;</span><br><span class="line">       </span><br><span class="line">        &lt;TransitionGroup component=<span class="string">"ul"</span> className=<span class="string">"grop"</span>&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.state.list.map(<span class="function">(<span class="params">item, key</span>) =&gt;</span> (</span><br><span class="line">			      &lt;Transition </span><br><span class="line">			        key=&#123;key&#125; </span><br><span class="line">			        className=<span class="string">"rotate"</span></span><br><span class="line">			        onEnter=&#123;<span class="keyword">this</span>.handleEnter&#125; </span><br><span class="line">			        onLeave=&#123;<span class="keyword">this</span>.handleLeave&#125;&gt;</span><br><span class="line">			        &lt;li&gt;</span><br><span class="line">			           &lt;img src=&#123;logo&#125; className=<span class="string">"App-logo"</span> alt=<span class="string">"logo"</span> /&gt;</span><br><span class="line">			           &lt;span&gt;&#123;item&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">			        &lt;/</span>li&gt;</span><br><span class="line">			      &lt;<span class="regexp">/Transition&gt;</span></span><br><span class="line"><span class="regexp">			    ))&#125;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>TransitionGroup&gt;</span><br><span class="line"> </span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default App;</span></span><br></pre></td></tr></table></figure>
<h3 id="插件中实用"><a href="#插件中实用" class="headerlink" title="插件中实用"></a>插件中实用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./loading.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Transition <span class="keyword">from</span> <span class="string">'../transition/Transition'</span></span><br><span class="line"><span class="keyword">import</span> TransitionGroup <span class="keyword">from</span> <span class="string">'../transition/TransitionGroup'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Toast</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">	checkToast(n) &#123;</span><br><span class="line">		<span class="keyword">switch</span>(n) &#123;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">				<span class="keyword">return</span>(</span><br><span class="line">				 </span><br><span class="line">					&lt;div className=<span class="string">"loading-icon"</span>&gt;</span><br><span class="line">					    &lt;div className=<span class="string">"wrapper"</span>&gt;</span><br><span class="line">				        	&lt;div className=<span class="string">"spinner"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">				        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">				    &lt;/</span>div&gt;</span><br><span class="line">				  </span><br><span class="line">				)</span><br><span class="line"></span><br><span class="line">			<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">				<span class="keyword">return</span>(</span><br><span class="line">					&lt;div className=<span class="string">"loading-icon"</span>&gt;</span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">				)</span></span><br><span class="line"><span class="regexp">			default:</span></span><br><span class="line"><span class="regexp">				return null</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp">	&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">	render() &#123;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">		let &#123;</span></span><br><span class="line"><span class="regexp">			type,</span></span><br><span class="line"><span class="regexp">			content,</span></span><br><span class="line"><span class="regexp">			opacity = 0</span></span><br><span class="line"><span class="regexp">		&#125; = this.props.setting;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">		let style = &#123;</span></span><br><span class="line"><span class="regexp">			"background": `rgba(0,0,0,$&#123;opacity&#125;)`</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">		return(</span></span><br><span class="line"><span class="regexp">			&lt;div className="mask" style=&#123;style&#125;&gt;</span></span><br><span class="line"><span class="regexp">			 &lt;TransitionGroup component="div"&gt;</span></span><br><span class="line"><span class="regexp">				  &lt;Transition className="slideDown"&gt; </span></span><br><span class="line"><span class="regexp">				    &lt;div className="loading"&gt;</span></span><br><span class="line"><span class="regexp">				        &#123;this.checkToast(type)&#125;</span></span><br><span class="line"><span class="regexp">				        &lt;div className="msg"&gt;&#123;content&#125;&lt;/</span>div&gt;</span><br><span class="line">				    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">			       &lt;/</span>Transition&gt;</span><br><span class="line">				&lt;<span class="regexp">/TransitionGroup&gt;</span></span><br><span class="line"><span class="regexp">			&lt;/</span>div&gt;</span><br><span class="line">		);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="React中的Component-和-PureComponent"><a href="#React中的Component-和-PureComponent" class="headerlink" title="React中的Component 和 PureComponent"></a>React中的Component 和 PureComponent</h3><blockquote>
<p><code>React.Component</code>和 <code>React.PureComponent</code>很相似，两则的区别在于，<code>PureComponent</code>类帮我们以浅比较的方式对比<code>props</code>和<code>state</code>，实现了<code>shouldComponentUpdate()</code>函数，在某些情况下，使用<code>PureComponent</code>可以减少<code>render</code>函数的执行，提升性能。</p>
</blockquote>
<h4 id="PureComponent能够提升性能"><a href="#PureComponent能够提升性能" class="headerlink" title="PureComponent能够提升性能"></a>PureComponent能够提升性能</h4><p><strong>当Index组件继承<code>Component</code>类</strong></p>
<ol>
<li><p>初次渲染时控制台会依次打印”<code>constructor</code>“、”<code>render</code>“;</p>
</li>
<li><p>当第一次点击按钮更新<code>state</code>时，控制台会依次打印”<code>render</code>“、”<code>componentDidUpdate</code>“;</p>
</li>
<li><p>后续每次触发点击事件，尽管flag的值没有变化，控制台还是会依次打印”<code>render</code>“、”<code>componentDidUpdate</code>“，说明组件依然调用<code>render()</code>、<code>componentDidUpdate()</code>函数，显然这是多余的，通常我们会手动重新实现<code>shouldComponentUpdate(nextProps, nextState)</code>函数判断<code>state</code>、<code>props</code>的状态再来决定是否需要重新渲染</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">PureComponent</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      flag:<span class="literal">false</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'constructor'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  changeState = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      flag: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'render'</span>);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="keyword">this</span>.changeState&#125;&gt;Click me&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;div&gt;</span></span><br><span class="line"><span class="regexp">         &#123;this.state.flag.toString()&#125;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>div&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  componentDidUpdate() &#123;</span></span><br><span class="line"><span class="regexp">    console.log("componentDidUpdate")</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Index;</span></span><br></pre></td></tr></table></figure>
<p><strong>当Index组件继承<code>PureComponent</code>类</strong></p>
<ul>
<li><p>初次渲染和第一次点击按钮更新<code>state</code>时控制台输出同上面继承<code>Component</code>一样没有变化</p>
</li>
<li><p>后续每次触发点击事件，控制台无输出， 省去执行<code>render</code>函数生成虚拟DOM，进行DIFF算法比较等后续操作</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>._compositeType === CompositeTypes.PureClass) &#123;</span><br><span class="line">  shouldUpdate = !shallowEqual(prevProps, nextProps) || !shallowEqual(inst.state, nextState);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><code>PureComponent</code>默认实现的<code>shouldComponentUpdate()</code>方法使用的是浅比较： 即值的比较或引用的比较, 不会进行深层次的对比，所以当<code>props</code>或<code>state</code>的值是引用类型时，即使对象的值改变了，但是对象的引用没变</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexPage</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">PureComponent</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      arr: [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  changeArr = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123;arr&#125; = <span class="keyword">this</span>.state</span><br><span class="line">    arr.pop()</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      arr</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"changeArr"</span>, arr)</span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; arr &#125; = <span class="keyword">this</span>.state</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'render'</span>, arr);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="keyword">this</span>.changeArr&#125;&gt;pop&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;ul&gt;</span></span><br><span class="line"><span class="regexp">        &#123;</span></span><br><span class="line"><span class="regexp">          arr.map(item =&gt; &lt;li key=&#123;item&#125;&gt;&#123;item&#125;&lt;/</span>li&gt;)</span><br><span class="line">        &#125;</span><br><span class="line">        &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  componentDidUpdate() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"componentDidUpdate"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> IndexPage;</span><br></pre></td></tr></table></figure>
<ol>
<li>初次渲染时控制台会打印 <code>render (5) [1, 2, 3, 4, 5]</code></li>
<li>当点击pop按钮时控制台会依次打印 <code>changeArr (4) [1, 2, 3, 4]</code>， <code>changeArr (4) [1, 2, 3]`</code>……<code>但是</code>render<code>函数不执行， 因为</code>PureComponent<code>实现的</code>shouldComponentUpdate()<code>认为值的引用没有变，故不执行后续的操作，只有在引用改变的情况下函数才会返回</code>true`</li>
</ol>
<h4 id="PureComponent也会影响子组件"><a href="#PureComponent也会影响子组件" class="headerlink" title="PureComponent也会影响子组件"></a>PureComponent也会影响子组件</h4><p>下面例子中的r<code>ender</code>函数只会在刚创建的时候执行一次， 后续的点击按钮操作，由于<code>PureComponent</code>中的<code>ShouldComponentUpdate()</code>执行浅比较（对象值的引用没变），不会触发<code>render</code>函数的执行，其子组件也不会更新。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> Item <span class="keyword">from</span> <span class="string">'./Item'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexPage</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">PureComponent</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      arr: [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  changeArr = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123;arr&#125; = <span class="keyword">this</span>.state</span><br><span class="line">    arr.pop()</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      arr</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"changeArr"</span>, arr)</span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; arr &#125; = <span class="keyword">this</span>.state</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'render'</span>, arr);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="keyword">this</span>.changeArr&#125;&gt;pop&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;ul&gt;</span></span><br><span class="line"><span class="regexp">          &lt;Item arr=&#123;arr&#125; /</span>&gt;</span><br><span class="line">        &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  componentDidUpdate() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"componentDidUpdate"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> IndexPage;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// Item.js</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; Fragment, Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; arr &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"children"</span>, arr)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Fragment&gt;</span><br><span class="line">        &#123;</span><br><span class="line">          arr.map(<span class="function"><span class="params">item</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;item&#125;</span>&gt;</span>&#123;item&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &lt;<span class="regexp">/Fragment&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Index;</span></span><br></pre></td></tr></table></figure>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><ol>
<li><code>PureComponent</code>已经用浅层对比<code>props</code>、<code>state</code>的方式替我们实现了<code>shouldComponentUpdate()</code>， 不仅能影响自身，还会影响其子组件；</li>
<li><code>PureComponent</code> 某些情况下（<code>props</code>或<code>state</code>的值不经常变动， 因为浅比较也会耗时）可以提升性能；</li>
<li>继承自<code>Component</code>中的组件<code>shouldComponentUpdate()</code>默认情况下总是返回true；</li>
</ol>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/React/" rel="tag"># React</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/06/03/React-TypeScript-50-条规范和经验/" rel="next" title="React + TypeScript 50 条规范和经验">
                <i class="fa fa-chevron-left"></i> React + TypeScript 50 条规范和经验
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/06/30/深入理解Tree-shaking/" rel="prev" title="深入理解Tree-shaking">
                深入理解Tree-shaking <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/tx.jpg" alt="李斌">
            
              <p class="site-author-name" itemprop="name">李斌</p>
              <p class="site-description motion-element" itemprop="description">人生如逆旅     我亦是行人</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">176</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">121</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/libin1991" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://juejin.im/user/57e737f6c4c971005f6bcd8d" target="_blank" title="juejin">
                      
                        <i class="fa fa-fw fa-spinner"></i>juejin</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#my-React-Transition-Group"><span class="nav-number">1.</span> <span class="nav-text"> my-React-Transition-Group </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#classnames-源码"><span class="nav-number">2.</span> <span class="nav-text">classnames 源码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#React-顶层-API"><span class="nav-number">3.</span> <span class="nav-text">React 顶层 API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#React-相关方法（API）介绍－元素与组件操作"><span class="nav-number">4.</span> <span class="nav-text">React 相关方法（API）介绍－元素与组件操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#React-新特性讲解及实例Context-ContextType-lazy-Suspense-错误边界（Error-boundaries）-memo"><span class="nav-number">5.</span> <span class="nav-text">React 新特性讲解及实例Context,ContextType,lazy,Suspense,错误边界（Error boundaries）,memo</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#react中实用的一些API"><span class="nav-number">6.</span> <span class="nav-text">react中实用的一些API</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#React-createClass"><span class="nav-number">6.1.</span> <span class="nav-text">React.createClass:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#React-createElement"><span class="nav-number">6.2.</span> <span class="nav-text">React.createElement</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#React-cloneElement"><span class="nav-number">6.3.</span> <span class="nav-text">React.cloneElement:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#React-Children"><span class="nav-number">6.4.</span> <span class="nav-text">React.Children:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#React-DOM-tag"><span class="nav-number">6.5.</span> <span class="nav-text">React.DOM.tag:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#React-isValidElement"><span class="nav-number">6.6.</span> <span class="nav-text">React.isValidElement:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#React-renderToStaticMarkup"><span class="nav-number">6.7.</span> <span class="nav-text">React.renderToStaticMarkup:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#React-renderToString"><span class="nav-number">6.8.</span> <span class="nav-text">React.renderToString:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Transition-js"><span class="nav-number">7.</span> <span class="nav-text">Transition.js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TransitionGroup-js"><span class="nav-number">8.</span> <span class="nav-text">TransitionGroup.js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#transition-css"><span class="nav-number">9.</span> <span class="nav-text">transition.css</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#组件中的使用"><span class="nav-number">10.</span> <span class="nav-text">组件中的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#插件中实用"><span class="nav-number">11.</span> <span class="nav-text">插件中实用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#React中的Component-和-PureComponent"><span class="nav-number">12.</span> <span class="nav-text">React中的Component 和 PureComponent</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#PureComponent能够提升性能"><span class="nav-number">12.1.</span> <span class="nav-text">PureComponent能够提升性能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PureComponent也会影响子组件"><span class="nav-number">12.2.</span> <span class="nav-text">PureComponent也会影响子组件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#总结"><span class="nav-number">12.3.</span> <span class="nav-text">总结</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">李斌</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

  
  <!--
  	描述：点击红心
  -->
  <script type="text/javascript" src="/js/src/clicklove.js"></script>
  <!--
  	描述：复制代码
  -->
  <script type="text/javascript" src="/js/src/clipboard.min.js"></script>
  <script type="text/javascript" src="/js/src/clipboard-use.js"></script>
</body>
</html>


