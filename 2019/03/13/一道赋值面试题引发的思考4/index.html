<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="JS,">










<meta name="description" content="实现一个run方法,使得run(fucArr)能顺序输出1、2、31234567891011121314151617181920212223242526const fucArr = [	next =&amp;gt; &amp;#123;		setTimeout(() =&amp;gt; &amp;#123;			console.log(1);			next()		&amp;#125;, 300)	&amp;#125;,	next =&amp;gt; &amp;">
<meta name="keywords" content="JS">
<meta property="og:type" content="article">
<meta property="og:title" content="一道赋值面试题引发的思考4">
<meta property="og:url" content="http://yoursite.com/2019/03/13/一道赋值面试题引发的思考4/index.html">
<meta property="og:site_name" content="岁月无影">
<meta property="og:description" content="实现一个run方法,使得run(fucArr)能顺序输出1、2、31234567891011121314151617181920212223242526const fucArr = [	next =&amp;gt; &amp;#123;		setTimeout(() =&amp;gt; &amp;#123;			console.log(1);			next()		&amp;#125;, 300)	&amp;#125;,	next =&amp;gt; &amp;">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2019/03/13/一道赋值面试题引发的思考4/6.png">
<meta property="og:image" content="http://yoursite.com/2019/03/13/一道赋值面试题引发的思考4/7.png">
<meta property="og:image" content="http://yoursite.com/2019/03/13/一道赋值面试题引发的思考4/1.png">
<meta property="og:image" content="http://yoursite.com/2019/03/13/一道赋值面试题引发的思考4/2.png">
<meta property="og:image" content="http://yoursite.com/2019/03/13/一道赋值面试题引发的思考4/3.png">
<meta property="og:image" content="http://yoursite.com/2019/03/13/一道赋值面试题引发的思考4/4.png">
<meta property="og:image" content="http://yoursite.com/2019/03/13/一道赋值面试题引发的思考4/5.png">
<meta property="og:updated_time" content="2019-04-02T13:58:56.255Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一道赋值面试题引发的思考4">
<meta name="twitter:description" content="实现一个run方法,使得run(fucArr)能顺序输出1、2、31234567891011121314151617181920212223242526const fucArr = [	next =&amp;gt; &amp;#123;		setTimeout(() =&amp;gt; &amp;#123;			console.log(1);			next()		&amp;#125;, 300)	&amp;#125;,	next =&amp;gt; &amp;">
<meta name="twitter:image" content="http://yoursite.com/2019/03/13/一道赋值面试题引发的思考4/6.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/03/13/一道赋值面试题引发的思考4/">





  <title>一道赋值面试题引发的思考4 | 岁月无影</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband">
    	<div class="eevee"><div class="body"><div class="head"><div class="ears"><div class="ear"><div class="lobe"></div></div><div class="ear"><div class="lobe"></div></div></div><div class="face"><div class="eyes"><div class="eye"><div class="eyelid"></div></div><div class="eye"><div class="eyelid"></div></div></div><div class="nose"></div><div class="mouth"></div></div></div><div class="chest"><div class="fur"><div class="patch"></div></div><div class="fur"><div class="patch"></div></div><div class="fur"><div class="patch"></div></div></div><div class="legs"><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div></div><div class="tail"><div class="tail"><div class="tail"><div class="tail"><div class="tail"><div class="tail -end"></div></div></div></div></div></div></div></div>
    </div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
    	<div id="sky">
				<div id="background" class="container">
			<!-- svg file -->
			<svg id="svgout" height="100%" width="100%" viewbox="0 0 550 400">
				<defs>
					<g id="bottomShadow">
						<path fill="#000000" stroke="none" d="
		M 270.5 225.95
		L 127.35 316.65 266.8 400 409.6 309.25 270.5 225.95 Z"/>
					</g>
					<g id="Layer52_0_FILL">
						<path class="topGrass" fill="#B9D668" stroke="none" d="
	M 397.85 229.3
	L 397.85 225.6 269.85 152 135.75 228.6 135.75 233.65 262.1 306.55 397.85 229.3 Z"/>
					</g>
					<g id="Layer51_0_FILL">
						<path class="leftSideGrass" fill="#6E9E4F" stroke="none" d="
	M 135.1 229.95
	L 135.1 256.85 262.1 328.4 262.1 301.85 135.1 229.95 Z"/>
					</g>
					<g id="Layer50_0_FILL">
						<path class="rightGrassTop" fill="#8CB154" stroke="none" d="
	M 397.85 225.95
	L 395.8 225.95 261.75 301.55 261.75 328.4 397.85 251.15 397.85 225.95 Z"/>
					</g>
					<g id="Layer48_0_FILL">
						<path class="crustLeftTop" fill="#955541" stroke="none" d="
	M 135.45 282.4
	L 135.75 298.15 262.1 372.1 261.75 355.65 135.45 282.4 Z"/>
					</g>
					<g id="Layer47_0_FILL">
						<path class="middleLeftCrust" fill="#C77E61" stroke="none" d="
	M 135.1 270.3
	L 135.1 283.05 275.9 364.35 271.85 348.9 135.1 270.3 Z"/>
					</g>
					<g id="Layer46_0_FILL">
						<path class="crustLeftTop" fill="#955541" stroke="none" d="
	M 135.1 255.15
	L 135.1 270.3 262.1 343.55 262.1 328.05 135.1 255.15 Z"/>
					</g>
					<g id="Layer45_0_FILL">
						<path class="topRightCrust" fill="#A47237" stroke="none" d="
	M 397.5 294.5
	L 397.5 277 261.75 355.3 261.75 372.75 397.5 294.5 Z"/>
					</g>
					<g id="Layer44_0_FILL">
						<path class="middleRightCrust" fill="#C89451" stroke="none" d="
	M 397.5 269.95
	L 397.15 266.6 262.1 343.2 262.1 355.95 397.5 279.7 397.5 269.95 Z"/>
					</g>
					<g id="Layer43_0_FILL">
						<path class="topRightCrust" fill="#A47237" stroke="none" d="
	M 397.5 266.6
	L 397.5 250.45 261.75 328.4 261.75 343.85 397.5 266.6 Z"/>
					</g>
					<g id="Layer41_0_FILL">
						<path class="greyRoad" fill="#B2B2B1" stroke="none" d="
	M 295.05 283.05
	Q 299.05 280.35 308.45 275.3 317.85 269.95 323.6 266.9
	L 268.8 233.65 338.05 191.35 309.15 174.55 177.75 254.5
	Q 191.55 262.2 198.25 266.25 204.65 269.95 209.7 271.95
	L 241.6 250.45 295.05 283.05 Z"/>
					</g>
					<g id="Layer40_0_FILL">
						<path fill="#FFFFFF" stroke="none" d="
	M 199.95 256.85
	Q 194.55 261.2 191.9 262.2
	L 194.9 263.9 200.95 259.2 199.95 256.85
	M 225.8 243.75
	L 224.8 241.75 211.05 250.8 212.05 252.8 225.8 243.75
	M 308.15 275.65
	L 296.7 266.6 295.35 268.6 306.8 277.7 308.15 275.65
	M 275.9 253.5
	L 274.55 255.5 285.95 264.55 287.3 262.55 275.9 253.5
	M 251.7 227.3
	L 250.7 225.25 236.9 234.35 237.9 236.35 251.7 227.3
	M 257.05 240.7
	L 254.05 240.7 268.8 249.8 269.5 247.75 257.05 240.7
	M 277.2 207.8
	L 263.45 216.85 264.45 218.9 278.25 209.8 277.2 207.8
	M 305.1 192.65
	L 304.1 190.65 290.3 199.75 291.35 201.75 305.1 192.65 Z"/>
					</g>
					<g id="Layer38_0_FILL">
						<path class="frontFascia" fill="#ECB27B" stroke="none" d="
	M 359.25 187.95
	L 346.4 174.95 333.85 202.9 359.25 187.95 Z"/>
					</g>
					<g id="Layer37_0_FILL">
						<path class="frontWall" fill="#EFA258" stroke="none" d="
	M 334 201.05
	L 334.35 232 359.2 217.55 359.25 187.95 334 201.05 Z"/>
					</g>
					<g id="Layer36_0_FILL">
						<path class="leftWall" fill="#C57F42" stroke="none" d="
	M 334.35 232.3
	L 334.35 205.1 305.1 191.35 305.1 216.85 334.35 232.3 Z"/>
					</g>
					<g id="Layer35_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 329.7 167.9
	L 331.05 167.9 344.55 176.7 347.85 176.7 363 192.25 363.15 189.55 350.65 176.7 350.55 176.7 334.25 167.5 334.25 159.1 329.7 159.1 329.7 164.9 322.65 160.95 322.3 162.15 329.7 167 329.7 167.9 Z"/>
					</g>
					<g id="Layer34_0_FILL">
						<path class="leftRoof" fill="#F2563B" stroke="none" d="
	M 334.05 207.05
	L 350.65 176.7 322.1 160.45 302.1 192.05 334.05 207.05 Z"/>
					</g>
					<g id="Layer30_0_FILL">
						<path id="windowFour" class="windows" stroke="none" fill="#975A42" d="
	M 341.35 203.3
	Q 340.9 203.45 340.5 203.8 340.1 204.2 339.85 204.75 339.7 205 339.7 205.3 339.6 205.75 339.7 206.1 339.7 206.15 339.7 206.2 339.8 206.5 340 206.8 340.55 207.4 341.45 207.4 342.35 207.4 343 206.8 343.4 206.5 343.65 206.1 343.85 205.75 343.95 205.3 344.05 204.4 343.55 203.8 343.3 203.45 343 203.3 342.65 203.15 342.2 203.15 341.8 203.15 341.35 203.3
	M 355.85 198.45
	Q 355.8 198.2 355.6 198 355.1 197.4 354.2 197.4 353.35 197.4 352.6 198 351.85 198.65 351.7 199.55 351.7 199.7 351.7 199.85 351.6 200.5 352 201.05 352.55 201.65 353.45 201.65 354.3 201.65 355.05 201.05 355.45 200.7 355.7 200.25 355.8 200.05 355.9 199.85 355.95 199.7 355.95 199.55 356.05 198.95 355.85 198.45 Z"/>
						<path class="door" fill="#B65041" stroke="none" d="
	M 351.95 211.2
	L 351.8 211.2 346.05 215.1 346.05 225.2 351.95 221.6 351.95 211.2
	M 351.2 211.2
	L 351.35 211.2 351.35 211.1 351.2 211.2 Z"/>
					</g>
					<g>
						<path id="Layer30_0_FILL" fill="#000000" fill-opacity="1" stroke="none" d="
	M 183.7 215.3
	L 183.7 215.6
	Q 187.25 231.75 212.25 234.35
	L 183.7 215.3 Z"/>
					</g>
					<g id="Layer29_0_FILL">
						<path fill="#000000" fill-opacity="0.4" stroke="none" d="
	M 305.1 216.85
	L 305.15 217.2
	Q 309.45 233.2 334.35 232.3
	L 305.1 216.85 Z"/>
					</g>
					<g id="Layer27_0_FILL">
						<path class="vegetation" fill="#78A950" stroke="none" d="
	M 177.45 231.65
	Q 175.75 235.35 181.8 239.35 185.5 235.7 185.15 231.3 182.8 230.65 181.45 234 179.45 231.3 177.45 231.65
	M 236.9 266.6
	Q 235.2 270.3 241.25 274.3 244.95 270.6 244.65 266.25 242.3 265.6 240.95 268.95 238.9 266.25 236.9 266.6
	M 254.7 277
	Q 253.05 280.7 259.1 284.75 262.75 281.05 262.45 276.65 260.1 276 258.75 279.35 256.7 276.65 254.7 277
	M 315.5 245.75
	Q 313.5 243.05 311.5 243.4 309.8 247.1 315.85 251.15 319.55 247.45 319.2 243.05 316.85 242.4 315.5 245.75
	M 295.35 232.65
	Q 293.7 236.35 299.75 240.4 303.45 236.7 303.1 232.3 300.75 231.65 299.4 235 297.4 232.3 295.35 232.65
	M 277.2 171.85
	Q 275.55 175.55 281.6 179.55 285.3 175.85 284.95 171.5 282.6 170.85 281.25 174.2 279.25 171.5 277.2 171.85 Z"/>
					</g>
					<g id="Layer26_0_FILL">
						<path class="treeWood" fill="#AE663D" stroke="none" d="
	M 175.1 177.55
	L 172.05 177.55 172.05 191.1 159.3 172.85
	Q 154.6 171.5 172.05 195.7
	L 172.05 212.5 175.1 212.5 175.1 177.55
	M 252.7 151.35
	L 249 151.35 249 176.9 252.7 176.9 252.7 151.35 Z"/>
					</g>
					<g id="Layer25_0_FILL">
						<path class="vegetation" fill="#77A951" stroke="none" d="
	M 192.55 179.55
	Q 200.95 173.5 200.95 165.1 200.95 156.4 192.55 150 184.15 144.3 172.05 144.3 160.3 144.3 151.9 150 143.15 156.4 143.15 165.1 143.15 173.5 151.9 179.55 160.3 185.95 172.05 185.95 184.15 185.95 192.55 179.55
	M 236.25 106.65
	Q 230.2 116.05 230.2 129.15 230.2 142.25 236.25 151.35 242.3 160.75 250.7 160.75 258.75 160.75 264.8 151.35 270.85 142.25 270.85 129.15 270.85 116.05 264.8 106.65 258.75 97.6 250.7 97.6 242.3 97.6 236.25 106.65 Z"/>
					</g>
					<g id="Layer24_0_FILL">
						<path class="vegetation" fill="#77A951" stroke="none" d="
	M 158.3 221.9
	Q 160.65 221.9 161.95 220.2 163 219.55 163.3 218.55 164.65 218.9 166.35 218.9 170.05 218.9 172.4 216.2 175.1 213.85 175.1 210.15 175.1 206.45 172.4 203.75 170.05 201.4 166.35 201.4 162.65 201.4 159.95 203.75 157.6 206.45 157.6 210.15 157.6 210.8 157.6 211.15 155.95 211.5 154.6 212.5 152.9 214.15 152.9 216.55 152.9 218.9 154.6 220.2 156.25 221.9 158.3 221.9
	M 338.35 240.05
	Q 341.05 237.7 341.05 234 341.05 230.3 338.35 227.6 336 225.25 332.3 225.25 328.65 225.25 325.95 227.6 323.6 230.3 323.6 234 323.6 237.7 325.95 240.05 328.65 242.75 332.3 242.75 336 242.75 338.35 240.05 Z"/>
					</g>
					<g id="Layer22_0_FILL">
						<path class="rightRoof" fill="#D05041" stroke="none" d="
	M 220 173.85
	L 236.8 186.7 264.35 171.15 244.5 159.55 220 173.85 Z"/>
					</g>
					<g id="Layer21_0_FILL">
						<path class="leftWall" fill="#C57F42" stroke="none" d="
	M 212.25 191.35
	L 183.35 172.3 183.7 215.3 212.25 234.35 212.25 191.35 Z"/>
					</g>
					<g id="Layer20_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 192.1 149.85
	L 236.45 174.8 243.1 171.4
	Q 220.05 150.55 196.3 139.95
	L 192.1 149.85 Z"/>
					</g>
					<g id="Layer19_0_FILL">
						<path class="frontFascia" fill="#EBB17B" stroke="none" d="
	M 226.85 160.95
	L 212 190.6 229.75 192.6 239.75 172.85 226.85 160.95 Z"/>
					</g>
					<g id="Layer18_0_FILL">
						<path class="frontWall" fill="#EFA258" stroke="none" d="
	M 240.15 172.65
	L 211.9 191.6 212.25 233.65 264.35 201.7 264.35 170.8 240.8 184.45 240.15 172.65 Z"/>
					</g>
					<g id="Layer17_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 210.9 142.2
	L 205.9 142.2 205.9 152.65 210.9 152.65 210.9 142.2 Z"/>
					</g>
					<g>
						<path id="Layer16_0_FILL" class="leftRoof" fill="#F2563B" stroke="none" d="
	M 210.25 195.5
	L 227.4 160.95 195.45 141.35 177.65 175.85 210.25 195.5 Z"/>
					</g>
					<g>
						<path id="sun" fill="#E3BD0E" stroke="none" d="
	M 257.05 15.95
	Q 251.7 15.95 248 19.65 244.3 23.35 244.3 28.7 244.3 34.1 248 37.8 251.7 41.5 257.05 41.5 262.45 41.5 266.15 37.8 269.85 34.1 269.85 28.7 269.85 23.35 266.15 19.65 262.45 15.95 257.05 15.95 Z"/>
					</g>
					<g id="Layer8_0_FILL">
						<path fill="#975A42" stroke="none" d="
	M 238.45 189.65
	Q 238.295703125 189.362109375 238.05 189.1 237.35 188.3 236.2 188.3 235.05 188.3 234.15 189.1 233.3 189.9 233.2 191.05 233.1 192.2 233.8 193 234.55 193.8 235.7 193.8 236.85 193.8 237.7 193 238.1970703125 192.558203125 238.45 192 238.6552734375 191.56484375 238.7 191.05 238.7671875 190.276953125 238.45 189.65
	M 220.55 197.55
	Q 220 197.55 219.5 197.75 218.95 197.95 218.5 198.35 217.933203125 198.8833984375 217.7 199.55 217.5833984375 199.916796875 217.55 200.3 217.4923828125 200.96171875 217.7 201.5 217.852734375 201.9103515625 218.15 202.25 218.95 203.05 220.1 203.05 221.25 203.05 222.05 202.25 222.95 201.45 223.05 200.3 223.15 199.15 222.4 198.35 222.05 197.95 221.65 197.75 221.15 197.55 220.55 197.55 Z"/>
					</g>
					<g id="Layer7_0_FILL">
						<path class="door" fill="#B65041" stroke="none" d="
	M 233.55 206.75
	L 225.9 211.95 226.25 225.5 233.95 220.35 233.55 206.75 Z"/>
					</g>
					<g>
						<path id="windowOne" class="windows" fill="#975A42" stroke="none" d="
	M 188.65 198.4
	L 188.8 204.1 198.65 210.45 198.55 204.75 188.65 198.4
	M 208.45 216.8
	L 208.35 211.1 198.55 204.75 198.65 210.45 208.45 216.8
	M 188.8 204.1
	L 188.95 209.8 198.8 216.15 198.65 210.45 188.8 204.1
	M 208.6 222.5
	L 208.45 216.8 198.65 210.45 198.8 216.15 208.6 222.5 Z"/>
					</g>
					<g>
						<path id="windowThree" class="windows" fill="#975A42" stroke="none" d="
	M 311.7 214.1
	L 318.55 217.55 318.45 211.9 311.6 208.45 311.7 214.1
	M 325.4 221
	L 325.25 215.35 318.45 211.9 318.55 217.55 325.4 221
	M 318.4 206.2
	L 311.5 202.75 311.6 208.45 318.45 211.9 318.4 206.2
	M 325.25 215.35
	L 325.2 209.7 318.4 206.2 318.45 211.9 325.25 215.35 Z"/>
					</g>
					<g id="Layer2_0_FILL">
						<path class="door" fill="#B65041" stroke="none" d="
	M 259.7 183.25
	L 244.6 191.9 244.6 213.8 259.7 204.55 259.7 183.25 Z"/>
					</g>
					<path id="windowTwo" fill="#975A42" class="windows" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" d="
	M 223.05 200.3
	Q 222.95 201.45 222.05 202.25 221.25 203.05 220.1 203.05 218.95 203.05 218.15 202.25 217.852734375 201.9103515625 217.7 201.5 217.4923828125 200.96171875 217.55 200.3 217.5833984375 199.916796875 217.7 199.575 217.933203125 198.8833984375 218.5 198.35 218.95 197.95 219.5 197.75 220 197.55 220.55 197.55 221.15 197.55 221.65 197.75 222.05 197.95 222.4 198.35 223.15 199.15 223.05 200.3 Z
	M 238.7 191.05
	Q 238.6552734375 191.56484375 238.45 192 238.1970703125 192.558203125 237.7 193 236.85 193.8 235.7 193.8 234.55 193.8 233.8 193 233.1 192.2 233.2 191.05 233.3 189.9 234.15 189.1 235.05 188.3 236.2 188.3 237.35 188.3 238.05 189.1 238.295703125 189.362109375 238.45 189.65 238.7671875 190.276953125 238.7 191.05 Z"/>
					<path fill="#F2563B" stroke="none" d=" M 351.95 211.2 L 351.8 211.2 346.05 215.1 346.05 225.2 351.95 221.6 351.95 211.2 Z"/>
					<path id="Layer6_0_1_STROKES" class="windowRims" stroke="#AE663D" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" fill="none" d="
	M 198.55 204.75
	L 208.35 211.1 208.45 216.8 208.6 222.5 198.8 216.15 188.95 209.8 188.8 204.1 188.65 198.4 198.55 204.75 198.65 210.45 208.45 216.8
	M 198.8 216.15
	L 198.65 210.45 188.8 204.1"/>
					<path id="Layer5_0_1_STROKES" class="windowRims" stroke="#AE663D" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" fill="none" d="
	M 325.25 215.35
	L 325.4 221 318.55 217.55 311.7 214.1 311.6 208.45 311.5 202.75 318.4 206.2 325.2 209.7 325.25 215.35 318.45 211.9 318.55 217.55
	M 318.4 206.2
	L 318.45 211.9 311.6 208.45"/>
				</defs>
				<g id="shadow">
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use xlink:href="#bottomShadow"/>
					</g>
				</g>
				<g transform="matrix( 1, 0, 0, 1, 0,0) ">
					<use xlink:href="#sun"/>
				</g>
				<g id="earth">
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer52_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer51_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer50_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer48_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer47_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer46_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer45_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer44_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer43_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer41_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer40_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer38_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer37_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer36_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer35_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer34_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowFour"/>
						<use class="element" xlink:href="#Layer32_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer30_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer27_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer26_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer25_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer24_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer22_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer21_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer20_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer19_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer18_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer17_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer16_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer8_0_FILL"/>
						<use class="element" xlink:href="#windowTwo"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer7_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowOne"/>
						<use class="element" xlink:href="#Layer6_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowThree"/>
						<use class="element" xlink:href="#Layer5_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer2_0_FILL"/>
					</g>
				</g>
			</svg>
			<! -- End of SVG file -->
			<! -- Moon/Sun Toggle -->
			<div id="toggleButton" class="day-toggle">
				<div class="sun-icon"></div>
				<label class="switch">
            <input id="toggleCheckbox" type="checkbox">
            <div class="slider"></div>
        </label>
				<div class="cloud-icon"></div>
			</div>
			<! -- Moon/Sun Toggle -->
			<! -- End of Container -->
		</div>
			</div>
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">岁月无影</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">星光不问赶路人 岁月不负有心人</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/13/一道赋值面试题引发的思考4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="李斌">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="岁月无影">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">一道赋值面试题引发的思考4</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-13T21:35:22+08:00">
                2019-03-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="实现一个run方法-使得run-fucArr-能顺序输出1、2、3"><a href="#实现一个run方法-使得run-fucArr-能顺序输出1、2、3" class="headerlink" title="实现一个run方法,使得run(fucArr)能顺序输出1、2、3"></a>实现一个run方法,使得run(fucArr)能顺序输出1、2、3</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fucArr = [</span><br><span class="line">	next =&gt; &#123;</span><br><span class="line">		setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">			next()</span><br><span class="line">		&#125;, <span class="number">300</span>)</span><br><span class="line">	&#125;,</span><br><span class="line">	next =&gt; &#123;</span><br><span class="line">		setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">			next()</span><br><span class="line">		&#125;, <span class="number">200</span>)</span><br><span class="line">	&#125;,</span><br><span class="line">	next =&gt; &#123;</span><br><span class="line">		setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">			next()</span><br><span class="line">		&#125;, <span class="number">100</span>)</span><br><span class="line">	&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> run = <span class="function"><span class="params">arr</span>=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="题目简析"><a href="#题目简析" class="headerlink" title="题目简析"></a>题目简析</h3><p>我们观察 <code>fucArr</code> 每一个子项都具有如下结构：</p>
<ol>
<li>接收一个方法 <code>next</code></li>
<li>有一个计时器，计时器回调方法体内对应着相应的输出</li>
<li>输出结束调用 <code>next</code> 方法。</li>
</ol>
<p>他们的差异就是：计时器时间逐个减少。</p>
<p>直接循环调用 <code>3</code> 个方法肯定是不可取的。为了能按序输出，函数的执行过程应该是上一个函数 <code>console</code> 之后， 再执行下一个函数，而接收的这个 <code>next</code>参数就是执行下一个方法的关键。因为是头到尾依次调用，我们就把<code>fucArr</code> 称之为一个队列。</p>
<h3 id="思路一-递归"><a href="#思路一-递归" class="headerlink" title="思路一:递归"></a>思路一:递归</h3><p>我们假象自己是个编译器，然后把执行的过程进行单步拆解。</p>
<ol>
<li><code>fucArr</code> 是做先执行等待队列第一个，等待中的函数队列为原函数队列的slice(1)；</li>
<li>等待next执行后，然后又执行等待函数队列的第一个函数，等待中的函数队列为原函数队列的slice(1)；</li>
</ol>
<p>听着是不是很像一个<strong> 递归 </strong>的过程，没错，那我们先用递归来实现一下<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> run = <span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">	<span class="comment">// 递归语句千万条，找到出口第一条，那咱们判断递归出口的条件就是等待队列为空if (arr.length === 0) return;</span></span><br><span class="line">	<span class="comment">// 好的，一句话执行过程写完了</span></span><br><span class="line">	arr[<span class="number">0</span>](<span class="function"><span class="params">()</span> =&gt;</span> run(arr.slice(<span class="number">1</span>)));</span><br><span class="line">&#125;</span><br><span class="line">run(fucArr)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1 2 3；</span></span><br></pre></td></tr></table></figure></p>
<h3 id="思路二"><a href="#思路二" class="headerlink" title="思路二"></a>思路二</h3><p>现在我们从递归的思路中跳脱出来，换种思路继续思考…..</p>
<p>上一个函数执行到某个时机触发了下一个函数的执行。</p>
<p>也就是说上一个函数 <code>trigger</code>，下一个函数才开始执行。</p>
<p>根据描述 <code>trigger</code> 实际上做的就是触发等待队列的第一个函数的执行，因此我们可以如下定义。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> run = <span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">const</span> trigger = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (arr.length === <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">		arr.shift()();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>那么 <code>trigger</code> 何时进行调用呢？很显然， 上一个函数式通过<code>next</code> 去触发下一个函数调用，因此 <code>trigger</code> 应该就是函数接收的<code>next</code>，我们为了方便参数绑定需要重构一下咱们的等待队列函数。当然不要忘了，首次执行要手动<code>trigger</code>一下喔。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> run = <span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">const</span> trigger = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (arr.length === <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">		arr.shift()();</span><br><span class="line">	&#125;</span><br><span class="line">	arr = arr.map(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">return</span><span class="function"><span class="params">()</span> =&gt;</span> val(trigger);</span><br><span class="line">	&#125;)</span><br><span class="line">	trigger();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>其实做参数绑定还有一种更优雅一点的方式，bind，所以大家注意咯，bind不单单能绑定this喔。</p>
<p>我们可以稍微改动一下:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> run = <span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">const</span> trigger = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (arr.length === <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">		arr.shift()();</span><br><span class="line">	&#125;</span><br><span class="line">	arr = arr.map(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> val.bind(<span class="literal">null</span>, trigger);</span><br><span class="line">	&#125;)</span><br><span class="line">	trigger();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>都9102年了，既然是前端面试那肯定少不了<code>Promise</code> 的对吧，那我们可不可以掺入一些<code>Promise</code>的元素在里面呢？答案是必然的。</p>
<p>根据<code>Promise</code>的特性，当本身状态改变，去触发<code>then</code>里的方法（这里不要深究这句话，意思了解就好）。是<code>resolve</code> 作为本身状态改动的方法。那状态改变是去做什么事呢？好的，没错<code>trigger</code>。那何时状态改变呢？上一个函数<code>next</code>调用的时候。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> run = <span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">const</span> trigger = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (arr.length === <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">		arr.shift()();</span><br><span class="line">	&#125;</span><br><span class="line">	arr = arr.map(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">return</span><span class="function"><span class="params">()</span> =&gt;</span><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">			val(resolve)</span><br><span class="line">		&#125;).then(trigger);</span><br><span class="line">	&#125;)</span><br><span class="line">	trigger();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="redux的思路"><a href="#redux的思路" class="headerlink" title="redux的思路"></a>redux的思路</h3><p>现在继续清空上面的思路，不要被干扰。</p>
<p>首先给 <code>applymiddleware</code>（以下简称<code>amw</code>）一个简单的定义，<code>amw</code>是接收若干个函数作为参数，最终会返回一个函数，这个函数调用，会按照顺序，依次执行前面作为参数传入的函数。为了不把问题复杂化，请接收我的误导引导，不要怀疑。</p>
<p>以下是作为参数传入的函数要求的结构以下称<code>a</code>结构:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">store=&gt;<span class="function"><span class="params">next</span>=&gt;</span><span class="function"><span class="params">action</span>=&gt;</span>&#123;</span><br><span class="line">	<span class="comment">// dosomething...</span></span><br><span class="line">	next()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>a</code>结构在第一次调用时，会返回一个方法，第二次调用时返回第二个方法，我们先来看源码的一个操作过程。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const chain = middlewares.map(middleware =&gt; middleware(middlewareAPI))</span><br></pre></td></tr></table></figure></p>
<p>首先是一层循环调用，使得函数体变为<code>b</code>结构：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">next=&gt;<span class="function"><span class="params">action</span>=&gt;</span>&#123;</span><br><span class="line">	<span class="comment">// dosomething...</span></span><br><span class="line">	next()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这样做是为了以闭包的形式在 <code>dosomething</code> 中能够使用到 <code>middlewareApi</code>。</p>
<p>根据<code>b</code>结构我们可以稍稍改变下原题 ：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fucArr = [</span><br><span class="line">	next =&gt; <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">		setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(action++);</span><br><span class="line">			next(action)</span><br><span class="line">		&#125;, <span class="number">300</span>)</span><br><span class="line">	&#125;,</span><br><span class="line">	next =&gt; <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">		setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(action++);</span><br><span class="line">			next(action)</span><br><span class="line">		&#125;, <span class="number">200</span>)</span><br><span class="line">	&#125;,</span><br><span class="line">	next =&gt; <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">		setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(action++);</span><br><span class="line">			next(action)</span><br><span class="line">		&#125;, <span class="number">100</span>)</span><br><span class="line">	&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> run = <span class="function"><span class="params">arr</span>=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 实现一个run方法，run方法接收fucArr为参数；返回一个函数，这个函数接收一个参数1，最终，依次输出1、2、3// run(fucArr)(1) =&gt; 1 2 3</span></span><br></pre></td></tr></table></figure></p>
<p>变题相对于多了一个参数传递的过程，实际上我们需要顺序执行的其实是结构c：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">action=&gt;&#123;</span><br><span class="line">    <span class="comment">// dosomething...</span></span><br><span class="line">	next()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这些关键还是要如何构建每个函数接收的参数<code>next</code>。</p>
<p>我们做如下假设，当<code>fucArr</code>只有一个函数时 返回的就应该是：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fucArr[<span class="number">0</span>](<span class="function"><span class="params">()</span>=&gt;</span>&#123;&#125;) <span class="comment">// 为了避免报错，next应为一个空函数// 即：</span></span><br><span class="line">action =&gt; &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(action++);</span><br><span class="line">        <span class="comment">//(()=&gt;&#123;&#125;) 这玩意儿就是接收的next</span></span><br><span class="line">        (<span class="function"><span class="params">()</span>=&gt;</span>&#123;&#125;)(action)</span><br><span class="line">    &#125;, <span class="number">300</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>当<code>fucArr</code>有两个函数时返回：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fucArr[<span class="number">0</span>](fucArr[<span class="number">1</span>](<span class="function"><span class="params">()</span>=&gt;</span>&#123;&#125;))</span><br><span class="line"><span class="comment">// 即：</span></span><br><span class="line">action =&gt; &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(action++);        </span><br><span class="line">		fucArr[<span class="number">1</span>](<span class="function"><span class="params">()</span>=&gt;</span>&#123;&#125;)(action)</span><br><span class="line">    &#125;, <span class="number">300</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>当有三个函数的时返回：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fucArr[0](fucArr[1](fucArr[2](()=&gt;&#123;&#125;))</span><br></pre></td></tr></table></figure></p>
<p>仔细观察返回函数的结构发现，所有的函数都是接受上一个函数调用后的返回值（以下称模式1），最后一个函数接收的是一个空函数。我们尝试构建模式1：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 首先初始想法模型是这样的</span></span><br><span class="line"><span class="comment">// 但是由于咱们是程序执行，不能像上面咱们描述问题的时候，继续往next里塞函数。</span></span><br><span class="line"><span class="comment">// 而在遍历到 next 的下一个函数的时当前是无法明确next应该是什么，因此我们需要将模式改变一下。</span></span><br><span class="line">pre(next());</span><br><span class="line"><span class="comment">// 当遍历到next下一个节点时，把当前函数作为arg传入进来</span></span><br><span class="line">arg=&gt;pre(next(arg))</span><br></pre></td></tr></table></figure></p>
<p><code>pre</code> + <code>next</code> + 遍历，这三个关键词没错，就是reduce。因此：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reduceResult = fucArr.reduce(<span class="function">(<span class="params">pre,next</span>)=&gt;</span> <span class="function">(<span class="params">...arg</span>)=&gt;</span>pre(next(...arg)));</span><br><span class="line"><span class="comment">// 我们发现这个返回的还是一个 arg=&gt;pre(next(arg)) 这样模式的函数，接收的参数任然是一个函数。</span></span><br><span class="line"><span class="comment">// 于是乎真的需要返回的函数其实是 return reduceResult(()=&gt;&#123;&#125;);</span></span><br></pre></td></tr></table></figure>
<p>所以最终形态是<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> run = <span class="function"><span class="params">arr</span>=&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> reduceResult = arr.reduce(<span class="function">(<span class="params">pre,next</span>)=&gt;</span> <span class="function">(<span class="params">...arg</span>)=&gt;</span>pre(next(...arg)));</span><br><span class="line">	<span class="keyword">return</span> reduceResult(<span class="function"><span class="params">()</span>=&gt;</span>&#123;&#125;);</span><br><span class="line">&#125;</span><br><span class="line">run(fucArr)(<span class="number">1</span>);</span><br><span class="line"><span class="comment">// 1 2 3</span></span><br></pre></td></tr></table></figure></p>
<h3 id="一个关于连续回调的面试题"><a href="#一个关于连续回调的面试题" class="headerlink" title="一个关于连续回调的面试题"></a><a href="http://www.qiutianaimeili.com/html/page/2019/03/8rfqp1yeul5.html" target="_blank" rel="noopener">一个关于连续回调的面试题</a></h3><h3 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h3><p>我们每次只执行数组中的第一个方法，同时，我们向next里面塞一个方法，这个方法会剔除掉数组中的第一个元素然后继续执行数组中“第一个方法”。（注意，这个方法是数组中的第二个方法）<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> run = <span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length === <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    arr[<span class="number">0</span>](<span class="function"><span class="params">()</span> =&gt;</span> run(arr.slice(<span class="number">1</span>)));</span><br><span class="line">&#125;</span><br><span class="line">run(fucArr)</span><br></pre></td></tr></table></figure></p>
<h3 id="async-await"><a href="#async-await" class="headerlink" title="async await"></a>async await</h3><p>上面的问题其实就是异步串行，async中利用for配合await可以比较简单的写出异步串行：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">go</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;fucArr.length;i++)&#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span>=&gt;</span>&#123;</span><br><span class="line">            fucArr[i](resolve);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">go();</span><br></pre></td></tr></table></figure></p>
<h3 id="reduce-Promise-resolve"><a href="#reduce-Promise-resolve" class="headerlink" title="reduce Promise.resolve()"></a>reduce Promise.resolve()</h3><p>在我的另外一篇文章中，有介绍reduce和Promise.resolve()的妙用， reduce使用Promise.resolve()构造连续Promise回调，它们也是解决异步串行的一个方法：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">go</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    fucArr.reduce(<span class="function">(<span class="params">prev,next</span>)=&gt;</span>&#123;    </span><br><span class="line">        <span class="keyword">return</span> prev.then(<span class="function"><span class="params">()</span>=&gt;</span><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span>=&gt;</span>&#123;</span><br><span class="line">            next(resolve);</span><br><span class="line">        &#125;))</span><br><span class="line">    &#125;,<span class="built_in">Promise</span>.resolve());</span><br><span class="line">&#125;</span><br><span class="line">go();</span><br></pre></td></tr></table></figure></p>
<h3 id="map-Promise-resolve"><a href="#map-Promise-resolve" class="headerlink" title="map Promise.resolve()"></a>map Promise.resolve()</h3><p>和上的思路差不多，但是写法略有不同：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> resolve=<span class="built_in">Promise</span>.resolve();</span><br><span class="line">fucArr.map(<span class="function"><span class="params">item</span>=&gt;</span>&#123;</span><br><span class="line">     resolve=resolve.then(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(item);</span><br><span class="line">     &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a>Generator</h3><p>利用Generator方法也是很容易解决这种异步串行问题：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">go</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;fucArr.length;i++)&#123;</span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span>=&gt;</span>&#123;</span><br><span class="line">            fucArr[i](resolve);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> g=go();</span><br><span class="line"><span class="keyword">let</span> run=<span class="function">(<span class="params">p</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!p.done)&#123;</span><br><span class="line">        p.value.then(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">            run(g.next())</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">run(g.next());</span><br></pre></td></tr></table></figure></p>
<h3 id="reduceRight"><a href="#reduceRight" class="headerlink" title="reduceRight"></a>reduceRight</h3><p>我们假设fucArr中的三个方法分别为f1,f2,f3,那么f1(f2(f3(()=&gt;{})))肯定是可以满足要求的，reduceRight就是把这写方法拼凑成f1(f2(f3(()=&gt;{})))这种形式。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fucArr.reduceRight(<span class="function">(<span class="params">prev, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span><span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        next(prev)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, () =&gt; &#123;&#125;)()</span><br></pre></td></tr></table></figure></p>
<p>让我们看看reduceRight执行的具体过程：<br><img src="/2019/03/13/一道赋值面试题引发的思考4/6.png" alt></p>
<h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h3><p>上面讲了如何用reduceRight去拼凑f1(f2(f3(()=&gt;{})))这种形式，其实用reduce也可以拼凑的：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> run = <span class="function"><span class="params">arr</span> =&gt;</span> arr.reduce(<span class="function">(<span class="params">prev, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">        prev(<span class="function"><span class="params">()</span> =&gt;</span> next(...args))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">run(fucArr)(<span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure></p>
<p>它这种拼凑方式我认为是最复杂的，下面看看具体步骤：<br><img src="/2019/03/13/一道赋值面试题引发的思考4/7.png" alt><br>虚线框表示在闭包内，剪头代表参数归谁.</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">const</span> fucArr = [</span></span><br><span class="line">				next =&gt; &#123;</span><br><span class="line"><span class="javascript">					setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">						<span class="built_in">console</span>.log(<span class="number">1</span>);</span></span><br><span class="line">						next()</span><br><span class="line">					&#125;, 900)</span><br><span class="line">				&#125;,</span><br><span class="line">				next =&gt; &#123;</span><br><span class="line"><span class="javascript">					setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">						<span class="built_in">console</span>.log(<span class="number">2</span>);</span></span><br><span class="line">						next()</span><br><span class="line">					&#125;, 500)</span><br><span class="line">				&#125;,</span><br><span class="line">				next =&gt; &#123;</span><br><span class="line"><span class="javascript">					setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">						<span class="built_in">console</span>.log(<span class="number">3</span>);</span></span><br><span class="line">						next()</span><br><span class="line">					&#125;, 100)</span><br><span class="line">				&#125;</span><br><span class="line">			]</span><br><span class="line"></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> run1 = <span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">				(<span class="keyword">async</span> <span class="function"><span class="keyword">function</span>(<span class="params">arr</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">					<span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">						<span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span></span><br><span class="line">							arr[i](resolve);</span><br><span class="line">						&#125;);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;)(arr);</span><br><span class="line">			&#125;;</span><br><span class="line"></span><br><span class="line"><span class="javascript">			<span class="comment">//run1(fucArr);</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> run2 = <span class="function"><span class="params">arr</span> =&gt;</span></span></span><br><span class="line">				arr.reduce(</span><br><span class="line">					(next, v) =&gt;</span><br><span class="line"><span class="javascript">					next.then(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line">						v(res);</span><br><span class="line">					&#125;)),</span><br><span class="line"><span class="javascript">					<span class="built_in">Promise</span>.resolve()</span></span><br><span class="line">				);</span><br><span class="line"></span><br><span class="line"><span class="javascript">			<span class="comment">//run2(fucArr);</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">			<span class="function"><span class="keyword">function</span> <span class="title">run3</span>(<span class="params">fucArr</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">				<span class="keyword">if</span>(!fucArr.length) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="javascript">				fucArr.shift()(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line">					run3(fucArr);</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;</span><br><span class="line">            </span><br><span class="line"><span class="javascript">			<span class="comment">//run3(fucArr)</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> run4 = <span class="function">(<span class="params">arr</span>) =&gt;</span> arr.reduceRight(<span class="function">(<span class="params">p, v</span>) =&gt;</span> v.bind(<span class="keyword">this</span>, p), () =&gt; &#123;&#125;)();</span></span><br><span class="line"><span class="javascript">			<span class="comment">//run4(fucArr)</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">			<span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">run5</span>(<span class="params">arr</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">				<span class="keyword">for</span>(<span class="keyword">var</span> item <span class="keyword">of</span> arr) &#123;</span></span><br><span class="line"><span class="javascript">					<span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line">						item(res);</span><br><span class="line">					&#125;)</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">			<span class="comment">//run5(fucArr);</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">			<span class="keyword">const</span> run6 = <span class="function"><span class="params">arr</span> =&gt;</span> </span></span><br><span class="line"><span class="javascript">			                arr.reduce(<span class="function">(<span class="params">prev, next</span>) =&gt;</span></span></span><br><span class="line"><span class="javascript">			                                    (...args) =&gt; prev(<span class="function"><span class="params">()</span> =&gt;</span> next(...args))</span></span><br><span class="line"><span class="javascript">			                             )(<span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;);</span></span><br><span class="line"><span class="javascript">			run6(fucArr);    <span class="comment">// redux思想</span></span></span><br><span class="line">			</span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> run7 = <span class="function"><span class="params">arr</span>=&gt;</span> arr.length &amp;&amp; arr.shift()(<span class="function"><span class="params">()</span> =&gt;</span> run(arr))</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="自定义事件-new-CustomEvent-amp-document-createEvent"><a href="#自定义事件-new-CustomEvent-amp-document-createEvent" class="headerlink" title="自定义事件 new CustomEvent &amp; document.createEvent"></a>自定义事件 new CustomEvent &amp; document.createEvent</h2><h3 id="new-CustomEvent"><a href="#new-CustomEvent" class="headerlink" title="new CustomEvent"></a>new CustomEvent</h3><p>最近一个项目中需要模拟发起事件，在mdn中发现了这个构造方法CustomEvent<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//构造方法 CustomerEvent() 创建一个新的 CustomEvent 对象。</span></span><br><span class="line">event = = <span class="keyword">new</span> CustomEvent(typeArg ,customEventInit)</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>参数说明：</p>
</blockquote>
<ul>
<li>typeArg是DOMString代表事件的名称。一个表示 event 名字的字符串</li>
<li>customEventInit（可选）：一个字典类型参数，有如下字段<ul>
<li>detail, 可选的默认值是 null 的任意类型数据，是一个与 event 相关的值</li>
<li>bubbles 一个布尔值，表示该事件能否冒泡。 来自 EventInit。注意：测试chrome默认为不冒泡。</li>
<li>cancelable 一个布尔值，表示该事件是否可以取消。 来自 EventInit</li>
</ul>
</li>
</ul>
<h4 id="发起事件用法"><a href="#发起事件用法" class="headerlink" title="发起事件用法"></a>发起事件用法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> CustomEvent(eventName, params);</span><br></pre></td></tr></table></figure>
<h4 id="创建一个自定义事件"><a href="#创建一个自定义事件" class="headerlink" title="创建一个自定义事件"></a>创建一个自定义事件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> event=<span class="keyword">new</span> CustomEvent(<span class="string">'mock-event'</span>);</span><br></pre></td></tr></table></figure>
<h4 id="传递参数"><a href="#传递参数" class="headerlink" title="传递参数"></a>传递参数</h4><p>这里值得注意，需要把想要传递的参数包裹在一个包含detail属性的对象，否则传递的参数不会被挂载？（这里不太确定，我试过传id和params都不会生效）<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createEvent</span>(<span class="params">params, eventName = <span class="string">'mock-event'</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> CustomEvent(eventName, &#123; <span class="attr">detail</span>: params &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> event = createEvent(&#123; <span class="attr">id</span>: <span class="string">'0010'</span> &#125;);</span><br></pre></td></tr></table></figure></p>
<h4 id="发起事件调用dispatchEvent方法发起事件，传入你刚才创建的方法"><a href="#发起事件调用dispatchEvent方法发起事件，传入你刚才创建的方法" class="headerlink" title="发起事件调用dispatchEvent方法发起事件，传入你刚才创建的方法"></a>发起事件调用dispatchEvent方法发起事件，传入你刚才创建的方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.dispatchEvent(event);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//监听事件</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'mock-event'</span>, (&#123; <span class="attr">detail</span>: &#123; id &#125; &#125;) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'id'</span>,id) <span class="comment">// 会在控制台打印0010</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="DEMO"><a href="#DEMO" class="headerlink" title="DEMO"></a>DEMO</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ev = <span class="built_in">document</span>.getElementById(<span class="string">'main'</span>);    </span><br><span class="line"><span class="keyword">const</span> event = <span class="keyword">new</span> CustomEvent(<span class="string">'eventName'</span>, &#123;         </span><br><span class="line">	detail: &#123;               </span><br><span class="line">		message: <span class="string">'Hello World'</span>,</span><br><span class="line">		 time: <span class="keyword">new</span> <span class="built_in">Date</span>()         </span><br><span class="line">	&#125;,</span><br><span class="line">	bubbles: <span class="literal">true</span>,</span><br><span class="line">	cancelable: <span class="literal">true</span>,</span><br><span class="line">	    </span><br><span class="line">&#125;);    </span><br><span class="line">ev.addEventListener(<span class="string">'eventName'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;      </span><br><span class="line">	<span class="built_in">console</span>.log(e);    </span><br><span class="line">&#125;, );    </span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;      </span><br><span class="line">	ev.dispatchEvent(event); <span class="comment">//给节点分派一个合成事件</span></span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>
<h3 id="document-createEvent"><a href="#document-createEvent" class="headerlink" title="document.createEvent"></a>document.createEvent</h3><p>首先创建自定义事件对象<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> event = <span class="built_in">document</span>.createEvent(<span class="string">"CustomEvent"</span>);</span><br></pre></td></tr></table></figure></p>
<p>然后初始化事件对象<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">event.initCustomEvent(<span class="keyword">in</span> DOMString type, <span class="keyword">in</span> boolean canBubble, <span class="keyword">in</span> boolean cancelable, <span class="keyword">in</span> any detail);</span><br></pre></td></tr></table></figure></p>
<p>其中，第一个参数为要处理的事件名<br>第二个参数为表明事件是否冒泡<br>第三个参数为表明是否可以取消事件的默认行为<br>第四个参数为细节参数</p>
<blockquote>
<p>例如：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">event.initCustomEvent(<span class="string">"test"</span>, <span class="literal">true</span>, <span class="literal">true</span>, &#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>表明要处理的事件名为test，事件冒泡，可以取消事件的默认行为，细节参数为一个对象{a:”test”, b:”success”}</p>
<p>最后触发事件对象<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">document.dispatchEvent(event);</span><br><span class="line"></span><br><span class="line">//当然我们需要定义监控test事件的处理程序</span><br><span class="line">document.addEventListener(&quot;test&quot;, function(e)&#123;</span><br><span class="line">    var obj = e.detail;</span><br><span class="line">    alert(obj.a + &quot;  &quot; + obj.b);</span><br><span class="line">&#125;);</span><br><span class="line">// &quot;test success&quot;</span><br></pre></td></tr></table></figure></p>
<h3 id="综合"><a href="#综合" class="headerlink" title="综合"></a>综合</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dispatchEvent</span>(<span class="params">element, type, data</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> event; <span class="comment">// Event and CustomEvent on IE9-11 are global objects, not constructors</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(isFunction(Event) &amp;&amp; isFunction(CustomEvent)) &#123;</span><br><span class="line">		event = <span class="keyword">new</span> CustomEvent(type, &#123;</span><br><span class="line">			detail: data,</span><br><span class="line">			bubbles: <span class="literal">true</span>,</span><br><span class="line">			cancelable: <span class="literal">true</span></span><br><span class="line">		&#125;);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		event = <span class="built_in">document</span>.createEvent(<span class="string">'CustomEvent'</span>);</span><br><span class="line">		event.initCustomEvent(type, <span class="literal">true</span>, <span class="literal">true</span>, data);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> element.dispatchEvent(event);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">window</span>.CustomEvent === <span class="string">'undefined'</span>) &#123;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">CustomEvent</span>(<span class="params">event, params</span>) </span>&#123;</span><br><span class="line">            params = params || &#123;</span><br><span class="line">                bubbles: <span class="literal">false</span>,</span><br><span class="line">                cancelable: <span class="literal">false</span>,</span><br><span class="line">                detail: <span class="literal">undefined</span></span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">var</span> evt = <span class="built_in">document</span>.createEvent(<span class="string">'Events'</span>);</span><br><span class="line">            <span class="keyword">var</span> bubbles = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> name <span class="keyword">in</span> params) &#123;</span><br><span class="line">                (name === <span class="string">'bubbles'</span>) ? (bubbles = !!params[name]) : (evt[name] = params[name]);</span><br><span class="line">            &#125;</span><br><span class="line">            evt.initEvent(event, bubbles, <span class="literal">true</span>);</span><br><span class="line">            <span class="keyword">return</span> evt;</span><br><span class="line">        &#125;;</span><br><span class="line">        CustomEvent.prototype = <span class="built_in">window</span>.Event.prototype;</span><br><span class="line">        <span class="built_in">window</span>.CustomEvent = CustomEvent;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="comment">//触发如下：</span></span><br><span class="line"><span class="built_in">document</span>.dispatchEvent(event);</span><br><span class="line"></span><br><span class="line"><span class="comment">//3</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">window</span>.CustomEvent) &#123;</span><br><span class="line">        <span class="built_in">window</span>.CustomEvent = <span class="function"><span class="keyword">function</span>(<span class="params">type, config</span>) </span>&#123;</span><br><span class="line">            config = config || &#123; <span class="attr">bubbles</span>: <span class="literal">false</span>, <span class="attr">cancelable</span>: <span class="literal">false</span>, <span class="attr">detail</span>: <span class="literal">undefined</span>&#125;;</span><br><span class="line">            <span class="keyword">var</span> e = <span class="built_in">document</span>.createEvent(<span class="string">'CustomEvent'</span>);</span><br><span class="line">            e.initCustomEvent(type, config.bubbles, config.cancelable, config.detail);</span><br><span class="line">            <span class="keyword">return</span> e;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="built_in">window</span>.CustomEvent.prototype = <span class="built_in">window</span>.Event.prototype;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//触发的时候</span></span><br><span class="line"><span class="keyword">var</span> dispatch = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> e = <span class="keyword">new</span> CustomEvent(event, &#123;</span><br><span class="line">            bubbles: <span class="literal">true</span>,</span><br><span class="line">            cancelable: <span class="literal">true</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//noinspection JSUnresolvedFunction</span></span><br><span class="line">        <span class="built_in">window</span>.dispatchEvent(e);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="数组拍平-扁平化"><a href="#数组拍平-扁平化" class="headerlink" title="数组拍平,扁平化"></a>数组拍平,扁平化</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [</span><br><span class="line">  [</span><br><span class="line">    [<span class="string">'1-7'</span>, <span class="string">'2-6'</span>],</span><br><span class="line">    <span class="string">'4-6'</span>,</span><br><span class="line">    [</span><br><span class="line">      [<span class="string">'2-0'</span>, <span class="string">'1-4'</span>],</span><br><span class="line">      [<span class="string">'3-9'</span>],</span><br><span class="line">      <span class="string">'4-5'</span>,</span><br><span class="line">    ],</span><br><span class="line">  ]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// Q1: 完成数组 flat 函数</span></span><br><span class="line"><span class="comment">// const flat= arr =&gt; [].concat(...arr.map(v =&gt; Array.isArray(v) ? flat(v) : v));</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flat</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// code</span></span><br><span class="line">   </span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">arr = flat(arr);</span><br><span class="line"><span class="built_in">console</span>.log(arr);</span><br></pre></td></tr></table></figure>
<h3 id="递归-1"><a href="#递归-1" class="headerlink" title="递归"></a>递归</h3><p>如果有对递归不太熟悉的同学，可以看看我的读书笔记 <a href="https://juejin.im/post/5c6524f8f265da2dc0063ef0" target="_blank" rel="noopener">【算法图解】读书笔记：第3章 递归</a>。</p>
<p>递归的核心就在于两步：找到基线条件和递归条件。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flat</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> result = []; <span class="comment">// 利用闭包缓存我们的结果</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_flat</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    arr.forEach(<span class="function"><span class="params">element</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="built_in">Array</span>.isArray(element)) &#123; <span class="comment">// 递归条件</span></span><br><span class="line">        _flat(element);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123; <span class="comment">// 基准条件</span></span><br><span class="line">        result.push(element); <span class="comment">// 将符合结果的值推入我们的结果数组中</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  _flat(arr);</span><br><span class="line">  arr = result;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="迭代-广度优先搜索"><a href="#迭代-广度优先搜索" class="headerlink" title="迭代 - 广度优先搜索"></a>迭代 - 广度优先搜索</h3><p>这个思路是我借鉴《图解算法》中广度优先搜索算法章节写的。</p>
<p>1.创建一个数组，保存结果<br>2.创建一个队列<br>3.初始化<br>4.使用 while 循环去遍历 list 里面的每一项<br>5.将第一项推出队列</p>
<ul>
<li>如果是数组，将子项依次推入队列</li>
<li>如果是字符串，将子项推入结果</li>
</ul>
<p>6.当 list 长度为0时候，遍历完成</p>
<p>但是广度优先搜索的结果是不保证顺序的。</p>
<ul>
<li>参考书籍：《图解算法》</li>
<li>不推荐的笔记，没书可以看看<a href="https://github.com/ykst615/Blogs/issues/9" target="_blank" rel="noopener">【算法图解】读书笔记：第6章 广度优先搜索</a></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flat</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> result = []; <span class="comment">// 利用闭包缓存我们的结果</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_flat</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    arr.forEach(<span class="function"><span class="params">element</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="built_in">Array</span>.isArray(element)) &#123; <span class="comment">// 递归条件</span></span><br><span class="line">        _flat(element);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123; <span class="comment">// 基准条件</span></span><br><span class="line">        result.push(element); <span class="comment">// 将符合结果的值推入我们的结果数组中</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  _flat(arr);</span><br><span class="line">  arr = result;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="投机取巧的-toString"><a href="#投机取巧的-toString" class="headerlink" title="投机取巧的 toString"></a>投机取巧的 toString</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// [1,2,3,[44,55,[66,77]]].toString().split(",")</span></span><br><span class="line"><span class="comment">// [1,2,3,[44,55,[66,77]]].join().split(",")</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// [1,2,3,[44,55,[66,77]]].flat(2)</span></span><br><span class="line"><span class="comment">// ["1", "2", "3", "44", "55", "66", "77"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 首页你得确定你的数据里面没有字符串 ',' 哦</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flat</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  arr.toString().split(<span class="string">','</span>)</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// or </span></span><br><span class="line"><span class="comment">// 异曲同工</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flat</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  arr.join(<span class="string">','</span>).split(<span class="string">','</span>)</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="迭代-深度优先搜索"><a href="#迭代-深度优先搜索" class="headerlink" title="迭代 - 深度优先搜索"></a>迭代 - 深度优先搜索</h3><p>原理与广度优先搜索类似，通过模拟栈的行为去遍历数组。好处是能够保证有序输出。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flat</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> ret = [];</span><br><span class="line">  <span class="keyword">let</span> s = []; <span class="comment">// 模拟栈的行为</span></span><br><span class="line">  <span class="keyword">if</span> (arr.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = arr.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123; <span class="comment">// 先进后出</span></span><br><span class="line">      s.push(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> (s.length &gt; <span class="number">0</span>) &#123; <span class="comment">// 当栈空了，遍历完成</span></span><br><span class="line">    <span class="keyword">let</span> cur = s.pop();</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(cur)) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = cur.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        s.push(cur[i]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      ret.push(cur);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="数组计算-‘1-7’-gt-1-7-7"><a href="#数组计算-‘1-7’-gt-1-7-7" class="headerlink" title="数组计算 ‘1-7’ =&gt; 1 * 7 = 7"></a>数组计算 ‘1-7’ =&gt; 1 * 7 = 7</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calc</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 随手骚一下，不建议 eval</span></span><br><span class="line">  arr = arr.map(<span class="function"><span class="params">el</span> =&gt;</span> <span class="built_in">eval</span>(el.replace(<span class="string">'-'</span>, <span class="string">'*'</span>)));</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calc</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  arr = arr.map(<span class="function"><span class="params">el</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> list = el.split(<span class="string">'-'</span>);</span><br><span class="line">    <span class="keyword">return</span> +list[<span class="number">0</span>] * +list[<span class="number">1</span>];</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="打印出1-5-2-8-6-3-10-9-7-4"><a href="#打印出1-5-2-8-6-3-10-9-7-4" class="headerlink" title="打印出1 5 2 8 6 3 10 9 7 4"></a>打印出1 5 2 8 6 3 10 9 7 4</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">5  2</span><br><span class="line">8  6 3</span><br><span class="line">10 9 7 4</span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/13/一道赋值面试题引发的思考4/1.png" alt></p>
<h3 id="思路1"><a href="#思路1" class="headerlink" title="思路1:"></a>思路1:</h3><p><img src="/2019/03/13/一道赋值面试题引发的思考4/2.png" alt><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printArr</span>(<span class="params">n</span>) </span>&#123;   <span class="comment">//n 代表行数</span></span><br><span class="line">	<span class="keyword">var</span> a = [],</span><br><span class="line">		k = <span class="number">1</span>,  <span class="comment">//起始值</span></span><br><span class="line">		p = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">		p = i;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; n - i; j++) &#123;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span>(a[j]) &#123;</span><br><span class="line">				a[p][j] = k;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				a[j] = [];</span><br><span class="line">				a[j][j] = k;</span><br><span class="line">			&#125;</span><br><span class="line">			k++;</span><br><span class="line">			p++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(printArr(<span class="number">4</span>));</span><br><span class="line"><span class="built_in">console</span>.log(printArr(<span class="number">5</span>));</span><br><span class="line"><span class="built_in">console</span>.log(printArr(<span class="number">6</span>));</span><br></pre></td></tr></table></figure></p>
<h3 id="思路2-从最后一位往前push-if当前push个数-行数-行数-1"><a href="#思路2-从最后一位往前push-if当前push个数-行数-行数-1" class="headerlink" title="思路2:从最后一位往前push,if当前push个数=行数,行数+1"></a>思路2:从最后一位往前push,if当前push个数=行数,行数+1</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//i 代表行数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printArr</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> a = [],</span><br><span class="line">		k = <span class="number">1</span>;   <span class="comment">//起始值</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> j = i; j &lt; n; j++) &#123;</span><br><span class="line">			<span class="keyword">if</span>(a[j]) &#123;</span><br><span class="line">				a[j].unshift(k++)</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				a[j] = [];</span><br><span class="line">				a[j].unshift(k++)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(printArr(<span class="number">4</span>));</span><br><span class="line"><span class="built_in">console</span>.log(printArr(<span class="number">5</span>));</span><br><span class="line"><span class="built_in">console</span>.log(printArr(<span class="number">6</span>));</span><br></pre></td></tr></table></figure>
<h2 id="快速排序-三路快排"><a href="#快速排序-三路快排" class="headerlink" title="快速排序,三路快排"></a>快速排序,三路快排</h2><h3 id="快速排序算法的优化思路总结"><a href="#快速排序算法的优化思路总结" class="headerlink" title="快速排序算法的优化思路总结"></a><a href="https://juejin.im/post/5aa94ca6518825558252120c" target="_blank" rel="noopener">快速排序算法的优化思路总结</a></h3><h3 id="算法与面试之-如何准备算法面试"><a href="#算法与面试之-如何准备算法面试" class="headerlink" title="算法与面试之-如何准备算法面试"></a><a href="https://juejin.im/post/5b23761a6fb9a00e67148e9e" target="_blank" rel="noopener">算法与面试之-如何准备算法面试</a></h3><blockquote>
<p>快速排序是什么?</p>
</blockquote>
<p>快速排序是图灵奖得主C. A. R. Hoare（1934–）于1960时提出来的。<br>快速排序是对冒泡排序的一种改进。它的基本思想是：通过一趟排序将要排序的数据分割成独立的两部分，其中一部分的所有数据都比另外一不部分的所有数据都要小，然后再按此方法对这两部分数据分别进行快速排序，整个排序过程可以递归进行，以此达到整个数据变成有序序列。</p>
<p>整个排序过程只需要三步：</p>
<ul>
<li>在数据集之中，选择一个元素作为”基准”（pivot）。</li>
<li>所有小于”基准”的元素，都移到”基准”的左边；所有大于”基准”的元素，都移到”基准”的右边。</li>
<li>对”基准”左边和右边的两个子集，不断重复第一步和第二步，直到所有子集只剩下一个元素为止。 </li>
</ul>
<blockquote>
<p>引自wikipedia 快速排序（英语：Quicksort），又称划分交换排序（partition-exchange sort），一种排序算法，最早由东尼·霍尔提出。在平均状况下，排序n个项目要Ο(n log n)次比较。在最坏状况下则需要Ο(n2)次比较，但这种状况并不常见。事实上，快速排序通常明显比其他Ο(n log n)算法更快，因为它的内部循环（inner loop）可以在大部分的架构上很有效率地被实现出来。</p>
</blockquote>
<h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><ol>
<li>找到该数组的基准点(中间数)，并创建两个空数组left和right；</li>
<li>遍历数组，拿出数组中的每个数和基准点进行比较，如果比基准点小就放到left数组中，如果比基准点大就放到right数组中；</li>
<li>对数组left和right进行递归调用。</li>
</ol>
<h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (arr.length&lt;=<span class="number">1</span>) &#123;<span class="keyword">return</span> arr;&#125;</span><br><span class="line">	<span class="keyword">var</span> left = [],</span><br><span class="line">		right = [],</span><br><span class="line">		baseDot =<span class="built_in">Math</span>.round(arr.length/<span class="number">2</span>),</span><br><span class="line">		base =arr.splice(baseDot, <span class="number">1</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i =<span class="number">0</span>; i &lt;arr.length; i++) &#123;</span><br><span class="line">		<span class="keyword">if</span> (arr[i] &lt; base) &#123;</span><br><span class="line">			left.push(arr[i])</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			right.push(arr[i])</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> quickSort(left).concat([base], quickSort(right));</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> arr=[<span class="number">5</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">7</span>];</span><br><span class="line"><span class="built_in">console</span>.log(quick_sort(arr));</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">qSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (arr.length==<span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> [];</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">var</span> left = [];</span><br><span class="line">      <span class="keyword">var</span> right = [];</span><br><span class="line">      <span class="keyword">var</span> pivot = arr[<span class="number">0</span>];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i =<span class="number">1</span>; i &lt;arr.length; i++) &#123; <span class="comment">// 注意这里的起始值，因为有一个作为flag了</span></span><br><span class="line">         <span class="keyword">if</span> (arr[i] &lt; pivot) &#123;</span><br><span class="line">               left.push(arr[i]);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              right.push(arr[i]);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> qSort(left).concat(pivot, qSort(right));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">qSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (arr.length==<span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> [];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> left = [];</span><br><span class="line">  <span class="keyword">var</span> right = [];</span><br><span class="line">  <span class="keyword">var</span> pivot = arr[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i =<span class="number">1</span>; i &lt;arr.length; i++) &#123; <span class="comment">// 注意这里的起始值，因为有一个作为flag了</span></span><br><span class="line">     <span class="keyword">if</span> (arr[i] &lt; pivot) &#123;</span><br><span class="line">           left.push(arr[i]);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          right.push(arr[i]);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> [...qSort(left),pivot,...qSort(right)]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实现一个quickSort的封装，并且定义left和right，找到数组的基准点baseDot和对应的基数base，然后遍历数组的每一项和base进行对比，最后递归调用，给出一个跳出条件<code>if (arr.length &lt;= 1) {return arr;}</code></p>
<h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">function quickSort(array, left, right) &#123;</span><br><span class="line">	var length =array.length;</span><br><span class="line">		left =typeof left ===&apos;number&apos;? left :0,</span><br><span class="line">		right =typeof right ===&apos;number&apos;? right : length-1;</span><br><span class="line"></span><br><span class="line">    if (left &lt; right) &#123;</span><br><span class="line">        var index = left -1;</span><br><span class="line">        for (var i = left; i &lt;= right; i++) &#123;</span><br><span class="line">            if (array[i] &lt;= array[right]) &#123;</span><br><span class="line">                index++;</span><br><span class="line">                var temp = array[index];</span><br><span class="line">                array[index] = array[i];</span><br><span class="line">                array[i] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        quickSort(array, left, index -1);</span><br><span class="line">        quickSort(array, index +1, right);</span><br><span class="line">    &#125;</span><br><span class="line">    return array;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>快速排序的基本思想就是分治法</p>
<blockquote>
<p>引自wikipedia 在计算机科学中，分治法是建基于多项分支递归的一种很重要的算法范式。字面上的解释是“分而治之”，就是把一个复杂的问题分成两个或更多的相同或相似的子问题，直到最后子问题可以简单的直接求解，原问题的解即子问题的解的合并。</p>
</blockquote>
<h3 id="快速排序的改进方法：三路快排"><a href="#快速排序的改进方法：三路快排" class="headerlink" title="快速排序的改进方法：三路快排"></a>快速排序的改进方法：三路快排</h3><blockquote>
<p><strong>定义:</strong> 三路快速排序是快速排序的的一个优化版本， 将数组分成三段， 即小于基准元素、 等于 基准元素和大于基准元素， 这样可以比较高效的处理数组中存在相同元素的情况,其它特征与快速排序基本相同。</p>
</blockquote>
<p>我这里简单概括一下思路，有兴趣的同学可到上面的链接上阅读：<a href="http://www.cnblogs.com/noKing/archive/2017/11/29/7922397.html" target="_blank" rel="noopener">快速排序及优化(Java实现)</a></p>
<ul>
<li>随机选取基准值base(支点随机选取),参考<a href="https://juejin.im/post/5aa94ca6518825558252120c" target="_blank" rel="noopener">快速排序算法的优化思路总结</a></li>
<li>配合着使用插入排序(当问题规模较小时，近乎有序时，插入排序表现的很好)</li>
<li>当大量数据，且重复数多时，用三路快排</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">			<span class="built_in">console</span>.time(<span class="string">"test0"</span>)</span></span><br><span class="line"><span class="javascript">			<span class="function"><span class="keyword">function</span> <span class="title">qSort</span>(<span class="params">arr</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">				<span class="keyword">if</span>(arr.length == <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="javascript">					<span class="keyword">return</span> [];</span></span><br><span class="line">				&#125;</span><br><span class="line"><span class="javascript">				<span class="keyword">var</span> left = [];</span></span><br><span class="line"><span class="javascript">				<span class="keyword">var</span> right = [];</span></span><br><span class="line"><span class="javascript">				<span class="keyword">var</span> pivot = arr[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">				<span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; arr.length; i++) &#123; <span class="comment">// 注意这里的起始值，因为有一个作为flag了</span></span></span><br><span class="line"><span class="javascript">					<span class="keyword">if</span>(arr[i] &lt; pivot) &#123;</span></span><br><span class="line">						left.push(arr[i]);</span><br><span class="line"><span class="javascript">					&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">						right.push(arr[i]);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line"><span class="javascript">				<span class="keyword">return</span> [...qSort(left), pivot, ...qSort(right)];</span></span><br><span class="line">			&#125;</span><br><span class="line"><span class="javascript">			<span class="built_in">console</span>.log(qSort([<span class="number">9</span>, <span class="number">4</span>, <span class="number">10</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">9</span>, <span class="number">4</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">9</span>, <span class="number">9</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">0</span>]));</span></span><br><span class="line"><span class="javascript">			<span class="built_in">console</span>.timeEnd(<span class="string">"test0"</span>)</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">			<span class="built_in">console</span>.time(<span class="string">"test1"</span>)</span></span><br><span class="line"><span class="javascript">			<span class="function"><span class="keyword">function</span> <span class="title">qSort3</span>(<span class="params">arr</span>) </span>&#123;       <span class="comment">//三路快排</span></span></span><br><span class="line"><span class="javascript">				<span class="keyword">if</span>(arr.length == <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="javascript">					<span class="keyword">return</span> [];</span></span><br><span class="line">				&#125;</span><br><span class="line"><span class="javascript">				<span class="keyword">var</span> left = [];</span></span><br><span class="line"><span class="javascript">				<span class="keyword">var</span> center = [];</span></span><br><span class="line"><span class="javascript">				<span class="keyword">var</span> right = [];</span></span><br><span class="line"><span class="javascript">				<span class="keyword">var</span> pivot = arr[<span class="number">0</span>];    <span class="comment">//偷懒，直接取第一个,实际取值情况 参考[快速排序算法的优化思路总结]</span></span></span><br><span class="line"><span class="javascript">				<span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;      </span></span><br><span class="line"><span class="javascript">					<span class="keyword">if</span>(arr[i] &lt; pivot) &#123;</span></span><br><span class="line">						left.push(arr[i]);</span><br><span class="line"><span class="javascript">					&#125; <span class="keyword">else</span> <span class="keyword">if</span>(arr[i] == pivot) &#123;</span></span><br><span class="line">						center.push(arr[i]);</span><br><span class="line"><span class="javascript">					&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">						right.push(arr[i]);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line"><span class="javascript">				<span class="keyword">return</span> [...qSort3(left), ...center, ...qSort3(right)];</span></span><br><span class="line">			&#125;</span><br><span class="line"><span class="javascript">			<span class="built_in">console</span>.log(qSort3([<span class="number">9</span>, <span class="number">4</span>, <span class="number">10</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">9</span>, <span class="number">4</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">9</span>, <span class="number">9</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">0</span>]))</span></span><br><span class="line"><span class="javascript">			<span class="built_in">console</span>.timeEnd(<span class="string">"test1"</span>)</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/13/一道赋值面试题引发的思考4/3.png" alt><br><img src="/2019/03/13/一道赋值面试题引发的思考4/4.png" alt><br><img src="/2019/03/13/一道赋值面试题引发的思考4/5.png" alt><br>可以看到对有重复数据的数据优化还是很可观的。</p>
<h2 id="Vue利用Object-freeze-提升性能"><a href="#Vue利用Object-freeze-提升性能" class="headerlink" title="Vue利用Object.freeze()提升性能"></a>Vue利用Object.freeze()提升性能</h2><p>Object.freeze()是ES5新增的特性，可以冻结一个对象，防止对象被修改。<br>Object.freeze() 可以冻结一个对象，冻结之后不能向这个对象添加新的属性，不能修改其已有属性的值，不能删除已有属性，以及不能修改该对象已有属性的可枚举性、可配置性、可写性。该方法返回被冻结的对象。<br>当你把一个普通的 JavaScript 对象传给 Vue 实例的  data  选项，Vue 将遍历此对象所有的属性，并使用  Object.defineProperty  把这些属性全部转为 getter/setter，这些 getter/setter 对用户来说是不可见的，但是在内部它们让 Vue 追踪依赖，在属性被访问和修改时通知变化。<br>但 Vue 在遇到像 Object.freeze() 这样被设置为不可配置之后的对象属性时，不会为对象加上 setter getter 等数据劫持的方法。</p>
<p>vue 1.0.18+对其提供了支持，对于data或vuex里使用freeze冻结了的对象，vue不会做getter和setter的转换。</p>
<p>如果你有一个巨大的数组或Object，并且确信数据不会修改，使用Object.freeze()可以让性能大幅提升。在我的实际开发中，这种提升大约有5~10倍，倍数随着数据量递增。</p>
<p>并且，Object.freeze()冻结的是值，你仍然可以将变量的引用替换掉。举个例子：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">"item in list"</span>&gt;</span>&#123;&#123; item.value &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    data: &#123;</span><br><span class="line">        <span class="comment">// vue不会对list里的object做getter、setter绑定</span></span><br><span class="line">        list: <span class="built_in">Object</span>.freeze([</span><br><span class="line">            &#123; <span class="attr">value</span>: <span class="number">1</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">value</span>: <span class="number">2</span> &#125;</span><br><span class="line">        ])</span><br><span class="line">    &#125;,</span><br><span class="line">    created () &#123;</span><br><span class="line">        <span class="comment">// 界面不会有响应</span></span><br><span class="line">        <span class="keyword">this</span>.list[<span class="number">0</span>].value = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 下面两种做法，界面都会响应</span></span><br><span class="line">        <span class="keyword">this</span>.list = [</span><br><span class="line">            &#123; <span class="attr">value</span>: <span class="number">100</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">value</span>: <span class="number">200</span> &#125;</span><br><span class="line">        ];</span><br><span class="line">        <span class="keyword">this</span>.list = <span class="built_in">Object</span>.freeze([</span><br><span class="line">            &#123; <span class="attr">value</span>: <span class="number">100</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">value</span>: <span class="number">200</span> &#125;</span><br><span class="line">        ]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>vue的文档没有写上这个特性，但这是个非常实用的做法，对于纯展示的大数据，都可以使用Object.freeze提升性能。<br>由于 Object.freeze() 会把对象冻结，所以比较适合展示类的场景，如果你的数据属性需要改变，可以重新替换成一个新的 Object.freeze()的对象。</p>
<h2 id="使用-vm-compile-编译dom"><a href="#使用-vm-compile-编译dom" class="headerlink" title="使用 vm.$compile 编译dom"></a>使用 vm.$compile 编译dom</h2><p>$compile函数可以用来手动调用vue的方式来编译dom。在你需要处理某个jQuery插件生成的html或者服务端返回的html的时候，这个函数可以派上用场。但注意这是个私有api，随时都有可能变动，并且这种做法有违vue的理念。仅在不得已的时候使用。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    data: &#123;</span><br><span class="line">        value: <span class="string">'demo'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    created () &#123;</span><br><span class="line">        <span class="keyword">let</span> dom = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">        dom.innerHTML = <span class="string">'&#123;&#123; value &#125;&#125;'</span>;</span><br><span class="line">        <span class="keyword">this</span>.$compile(dom);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JS/" rel="tag"># JS</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/02/26/写一个webpack内联代码插件/" rel="next" title="写一个webpack内联代码插件">
                <i class="fa fa-chevron-left"></i> 写一个webpack内联代码插件
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/03/29/JavaScript手写代码秘籍/" rel="prev" title="JavaScript手写代码秘籍">
                JavaScript手写代码秘籍 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/tx.jpg" alt="李斌">
            
              <p class="site-author-name" itemprop="name">李斌</p>
              <p class="site-description motion-element" itemprop="description">想要飞得高，那就把地平线忘掉</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">172</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">121</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/libin1991" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://juejin.im/user/57e737f6c4c971005f6bcd8d" target="_blank" title="juejin">
                      
                        <i class="fa fa-fw fa-spinner"></i>juejin</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#实现一个run方法-使得run-fucArr-能顺序输出1、2、3"><span class="nav-number">1.</span> <span class="nav-text">实现一个run方法,使得run(fucArr)能顺序输出1、2、3</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#题目简析"><span class="nav-number">1.1.</span> <span class="nav-text">题目简析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#思路一-递归"><span class="nav-number">1.2.</span> <span class="nav-text">思路一:递归</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#思路二"><span class="nav-number">1.3.</span> <span class="nav-text">思路二</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#redux的思路"><span class="nav-number">1.4.</span> <span class="nav-text">redux的思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#一个关于连续回调的面试题"><span class="nav-number">1.5.</span> <span class="nav-text">一个关于连续回调的面试题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#递归"><span class="nav-number">1.6.</span> <span class="nav-text">递归</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#async-await"><span class="nav-number">1.7.</span> <span class="nav-text">async await</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#reduce-Promise-resolve"><span class="nav-number">1.8.</span> <span class="nav-text">reduce Promise.resolve()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#map-Promise-resolve"><span class="nav-number">1.9.</span> <span class="nav-text">map Promise.resolve()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Generator"><span class="nav-number">1.10.</span> <span class="nav-text">Generator</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#reduceRight"><span class="nav-number">1.11.</span> <span class="nav-text">reduceRight</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#reduce"><span class="nav-number">1.12.</span> <span class="nav-text">reduce</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#总结"><span class="nav-number">1.13.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自定义事件-new-CustomEvent-amp-document-createEvent"><span class="nav-number">2.</span> <span class="nav-text">自定义事件 new CustomEvent &amp; document.createEvent</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#new-CustomEvent"><span class="nav-number">2.1.</span> <span class="nav-text">new CustomEvent</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#发起事件用法"><span class="nav-number">2.1.1.</span> <span class="nav-text">发起事件用法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建一个自定义事件"><span class="nav-number">2.1.2.</span> <span class="nav-text">创建一个自定义事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#传递参数"><span class="nav-number">2.1.3.</span> <span class="nav-text">传递参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#发起事件调用dispatchEvent方法发起事件，传入你刚才创建的方法"><span class="nav-number">2.1.4.</span> <span class="nav-text">发起事件调用dispatchEvent方法发起事件，传入你刚才创建的方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DEMO"><span class="nav-number">2.1.5.</span> <span class="nav-text">DEMO</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#document-createEvent"><span class="nav-number">2.2.</span> <span class="nav-text">document.createEvent</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#综合"><span class="nav-number">2.3.</span> <span class="nav-text">综合</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数组拍平-扁平化"><span class="nav-number">3.</span> <span class="nav-text">数组拍平,扁平化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#递归-1"><span class="nav-number">3.1.</span> <span class="nav-text">递归</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#迭代-广度优先搜索"><span class="nav-number">3.2.</span> <span class="nav-text">迭代 - 广度优先搜索</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#投机取巧的-toString"><span class="nav-number">3.3.</span> <span class="nav-text">投机取巧的 toString</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#迭代-深度优先搜索"><span class="nav-number">3.4.</span> <span class="nav-text">迭代 - 深度优先搜索</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数组计算-‘1-7’-gt-1-7-7"><span class="nav-number">3.5.</span> <span class="nav-text">数组计算 ‘1-7’ =&gt; 1 * 7 = 7</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#打印出1-5-2-8-6-3-10-9-7-4"><span class="nav-number">4.</span> <span class="nav-text">打印出1 5 2 8 6 3 10 9 7 4</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#思路1"><span class="nav-number">4.1.</span> <span class="nav-text">思路1:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#思路2-从最后一位往前push-if当前push个数-行数-行数-1"><span class="nav-number">4.2.</span> <span class="nav-text">思路2:从最后一位往前push,if当前push个数=行数,行数+1</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#快速排序-三路快排"><span class="nav-number">5.</span> <span class="nav-text">快速排序,三路快排</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#快速排序算法的优化思路总结"><span class="nav-number">5.1.</span> <span class="nav-text">快速排序算法的优化思路总结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#算法与面试之-如何准备算法面试"><span class="nav-number">5.2.</span> <span class="nav-text">算法与面试之-如何准备算法面试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤"><span class="nav-number">5.3.</span> <span class="nav-text">步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#方法一"><span class="nav-number">5.4.</span> <span class="nav-text">方法一</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#方法二"><span class="nav-number">5.5.</span> <span class="nav-text">方法二</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#快速排序的改进方法：三路快排"><span class="nav-number">5.6.</span> <span class="nav-text">快速排序的改进方法：三路快排</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue利用Object-freeze-提升性能"><span class="nav-number">6.</span> <span class="nav-text">Vue利用Object.freeze()提升性能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用-vm-compile-编译dom"><span class="nav-number">7.</span> <span class="nav-text">使用 vm.$compile 编译dom</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">李斌</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

  
  <!--
  	描述：点击红心
  -->
  <script type="text/javascript" src="/js/src/clicklove.js"></script>
  <!--
  	描述：复制代码
  -->
  <script type="text/javascript" src="/js/src/clipboard.min.js"></script>
  <script type="text/javascript" src="/js/src/clipboard-use.js"></script>
</body>
</html>


