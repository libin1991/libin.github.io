<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="react,toast,插件,">










<meta name="description" content="为什么选择插件，而不是组件？ 调用简单  this.$toast(“xxx”) ，不必再模板中提前定义 , 动态插入移除 插件独立于业务 更新不影响代码逻辑，做到热更新 抽象,封装 适用于toast，Dialog，Alert，Message，picker，Actionsheet等组件   react-toast-alert demo地址 使用方法：  12345678910111213141516">
<meta name="keywords" content="react,toast,插件">
<meta property="og:type" content="article">
<meta property="og:title" content="知否 ？知否 ？React插件了解一下！">
<meta property="og:url" content="http://yoursite.com/2019/05/03/知否-？知否-？React插件了解一下！/index.html">
<meta property="og:site_name" content="啷哩咯啷">
<meta property="og:description" content="为什么选择插件，而不是组件？ 调用简单  this.$toast(“xxx”) ，不必再模板中提前定义 , 动态插入移除 插件独立于业务 更新不影响代码逻辑，做到热更新 抽象,封装 适用于toast，Dialog，Alert，Message，picker，Actionsheet等组件   react-toast-alert demo地址 使用方法：  12345678910111213141516">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2019/05/03/知否-？知否-？React插件了解一下！/1.gif">
<meta property="og:image" content="http://yoursite.com/2019/05/03/知否-？知否-？React插件了解一下！/2.png">
<meta property="og:image" content="http://yoursite.com/2019/05/03/知否-？知否-？React插件了解一下！/3.png">
<meta property="og:updated_time" content="2019-05-09T15:11:28.745Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="知否 ？知否 ？React插件了解一下！">
<meta name="twitter:description" content="为什么选择插件，而不是组件？ 调用简单  this.$toast(“xxx”) ，不必再模板中提前定义 , 动态插入移除 插件独立于业务 更新不影响代码逻辑，做到热更新 抽象,封装 适用于toast，Dialog，Alert，Message，picker，Actionsheet等组件   react-toast-alert demo地址 使用方法：  12345678910111213141516">
<meta name="twitter:image" content="http://yoursite.com/2019/05/03/知否-？知否-？React插件了解一下！/1.gif">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/05/03/知否-？知否-？React插件了解一下！/">





  <title>知否 ？知否 ？React插件了解一下！ | 啷哩咯啷</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband">
    	<div class="eevee"><div class="body"><div class="head"><div class="ears"><div class="ear"><div class="lobe"></div></div><div class="ear"><div class="lobe"></div></div></div><div class="face"><div class="eyes"><div class="eye"><div class="eyelid"></div></div><div class="eye"><div class="eyelid"></div></div></div><div class="nose"></div><div class="mouth"></div></div></div><div class="chest"><div class="fur"><div class="patch"></div></div><div class="fur"><div class="patch"></div></div><div class="fur"><div class="patch"></div></div></div><div class="legs"><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div></div><div class="tail"><div class="tail"><div class="tail"><div class="tail"><div class="tail"><div class="tail -end"></div></div></div></div></div></div></div></div>
    </div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
    	<div id="sky">
				<div id="background" class="container">
			<!-- svg file -->
			<svg id="svgout" height="100%" width="100%" viewbox="0 0 550 400">
				<defs>
					<g id="bottomShadow">
						<path fill="#000000" stroke="none" d="
		M 270.5 225.95
		L 127.35 316.65 266.8 400 409.6 309.25 270.5 225.95 Z"/>
					</g>
					<g id="Layer52_0_FILL">
						<path class="topGrass" fill="#B9D668" stroke="none" d="
	M 397.85 229.3
	L 397.85 225.6 269.85 152 135.75 228.6 135.75 233.65 262.1 306.55 397.85 229.3 Z"/>
					</g>
					<g id="Layer51_0_FILL">
						<path class="leftSideGrass" fill="#6E9E4F" stroke="none" d="
	M 135.1 229.95
	L 135.1 256.85 262.1 328.4 262.1 301.85 135.1 229.95 Z"/>
					</g>
					<g id="Layer50_0_FILL">
						<path class="rightGrassTop" fill="#8CB154" stroke="none" d="
	M 397.85 225.95
	L 395.8 225.95 261.75 301.55 261.75 328.4 397.85 251.15 397.85 225.95 Z"/>
					</g>
					<g id="Layer48_0_FILL">
						<path class="crustLeftTop" fill="#955541" stroke="none" d="
	M 135.45 282.4
	L 135.75 298.15 262.1 372.1 261.75 355.65 135.45 282.4 Z"/>
					</g>
					<g id="Layer47_0_FILL">
						<path class="middleLeftCrust" fill="#C77E61" stroke="none" d="
	M 135.1 270.3
	L 135.1 283.05 275.9 364.35 271.85 348.9 135.1 270.3 Z"/>
					</g>
					<g id="Layer46_0_FILL">
						<path class="crustLeftTop" fill="#955541" stroke="none" d="
	M 135.1 255.15
	L 135.1 270.3 262.1 343.55 262.1 328.05 135.1 255.15 Z"/>
					</g>
					<g id="Layer45_0_FILL">
						<path class="topRightCrust" fill="#A47237" stroke="none" d="
	M 397.5 294.5
	L 397.5 277 261.75 355.3 261.75 372.75 397.5 294.5 Z"/>
					</g>
					<g id="Layer44_0_FILL">
						<path class="middleRightCrust" fill="#C89451" stroke="none" d="
	M 397.5 269.95
	L 397.15 266.6 262.1 343.2 262.1 355.95 397.5 279.7 397.5 269.95 Z"/>
					</g>
					<g id="Layer43_0_FILL">
						<path class="topRightCrust" fill="#A47237" stroke="none" d="
	M 397.5 266.6
	L 397.5 250.45 261.75 328.4 261.75 343.85 397.5 266.6 Z"/>
					</g>
					<g id="Layer41_0_FILL">
						<path class="greyRoad" fill="#B2B2B1" stroke="none" d="
	M 295.05 283.05
	Q 299.05 280.35 308.45 275.3 317.85 269.95 323.6 266.9
	L 268.8 233.65 338.05 191.35 309.15 174.55 177.75 254.5
	Q 191.55 262.2 198.25 266.25 204.65 269.95 209.7 271.95
	L 241.6 250.45 295.05 283.05 Z"/>
					</g>
					<g id="Layer40_0_FILL">
						<path fill="#FFFFFF" stroke="none" d="
	M 199.95 256.85
	Q 194.55 261.2 191.9 262.2
	L 194.9 263.9 200.95 259.2 199.95 256.85
	M 225.8 243.75
	L 224.8 241.75 211.05 250.8 212.05 252.8 225.8 243.75
	M 308.15 275.65
	L 296.7 266.6 295.35 268.6 306.8 277.7 308.15 275.65
	M 275.9 253.5
	L 274.55 255.5 285.95 264.55 287.3 262.55 275.9 253.5
	M 251.7 227.3
	L 250.7 225.25 236.9 234.35 237.9 236.35 251.7 227.3
	M 257.05 240.7
	L 254.05 240.7 268.8 249.8 269.5 247.75 257.05 240.7
	M 277.2 207.8
	L 263.45 216.85 264.45 218.9 278.25 209.8 277.2 207.8
	M 305.1 192.65
	L 304.1 190.65 290.3 199.75 291.35 201.75 305.1 192.65 Z"/>
					</g>
					<g id="Layer38_0_FILL">
						<path class="frontFascia" fill="#ECB27B" stroke="none" d="
	M 359.25 187.95
	L 346.4 174.95 333.85 202.9 359.25 187.95 Z"/>
					</g>
					<g id="Layer37_0_FILL">
						<path class="frontWall" fill="#EFA258" stroke="none" d="
	M 334 201.05
	L 334.35 232 359.2 217.55 359.25 187.95 334 201.05 Z"/>
					</g>
					<g id="Layer36_0_FILL">
						<path class="leftWall" fill="#C57F42" stroke="none" d="
	M 334.35 232.3
	L 334.35 205.1 305.1 191.35 305.1 216.85 334.35 232.3 Z"/>
					</g>
					<g id="Layer35_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 329.7 167.9
	L 331.05 167.9 344.55 176.7 347.85 176.7 363 192.25 363.15 189.55 350.65 176.7 350.55 176.7 334.25 167.5 334.25 159.1 329.7 159.1 329.7 164.9 322.65 160.95 322.3 162.15 329.7 167 329.7 167.9 Z"/>
					</g>
					<g id="Layer34_0_FILL">
						<path class="leftRoof" fill="#F2563B" stroke="none" d="
	M 334.05 207.05
	L 350.65 176.7 322.1 160.45 302.1 192.05 334.05 207.05 Z"/>
					</g>
					<g id="Layer30_0_FILL">
						<path id="windowFour" class="windows" stroke="none" fill="#975A42" d="
	M 341.35 203.3
	Q 340.9 203.45 340.5 203.8 340.1 204.2 339.85 204.75 339.7 205 339.7 205.3 339.6 205.75 339.7 206.1 339.7 206.15 339.7 206.2 339.8 206.5 340 206.8 340.55 207.4 341.45 207.4 342.35 207.4 343 206.8 343.4 206.5 343.65 206.1 343.85 205.75 343.95 205.3 344.05 204.4 343.55 203.8 343.3 203.45 343 203.3 342.65 203.15 342.2 203.15 341.8 203.15 341.35 203.3
	M 355.85 198.45
	Q 355.8 198.2 355.6 198 355.1 197.4 354.2 197.4 353.35 197.4 352.6 198 351.85 198.65 351.7 199.55 351.7 199.7 351.7 199.85 351.6 200.5 352 201.05 352.55 201.65 353.45 201.65 354.3 201.65 355.05 201.05 355.45 200.7 355.7 200.25 355.8 200.05 355.9 199.85 355.95 199.7 355.95 199.55 356.05 198.95 355.85 198.45 Z"/>
						<path class="door" fill="#B65041" stroke="none" d="
	M 351.95 211.2
	L 351.8 211.2 346.05 215.1 346.05 225.2 351.95 221.6 351.95 211.2
	M 351.2 211.2
	L 351.35 211.2 351.35 211.1 351.2 211.2 Z"/>
					</g>
					<g>
						<path id="Layer30_0_FILL" fill="#000000" fill-opacity="1" stroke="none" d="
	M 183.7 215.3
	L 183.7 215.6
	Q 187.25 231.75 212.25 234.35
	L 183.7 215.3 Z"/>
					</g>
					<g id="Layer29_0_FILL">
						<path fill="#000000" fill-opacity="0.4" stroke="none" d="
	M 305.1 216.85
	L 305.15 217.2
	Q 309.45 233.2 334.35 232.3
	L 305.1 216.85 Z"/>
					</g>
					<g id="Layer27_0_FILL">
						<path class="vegetation" fill="#78A950" stroke="none" d="
	M 177.45 231.65
	Q 175.75 235.35 181.8 239.35 185.5 235.7 185.15 231.3 182.8 230.65 181.45 234 179.45 231.3 177.45 231.65
	M 236.9 266.6
	Q 235.2 270.3 241.25 274.3 244.95 270.6 244.65 266.25 242.3 265.6 240.95 268.95 238.9 266.25 236.9 266.6
	M 254.7 277
	Q 253.05 280.7 259.1 284.75 262.75 281.05 262.45 276.65 260.1 276 258.75 279.35 256.7 276.65 254.7 277
	M 315.5 245.75
	Q 313.5 243.05 311.5 243.4 309.8 247.1 315.85 251.15 319.55 247.45 319.2 243.05 316.85 242.4 315.5 245.75
	M 295.35 232.65
	Q 293.7 236.35 299.75 240.4 303.45 236.7 303.1 232.3 300.75 231.65 299.4 235 297.4 232.3 295.35 232.65
	M 277.2 171.85
	Q 275.55 175.55 281.6 179.55 285.3 175.85 284.95 171.5 282.6 170.85 281.25 174.2 279.25 171.5 277.2 171.85 Z"/>
					</g>
					<g id="Layer26_0_FILL">
						<path class="treeWood" fill="#AE663D" stroke="none" d="
	M 175.1 177.55
	L 172.05 177.55 172.05 191.1 159.3 172.85
	Q 154.6 171.5 172.05 195.7
	L 172.05 212.5 175.1 212.5 175.1 177.55
	M 252.7 151.35
	L 249 151.35 249 176.9 252.7 176.9 252.7 151.35 Z"/>
					</g>
					<g id="Layer25_0_FILL">
						<path class="vegetation" fill="#77A951" stroke="none" d="
	M 192.55 179.55
	Q 200.95 173.5 200.95 165.1 200.95 156.4 192.55 150 184.15 144.3 172.05 144.3 160.3 144.3 151.9 150 143.15 156.4 143.15 165.1 143.15 173.5 151.9 179.55 160.3 185.95 172.05 185.95 184.15 185.95 192.55 179.55
	M 236.25 106.65
	Q 230.2 116.05 230.2 129.15 230.2 142.25 236.25 151.35 242.3 160.75 250.7 160.75 258.75 160.75 264.8 151.35 270.85 142.25 270.85 129.15 270.85 116.05 264.8 106.65 258.75 97.6 250.7 97.6 242.3 97.6 236.25 106.65 Z"/>
					</g>
					<g id="Layer24_0_FILL">
						<path class="vegetation" fill="#77A951" stroke="none" d="
	M 158.3 221.9
	Q 160.65 221.9 161.95 220.2 163 219.55 163.3 218.55 164.65 218.9 166.35 218.9 170.05 218.9 172.4 216.2 175.1 213.85 175.1 210.15 175.1 206.45 172.4 203.75 170.05 201.4 166.35 201.4 162.65 201.4 159.95 203.75 157.6 206.45 157.6 210.15 157.6 210.8 157.6 211.15 155.95 211.5 154.6 212.5 152.9 214.15 152.9 216.55 152.9 218.9 154.6 220.2 156.25 221.9 158.3 221.9
	M 338.35 240.05
	Q 341.05 237.7 341.05 234 341.05 230.3 338.35 227.6 336 225.25 332.3 225.25 328.65 225.25 325.95 227.6 323.6 230.3 323.6 234 323.6 237.7 325.95 240.05 328.65 242.75 332.3 242.75 336 242.75 338.35 240.05 Z"/>
					</g>
					<g id="Layer22_0_FILL">
						<path class="rightRoof" fill="#D05041" stroke="none" d="
	M 220 173.85
	L 236.8 186.7 264.35 171.15 244.5 159.55 220 173.85 Z"/>
					</g>
					<g id="Layer21_0_FILL">
						<path class="leftWall" fill="#C57F42" stroke="none" d="
	M 212.25 191.35
	L 183.35 172.3 183.7 215.3 212.25 234.35 212.25 191.35 Z"/>
					</g>
					<g id="Layer20_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 192.1 149.85
	L 236.45 174.8 243.1 171.4
	Q 220.05 150.55 196.3 139.95
	L 192.1 149.85 Z"/>
					</g>
					<g id="Layer19_0_FILL">
						<path class="frontFascia" fill="#EBB17B" stroke="none" d="
	M 226.85 160.95
	L 212 190.6 229.75 192.6 239.75 172.85 226.85 160.95 Z"/>
					</g>
					<g id="Layer18_0_FILL">
						<path class="frontWall" fill="#EFA258" stroke="none" d="
	M 240.15 172.65
	L 211.9 191.6 212.25 233.65 264.35 201.7 264.35 170.8 240.8 184.45 240.15 172.65 Z"/>
					</g>
					<g id="Layer17_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 210.9 142.2
	L 205.9 142.2 205.9 152.65 210.9 152.65 210.9 142.2 Z"/>
					</g>
					<g>
						<path id="Layer16_0_FILL" class="leftRoof" fill="#F2563B" stroke="none" d="
	M 210.25 195.5
	L 227.4 160.95 195.45 141.35 177.65 175.85 210.25 195.5 Z"/>
					</g>
					<g>
						<path id="sun" fill="#E3BD0E" stroke="none" d="
	M 257.05 15.95
	Q 251.7 15.95 248 19.65 244.3 23.35 244.3 28.7 244.3 34.1 248 37.8 251.7 41.5 257.05 41.5 262.45 41.5 266.15 37.8 269.85 34.1 269.85 28.7 269.85 23.35 266.15 19.65 262.45 15.95 257.05 15.95 Z"/>
					</g>
					<g id="Layer8_0_FILL">
						<path fill="#975A42" stroke="none" d="
	M 238.45 189.65
	Q 238.295703125 189.362109375 238.05 189.1 237.35 188.3 236.2 188.3 235.05 188.3 234.15 189.1 233.3 189.9 233.2 191.05 233.1 192.2 233.8 193 234.55 193.8 235.7 193.8 236.85 193.8 237.7 193 238.1970703125 192.558203125 238.45 192 238.6552734375 191.56484375 238.7 191.05 238.7671875 190.276953125 238.45 189.65
	M 220.55 197.55
	Q 220 197.55 219.5 197.75 218.95 197.95 218.5 198.35 217.933203125 198.8833984375 217.7 199.55 217.5833984375 199.916796875 217.55 200.3 217.4923828125 200.96171875 217.7 201.5 217.852734375 201.9103515625 218.15 202.25 218.95 203.05 220.1 203.05 221.25 203.05 222.05 202.25 222.95 201.45 223.05 200.3 223.15 199.15 222.4 198.35 222.05 197.95 221.65 197.75 221.15 197.55 220.55 197.55 Z"/>
					</g>
					<g id="Layer7_0_FILL">
						<path class="door" fill="#B65041" stroke="none" d="
	M 233.55 206.75
	L 225.9 211.95 226.25 225.5 233.95 220.35 233.55 206.75 Z"/>
					</g>
					<g>
						<path id="windowOne" class="windows" fill="#975A42" stroke="none" d="
	M 188.65 198.4
	L 188.8 204.1 198.65 210.45 198.55 204.75 188.65 198.4
	M 208.45 216.8
	L 208.35 211.1 198.55 204.75 198.65 210.45 208.45 216.8
	M 188.8 204.1
	L 188.95 209.8 198.8 216.15 198.65 210.45 188.8 204.1
	M 208.6 222.5
	L 208.45 216.8 198.65 210.45 198.8 216.15 208.6 222.5 Z"/>
					</g>
					<g>
						<path id="windowThree" class="windows" fill="#975A42" stroke="none" d="
	M 311.7 214.1
	L 318.55 217.55 318.45 211.9 311.6 208.45 311.7 214.1
	M 325.4 221
	L 325.25 215.35 318.45 211.9 318.55 217.55 325.4 221
	M 318.4 206.2
	L 311.5 202.75 311.6 208.45 318.45 211.9 318.4 206.2
	M 325.25 215.35
	L 325.2 209.7 318.4 206.2 318.45 211.9 325.25 215.35 Z"/>
					</g>
					<g id="Layer2_0_FILL">
						<path class="door" fill="#B65041" stroke="none" d="
	M 259.7 183.25
	L 244.6 191.9 244.6 213.8 259.7 204.55 259.7 183.25 Z"/>
					</g>
					<path id="windowTwo" fill="#975A42" class="windows" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" d="
	M 223.05 200.3
	Q 222.95 201.45 222.05 202.25 221.25 203.05 220.1 203.05 218.95 203.05 218.15 202.25 217.852734375 201.9103515625 217.7 201.5 217.4923828125 200.96171875 217.55 200.3 217.5833984375 199.916796875 217.7 199.575 217.933203125 198.8833984375 218.5 198.35 218.95 197.95 219.5 197.75 220 197.55 220.55 197.55 221.15 197.55 221.65 197.75 222.05 197.95 222.4 198.35 223.15 199.15 223.05 200.3 Z
	M 238.7 191.05
	Q 238.6552734375 191.56484375 238.45 192 238.1970703125 192.558203125 237.7 193 236.85 193.8 235.7 193.8 234.55 193.8 233.8 193 233.1 192.2 233.2 191.05 233.3 189.9 234.15 189.1 235.05 188.3 236.2 188.3 237.35 188.3 238.05 189.1 238.295703125 189.362109375 238.45 189.65 238.7671875 190.276953125 238.7 191.05 Z"/>
					<path fill="#F2563B" stroke="none" d=" M 351.95 211.2 L 351.8 211.2 346.05 215.1 346.05 225.2 351.95 221.6 351.95 211.2 Z"/>
					<path id="Layer6_0_1_STROKES" class="windowRims" stroke="#AE663D" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" fill="none" d="
	M 198.55 204.75
	L 208.35 211.1 208.45 216.8 208.6 222.5 198.8 216.15 188.95 209.8 188.8 204.1 188.65 198.4 198.55 204.75 198.65 210.45 208.45 216.8
	M 198.8 216.15
	L 198.65 210.45 188.8 204.1"/>
					<path id="Layer5_0_1_STROKES" class="windowRims" stroke="#AE663D" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" fill="none" d="
	M 325.25 215.35
	L 325.4 221 318.55 217.55 311.7 214.1 311.6 208.45 311.5 202.75 318.4 206.2 325.2 209.7 325.25 215.35 318.45 211.9 318.55 217.55
	M 318.4 206.2
	L 318.45 211.9 311.6 208.45"/>
				</defs>
				<g id="shadow">
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use xlink:href="#bottomShadow"/>
					</g>
				</g>
				<g transform="matrix( 1, 0, 0, 1, 0,0) ">
					<use xlink:href="#sun"/>
				</g>
				<g id="earth">
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer52_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer51_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer50_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer48_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer47_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer46_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer45_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer44_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer43_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer41_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer40_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer38_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer37_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer36_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer35_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer34_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowFour"/>
						<use class="element" xlink:href="#Layer32_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer30_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer27_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer26_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer25_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer24_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer22_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer21_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer20_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer19_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer18_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer17_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer16_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer8_0_FILL"/>
						<use class="element" xlink:href="#windowTwo"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer7_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowOne"/>
						<use class="element" xlink:href="#Layer6_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowThree"/>
						<use class="element" xlink:href="#Layer5_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer2_0_FILL"/>
					</g>
				</g>
			</svg>
			<! -- End of SVG file -->
			<! -- Moon/Sun Toggle -->
			<div id="toggleButton" class="day-toggle">
				<div class="sun-icon"></div>
				<label class="switch">
            <input id="toggleCheckbox" type="checkbox">
            <div class="slider"></div>
        </label>
				<div class="cloud-icon"></div>
			</div>
			<! -- Moon/Sun Toggle -->
			<! -- End of Container -->
		</div>
			</div>
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">啷哩咯啷</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">打工是不可能打工的， 这辈子都不可能打工的！</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/03/知否-？知否-？React插件了解一下！/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="李斌">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="啷哩咯啷">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">知否 ？知否 ？React插件了解一下！</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-03T15:50:17+08:00">
                2019-05-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="为什么选择插件，而不是组件？"><a href="#为什么选择插件，而不是组件？" class="headerlink" title="为什么选择插件，而不是组件？"></a>为什么选择插件，而不是组件？</h3><ul>
<li><font color="#ff0000"><strong>调用简单  this.$toast(“xxx”) ，不必再模板中提前定义 , 动态插入移除</strong></font></li>
<li>插件独立于业务</li>
<li>更新不影响代码逻辑，做到热更新</li>
<li>抽象,封装</li>
<li>适用于toast，Dialog，Alert，Message，picker，Actionsheet等组件</li>
</ul>
<p><img src="/2019/05/03/知否-？知否-？React插件了解一下！/1.gif" alt></p>
<h3 id="react-toast-alert-demo地址"><a href="#react-toast-alert-demo地址" class="headerlink" title="react-toast-alert demo地址"></a><a href="https://github.com/libin1991/react-toast-alert" target="_blank" rel="noopener"><font color="#ff0000"><strong>react-toast-alert demo地址</strong></font></a></h3><blockquote>
<p>使用方法：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">'@/component/Toast/index'</span>;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">$.toast(&#123;</span><br><span class="line">	type:<span class="number">0</span>,</span><br><span class="line">	content: <span class="string">"我是默认Toast"</span>,</span><br><span class="line">	time: <span class="number">1000</span>,</span><br><span class="line">	opacity: <span class="number">.5</span>,</span><br><span class="line">	onSucc() &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"我是Toast的回调！"</span>)</span><br><span class="line">	&#125;</span><br><span class="line"> &#125;);</span><br><span class="line"></span><br><span class="line">$.toast(<span class="string">"我是默认Toast"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$.toast(&#123;</span><br><span class="line">	type:<span class="number">3</span>,</span><br><span class="line">	content: <span class="string">"我是默认loading"</span>,</span><br><span class="line">	time: <span class="number">1000</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;  <span class="comment">//3s后隐藏</span></span><br><span class="line">	$.hide();</span><br><span class="line">&#125;, <span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$.dialog(&#123;</span><br><span class="line">	type: <span class="number">0</span>,</span><br><span class="line">	opacity:<span class="number">0.5</span>,</span><br><span class="line">	title: <span class="string">"我是title"</span>,</span><br><span class="line">	content: <span class="string">"我是content"</span>,</span><br><span class="line">	btnSucc: <span class="string">"我是成功"</span>,</span><br><span class="line">	btnFail: <span class="string">"我是取消"</span>,</span><br><span class="line">	onSucc(e) &#123;</span><br><span class="line">		e.stopPropagation();</span><br><span class="line">		$.toast(<span class="string">"我是默认Toast"</span>);</span><br><span class="line">	&#125;,</span><br><span class="line">	onFail(e) &#123;</span><br><span class="line">		e.stopPropagation();</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"我是失败的回调！"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="Vue-插件"><a href="#Vue-插件" class="headerlink" title="Vue 插件"></a>Vue 插件</h3><p>在Vue里，一般将toast，alert等非业务相关的写成插件，挂载在Vue的原型链上，使用的时候直接this.$toast即可，非常方便！相关原理在这里就不说了，感兴趣的可以查阅官网.<br>先看看Vue的插件写法：</p>
<blockquote>
<p>@/components/vue-toast/index.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ToastComponent <span class="keyword">from</span> <span class="string">"./vue-toast.vue"</span>; <span class="comment">// 引入先前写好的vue</span></span><br><span class="line"><span class="keyword">var</span> Toast = &#123;&#125;;</span><br><span class="line"><span class="comment">//避免重复install，设立flag</span></span><br><span class="line">Toast.installed = <span class="literal">false</span>;</span><br><span class="line">Toast.install = <span class="function"><span class="keyword">function</span>(<span class="params">Vue, options = &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">	type: <span class="string">"success"</span>, <span class="regexp">//</span>success fail  warning loading toast</span></span></span><br><span class="line"><span class="function"><span class="params">	msg: <span class="string">"操作成功"</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">	time: <span class="number">1000</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">	callback(</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;) &#123;</span><br><span class="line">	<span class="keyword">if</span>(Toast.installed) <span class="keyword">return</span>;</span><br><span class="line">	<span class="keyword">var</span> obj;</span><br><span class="line">	Vue.prototype.$toast = <span class="function">(<span class="params">config = &#123;&#125;, type</span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">if</span>(type == <span class="string">'close'</span>) &#123;</span><br><span class="line">			obj &amp;&amp; obj.removeToast();</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">typeof</span> config==<span class="string">"object"</span>)&#123;</span><br><span class="line">			config = &#123;</span><br><span class="line">				...options,</span><br><span class="line">				...config</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			config = &#123;</span><br><span class="line">				...options,</span><br><span class="line">				...&#123;</span><br><span class="line">					type: <span class="string">"toast"</span>, </span><br><span class="line">	                msg: config</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 如果页面有toast则不继续执行</span></span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">document</span>.querySelector(<span class="string">'.vue-toast'</span>)) <span class="keyword">return</span>;</span><br><span class="line">		<span class="comment">// 1、创建构造器，定义好提示信息的模板</span></span><br><span class="line">		<span class="keyword">const</span> toastTip = Vue.extend(ToastComponent);</span><br><span class="line">		obj = <span class="keyword">new</span> toastTip();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> property <span class="keyword">in</span> config) &#123;</span><br><span class="line">			obj[property] = config[property];</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//删除弹框</span></span><br><span class="line">		obj.removeToast = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="built_in">document</span>.body.removeChild(tpl);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//插入页面</span></span><br><span class="line">		<span class="keyword">let</span> tpl = obj.$mount().$el;</span><br><span class="line">		<span class="built_in">document</span>.body.appendChild(tpl);</span><br><span class="line">		Toast.installed = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>([<span class="string">'success'</span>, <span class="string">'fail'</span>, <span class="string">'warning'</span>,<span class="string">'toast'</span>].indexOf(config.type) &gt; <span class="number">-1</span>) &#123;</span><br><span class="line">			setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">				obj.removeToast();</span><br><span class="line">				obj.callback();</span><br><span class="line">			&#125;, config.time)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		[<span class="string">'close'</span>].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">type</span>) </span>&#123;</span><br><span class="line">			Vue.prototype.$toast[type] = <span class="function"><span class="keyword">function</span>(<span class="params">msg</span>) </span>&#123;</span><br><span class="line">				<span class="keyword">return</span> Vue.prototype.$toast(&#123;&#125;, type)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 自动安装  ，有了ES6就不要写AMD，CMD了</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">'undefined'</span> &amp;&amp; <span class="built_in">window</span>.Vue) &#123;</span><br><span class="line">	<span class="built_in">window</span>.Vue.use(Toast)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Toast</span><br></pre></td></tr></table></figure>
<blockquote>
<p>@/components/vue-toast/vue-toast.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mask vue-toast"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"toast"</span> <span class="attr">v-if</span>=<span class="string">"['success', 'fail', 'warning','loading'].indexOf(type) &gt; -1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"icon"</span> <span class="attr">v-if</span>=<span class="string">"['success', 'fail', 'warning'].indexOf(type) &gt; -1"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"type=='success'"</span> <span class="attr">class</span>=<span class="string">"success-icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"type=='fail'"</span> <span class="attr">class</span>=<span class="string">"fail-icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"type=='warning'"</span> <span class="attr">class</span>=<span class="string">"warning-icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loading-icon"</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"msg"</span> <span class="attr">v-html</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span> <span class="attr">class</span>=<span class="string">"toast-msg"</span> <span class="attr">v-html</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  data() &#123;</span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">      msg: <span class="string">" "</span>,</span></span><br><span class="line"><span class="javascript">      type: <span class="string">"success"</span></span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>=<span class="string">"scoped "</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.mask</span> &#123;</span></span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line"><span class="css">  <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.4</span>);</span></span><br><span class="line">  position: fixed;</span><br><span class="line">  left: 0px;</span><br><span class="line">  top: 0px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">  z-index: 10000;</span><br><span class="line"><span class="css">  <span class="selector-class">.toast-msg</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">font-size</span>: 0<span class="selector-class">.24rem</span>;</span></span><br><span class="line">    text-align: center;</span><br><span class="line">    position: relative;</span><br><span class="line">    transform: translateX(-50%);</span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line">    left: 50%;</span><br><span class="line"><span class="css">    <span class="selector-tag">padding</span>: 0<span class="selector-class">.18rem</span> 0<span class="selector-class">.27rem</span>;</span></span><br><span class="line">    overflow: hidden;</span><br><span class="line">    border-radius: 4px;</span><br><span class="line">    white-space: nowrap;</span><br><span class="line">    display: block;</span><br><span class="line"><span class="css">    <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.7</span>);</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.toast</span> &#123;</span></span><br><span class="line">    font-size: 0rem;</span><br><span class="line"><span class="css">    <span class="selector-tag">padding</span>: 0<span class="selector-class">.27rem</span> <span class="selector-class">.090rem</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">width</span>: 2<span class="selector-class">.26rem</span>;</span></span><br><span class="line">    overflow: hidden;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">    flex-direction: column;</span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>: <span class="selector-id">#f2f2f2</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(51, 51, 51, 0<span class="selector-class">.94</span>);</span></span><br><span class="line"><span class="css">    <span class="selector-tag">border-radius</span>: 0<span class="selector-class">.09rem</span>;</span></span><br><span class="line">    text-align: center;</span><br><span class="line"><span class="css">    <span class="selector-class">.icon</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">width</span>: 0<span class="selector-class">.72rem</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">height</span>: 0<span class="selector-class">.72rem</span>;</span></span><br><span class="line">      border-radius: 50%;</span><br><span class="line"><span class="css">      <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#f2f2f2</span>;</span></span><br><span class="line">      position: relative;</span><br><span class="line">      justify-content: center;</span><br><span class="line">      align-items: center;</span><br><span class="line">      display: flex;</span><br><span class="line">      </span><br><span class="line">      position: relative;</span><br><span class="line"><span class="css">      <span class="selector-class">.success-icon</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">border-right</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#f2f2f2</span>;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">border-bottom</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#f2f2f2</span>;</span></span><br><span class="line">        transform: rotate(45deg);</span><br><span class="line"><span class="css">        <span class="selector-tag">width</span>: 0<span class="selector-class">.27rem</span>;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">height</span>: 0<span class="selector-class">.45rem</span>;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">margin-top</span>: <span class="selector-tag">-0</span><span class="selector-class">.18rem</span>;</span></span><br><span class="line">      &#125;</span><br><span class="line"><span class="css">      <span class="selector-class">.fail-icon</span> &#123;</span></span><br><span class="line"><span class="css">        &amp;<span class="selector-pseudo">:before</span> &#123;</span></span><br><span class="line">          content: " ";</span><br><span class="line">          position: absolute;</span><br><span class="line">          top: 50%;</span><br><span class="line">          left: 50%;</span><br><span class="line">          transform: translate(-50%, -50%) rotate(45deg);</span><br><span class="line"><span class="css">          <span class="selector-tag">border-top</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#f2f2f2</span>;</span></span><br><span class="line"><span class="css">          <span class="selector-tag">width</span>: 0<span class="selector-class">.5rem</span>;</span></span><br><span class="line">          height: 0px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        &amp;<span class="selector-pseudo">:after</span> &#123;</span></span><br><span class="line">          content: " ";</span><br><span class="line">          content: " ";</span><br><span class="line">          position: absolute;</span><br><span class="line">          top: 50%;</span><br><span class="line">          left: 50%;</span><br><span class="line">          transform: translate(-50%, -50%) rotate(-45deg);</span><br><span class="line"><span class="css">          <span class="selector-tag">border-top</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#f2f2f2</span>;</span></span><br><span class="line"><span class="css">          <span class="selector-tag">width</span>: 0<span class="selector-class">.5rem</span>;</span></span><br><span class="line">          height: 0px;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"><span class="css">      <span class="selector-class">.warning-icon</span> &#123;</span></span><br><span class="line"><span class="css">        &amp;<span class="selector-pseudo">:before</span> &#123;</span></span><br><span class="line">          content: " ";</span><br><span class="line">          position: absolute;</span><br><span class="line">          top: 50%;</span><br><span class="line">          left: 50%;</span><br><span class="line">          transform: translate(-50%, -500%) rotate(90deg);</span><br><span class="line"><span class="css">          <span class="selector-tag">border-top</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#f2f2f2</span>;</span></span><br><span class="line"><span class="css">          <span class="selector-tag">width</span>: 0<span class="selector-class">.27rem</span>;</span></span><br><span class="line">          height: 0px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        &amp;<span class="selector-pseudo">:after</span> &#123;</span></span><br><span class="line">          content: " ";</span><br><span class="line">          content: " ";</span><br><span class="line">          position: absolute;</span><br><span class="line">          top: 50%;</span><br><span class="line">          left: 50%;</span><br><span class="line">          transform: translate(-50%, 250%) rotate(-45deg);</span><br><span class="line"><span class="css">          <span class="selector-tag">background</span>: <span class="selector-id">#f2f2f2</span>;</span></span><br><span class="line">          width: 3px;</span><br><span class="line">          border-radius: 50%;</span><br><span class="line">          height: 3px;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.msg</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">margin-top</span>: 0<span class="selector-class">.18rem</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">font-size</span>: 0<span class="selector-class">.24rem</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css"><span class="selector-class">.loading-icon</span> &#123;</span></span><br><span class="line">  font-size: 0px;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line"><span class="css">  <span class="selector-tag">width</span>: 0<span class="selector-class">.72rem</span>;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">height</span>: 0<span class="selector-class">.72rem</span>;</span></span><br><span class="line">  position: relative;</span><br><span class="line">  span &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    height: 1px;</span><br><span class="line">    left: 50%;</span><br><span class="line">    top: 50%;</span><br><span class="line"><span class="css">    <span class="selector-tag">width</span>: 0<span class="selector-class">.18rem</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">animation</span>: <span class="selector-tag">loading-fade-light</span> 1<span class="selector-class">.1s</span> <span class="selector-tag">infinite</span> <span class="selector-tag">linear</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(255, 255, 255, 0<span class="selector-class">.3</span>);</span></span><br><span class="line"><span class="css">    <span class="selector-tag">transform-origin</span>: <span class="selector-tag">-0</span><span class="selector-class">.18rem</span> 50%;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">margin-left</span>: 0<span class="selector-class">.18rem</span>;</span></span><br><span class="line"><span class="css">    &amp;<span class="selector-pseudo">:nth-child(1)</span> &#123;</span></span><br><span class="line">      animation-delay: 0s;</span><br><span class="line">      transform: rotate(0deg);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    &amp;<span class="selector-pseudo">:nth-child(2)</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">animation-delay</span>: 0<span class="selector-class">.1s</span>;</span></span><br><span class="line">      transform: rotate(30deg);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    &amp;<span class="selector-pseudo">:nth-child(3)</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">animation-delay</span>: 0<span class="selector-class">.2s</span>;</span></span><br><span class="line">      transform: rotate(60deg);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    &amp;<span class="selector-pseudo">:nth-child(4)</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">animation-delay</span>: 0<span class="selector-class">.3s</span>;</span></span><br><span class="line">      transform: rotate(90deg);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    &amp;<span class="selector-pseudo">:nth-child(5)</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">animation-delay</span>: 0<span class="selector-class">.4s</span>;</span></span><br><span class="line">      transform: rotate(120deg);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    &amp;<span class="selector-pseudo">:nth-child(6)</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">animation-delay</span>: 0<span class="selector-class">.5s</span>;</span></span><br><span class="line">      transform: rotate(150deg);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    &amp;<span class="selector-pseudo">:nth-child(7)</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">animation-delay</span>: 0<span class="selector-class">.6s</span>;</span></span><br><span class="line">      transform: rotate(180deg);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    &amp;<span class="selector-pseudo">:nth-child(8)</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">animation-delay</span>: 0<span class="selector-class">.7s</span>;</span></span><br><span class="line">      transform: rotate(210deg);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    &amp;<span class="selector-pseudo">:nth-child(9)</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">animation-delay</span>: 0<span class="selector-class">.8s</span>;</span></span><br><span class="line">      transform: rotate(240deg);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    &amp;<span class="selector-pseudo">:nth-child(10)</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">animation-delay</span>: 0<span class="selector-class">.9s</span>;</span></span><br><span class="line">      transform: rotate(270deg);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    &amp;<span class="selector-pseudo">:nth-child(11)</span> &#123;</span></span><br><span class="line">      animation-delay: 1s;</span><br><span class="line">      transform: rotate(300deg);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    &amp;<span class="selector-pseudo">:nth-child(12)</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">animation-delay</span>: 1<span class="selector-class">.1s</span>;</span></span><br><span class="line">      transform: rotate(330deg);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> loading-fade-light &#123;</span></span><br><span class="line">  0% &#123;</span><br><span class="line"><span class="css">    <span class="selector-tag">background-color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    background-color: rgba(255, 255, 255, 0);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css">@<span class="keyword">keyframes</span> loading-fade-light &#123;</span></span><br><span class="line">  0% &#123;</span><br><span class="line"><span class="css">    <span class="selector-tag">background-color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    background-color: rgba(255, 255, 255, 0);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>入口文件注册：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vueToast <span class="keyword">from</span> <span class="string">'@/components/vue-toast'</span></span><br><span class="line">Vue.use(vueToast);</span><br></pre></td></tr></table></figure>
<h3 id="React-插件toast的封装"><a href="#React-插件toast的封装" class="headerlink" title="React 插件toast的封装"></a>React 插件toast的封装</h3><blockquote>
<p>Toast/index.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> Toast <span class="keyword">from</span> <span class="string">'./toast'</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Global</span> </span>&#123;</span><br><span class="line">	<span class="keyword">static</span> toastEle=<span class="string">''</span>;</span><br><span class="line">	<span class="keyword">static</span> toast(option) &#123;</span><br><span class="line">		<span class="keyword">var</span> setting=&#123;</span><br><span class="line">			type:<span class="number">0</span>,</span><br><span class="line">		 	content:<span class="string">"默认信息"</span>,</span><br><span class="line">		 	time:<span class="number">2000</span>,</span><br><span class="line">		 	opacity:<span class="number">0</span>,</span><br><span class="line">		 	onSucc:<span class="function"><span class="params">()</span>=&gt;</span>&#123;&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">typeof</span> option ==<span class="string">"string"</span>)&#123;</span><br><span class="line">			setting=&#123;...setting,<span class="attr">content</span>:option,<span class="attr">type</span>:<span class="number">4</span>&#125;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			setting=&#123;...setting,...option&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">this</span>.show(<span class="number">0</span>,setting);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>(setting.type!==<span class="number">3</span>)&#123;   <span class="comment">//loading需要手动关闭</span></span><br><span class="line">			setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">				<span class="keyword">this</span>.hide();</span><br><span class="line">				setting.onSucc();</span><br><span class="line">			&#125;, setting.time);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">static</span> dialog(option) &#123;</span><br><span class="line">		 <span class="keyword">var</span> setting=&#123;</span><br><span class="line">		 	type:<span class="number">0</span>,</span><br><span class="line">		 	title:<span class="string">"我是默认title"</span>,</span><br><span class="line">		 	content:<span class="string">"我是默认content"</span>,</span><br><span class="line">		 	btnSucc:<span class="string">"我是默认btn"</span>,</span><br><span class="line">		 	CloseShow:<span class="literal">false</span>,</span><br><span class="line">		 	onClose()&#123;</span><br><span class="line">		 		<span class="built_in">console</span>.log(<span class="string">"蒙层回调"</span>);</span><br><span class="line">		    &#125;,</span><br><span class="line">		 	onSucc()&#123;</span><br><span class="line">		 		<span class="built_in">console</span>.log(<span class="string">"成功回调"</span>);</span><br><span class="line">		    &#125;,</span><br><span class="line">		    onFail()&#123;</span><br><span class="line">		    	<span class="built_in">console</span>.log(<span class="string">"失败回调"</span>);</span><br><span class="line">		    &#125;</span><br><span class="line">		 &#125;;</span><br><span class="line">		 </span><br><span class="line">		 setting=&#123;...setting,...option&#125;;</span><br><span class="line">		 </span><br><span class="line">		 <span class="keyword">this</span>.show(<span class="number">1</span>,setting);</span><br><span class="line">	&#125;</span><br><span class="line">   </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">static</span> show(n,setting) &#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">		<span class="keyword">var</span> id = <span class="built_in">document</span>.createAttribute(<span class="string">"id"</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">this</span>.toastEle=<span class="string">'pluginEle-'</span>+<span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">		</span><br><span class="line">		id.value = <span class="keyword">this</span>.toastEle;</span><br><span class="line">		div.setAttributeNode(id);</span><br><span class="line">		<span class="built_in">document</span>.body.appendChild(div);</span><br><span class="line">		ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Toast</span> <span class="attr">setting</span>=<span class="string">&#123;setting&#125;</span> /&gt;</span>, div);</span></span><br><span class="line"><span class="xml">	&#125;</span></span><br><span class="line"><span class="xml">	</span></span><br><span class="line"><span class="xml">	static hide() &#123;</span></span><br><span class="line"><span class="xml">		var toastEle = document.querySelector("#"+this.toastEle);</span></span><br><span class="line"><span class="xml">		if(toastEle)&#123;</span></span><br><span class="line"><span class="xml">			ReactDOM.unmountComponentAtNode(toastEle);</span></span><br><span class="line"><span class="xml">		    document.body.removeChild(toastEle);</span></span><br><span class="line"><span class="xml">		&#125;</span></span><br><span class="line"><span class="xml">	&#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Toast/toast.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./toast.less'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Toast</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">		<span class="keyword">super</span>(props);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	checkToast(n) &#123;</span><br><span class="line">		<span class="keyword">switch</span>(n) &#123;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">				<span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"icon"</span>&gt;</span></span></span><br><span class="line"><span class="xml">				          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"success-icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">			           <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">				<span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"icon"</span>&gt;</span></span></span><br><span class="line"><span class="xml">				          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"fail-icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">			           <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">		    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">				<span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"icon"</span>&gt;</span></span></span><br><span class="line"><span class="xml">				          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"warning-icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">			           <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">		    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">				<span class="keyword">return</span> (</span><br><span class="line">			            &lt;div className=<span class="string">"loading-icon"</span>&gt;</span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				          &lt;span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">				        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">			        )</span></span><br><span class="line"><span class="regexp">				break;</span></span><br><span class="line"><span class="regexp">			default:</span></span><br><span class="line"><span class="regexp">			    return null</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp">	&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">	render() &#123;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">		let &#123;</span></span><br><span class="line"><span class="regexp">			type,content,opacity = 0</span></span><br><span class="line"><span class="regexp">		&#125; = this.props.setting;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">		let style = &#123;</span></span><br><span class="line"><span class="regexp">			"background": `rgba(0,0,0,$&#123;opacity&#125;)`</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">		return(</span></span><br><span class="line"><span class="regexp">			&lt;div className="mask" style=&#123;style&#125;&gt;</span></span><br><span class="line"><span class="regexp">			    &lt;div className="toast"&gt;</span></span><br><span class="line"><span class="regexp">			        &#123;this.checkToast(type)&#125;</span></span><br><span class="line"><span class="regexp">			        &lt;div className="msg"&gt;&#123;content&#125;&lt;/</span>div&gt;</span><br><span class="line">			    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">			&lt;/</span>div&gt;</span><br><span class="line">		);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Toast/toast.less</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mask</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(0, 0, 0, 0.4);</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">10000</span>;</span><br><span class="line">    .toast-msg &#123;</span><br><span class="line">        <span class="selector-tag">font-size</span>: 24<span class="selector-tag">px</span>;</span><br><span class="line">        <span class="selector-tag">text-align</span>: <span class="selector-tag">center</span>;</span><br><span class="line">        <span class="selector-tag">position</span>: <span class="selector-tag">relative</span>;</span><br><span class="line">        <span class="selector-tag">transform</span>: <span class="selector-tag">translateX</span>(<span class="selector-tag">-50</span>%);</span><br><span class="line">        <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span><br><span class="line">        <span class="selector-tag">left</span>: 50%;</span><br><span class="line">        <span class="selector-tag">padding</span><span class="selector-pseudo">:18px</span> 27<span class="selector-tag">px</span>;</span><br><span class="line">        <span class="selector-tag">overflow</span>: <span class="selector-tag">hidden</span>;</span><br><span class="line">        <span class="selector-tag">border-radius</span>: 4<span class="selector-tag">px</span>;</span><br><span class="line">        <span class="selector-tag">white-space</span>: <span class="selector-tag">nowrap</span>;</span><br><span class="line">        <span class="selector-tag">display</span>: <span class="selector-tag">block</span>;</span><br><span class="line">        <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.7</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.toast</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">0px</span>;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">27px</span> <span class="number">9px</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">226px</span>;</span><br><span class="line">        <span class="attribute">overflow</span>: hidden;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">align-items</span>: center;</span><br><span class="line">        <span class="attribute">flex-direction</span>: column;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#f2f2f2</span>;</span><br><span class="line">        <span class="attribute">background</span>: <span class="built_in">rgba</span>(51, 51, 51, 0.94);</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">9px</span>;</span><br><span class="line">        <span class="attribute">text-align</span>: center;</span><br><span class="line">        .icon &#123;</span><br><span class="line">            <span class="selector-tag">width</span><span class="selector-pseudo">:72px</span>;</span><br><span class="line">            <span class="selector-tag">height</span><span class="selector-pseudo">:72px</span>;</span><br><span class="line">            <span class="selector-tag">border-radius</span>: 50%;</span><br><span class="line">            <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#f2f2f2</span>;</span><br><span class="line">            <span class="selector-tag">position</span>: <span class="selector-tag">relative</span>;</span><br><span class="line">            <span class="selector-tag">justify-content</span>: <span class="selector-tag">center</span>;</span><br><span class="line">            <span class="selector-tag">align-items</span>: <span class="selector-tag">center</span>;</span><br><span class="line">            <span class="selector-tag">display</span>: <span class="selector-tag">flex</span>;</span><br><span class="line">            <span class="selector-tag">position</span>: <span class="selector-tag">relative</span>;</span><br><span class="line">            <span class="selector-tag">margin-bottom</span>: 18<span class="selector-tag">px</span>;</span><br><span class="line">            <span class="selector-class">.success-icon</span> &#123;</span><br><span class="line">                <span class="attribute">border-right</span>: <span class="number">1px</span> solid <span class="number">#f2f2f2</span>;</span><br><span class="line">                <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#f2f2f2</span>;</span><br><span class="line">                <span class="attribute">transform</span>: <span class="built_in">rotate</span>(45deg);</span><br><span class="line">                <span class="attribute">width</span>:<span class="number">27px</span>;</span><br><span class="line">                <span class="attribute">height</span>: <span class="number">45px</span>;</span><br><span class="line">                <span class="attribute">margin-top</span>: -<span class="number">18px</span>;</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">            <span class="selector-class">.fail-icon</span> &#123;</span><br><span class="line">                &amp;:before &#123;</span><br><span class="line">                    <span class="selector-tag">content</span>: " ";</span><br><span class="line">                    <span class="selector-tag">position</span>: <span class="selector-tag">absolute</span>;</span><br><span class="line">                    <span class="selector-tag">top</span>: 50%;</span><br><span class="line">                    <span class="selector-tag">left</span>: 50%;</span><br><span class="line">                    <span class="selector-tag">transform</span>: <span class="selector-tag">translate</span>(<span class="selector-tag">-50</span>%, <span class="selector-tag">-50</span>%) <span class="selector-tag">rotate</span>(45<span class="selector-tag">deg</span>);</span><br><span class="line">                    <span class="selector-tag">border-top</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#f2f2f2</span>;</span><br><span class="line">                    <span class="selector-tag">width</span>: 50<span class="selector-tag">px</span>;</span><br><span class="line">                    <span class="selector-tag">height</span>: 0<span class="selector-tag">px</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                &amp;<span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">                    <span class="attribute">content</span>: <span class="string">" "</span>;</span><br><span class="line">                    <span class="attribute">content</span>: <span class="string">" "</span>;</span><br><span class="line">                    <span class="attribute">position</span>: absolute;</span><br><span class="line">                    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">                    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">                    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-50%, -50%) <span class="built_in">rotate</span>(-45deg);</span><br><span class="line">                    <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="number">#f2f2f2</span>;</span><br><span class="line">                    <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">                    <span class="attribute">height</span>: <span class="number">0px</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="selector-class">.warning-icon</span> &#123;</span><br><span class="line">                &amp;:before &#123;</span><br><span class="line">                    <span class="selector-tag">content</span>: "";</span><br><span class="line">                    <span class="selector-tag">display</span>: <span class="selector-tag">block</span>;</span><br><span class="line">                    <span class="selector-tag">position</span>: <span class="selector-tag">absolute</span>;</span><br><span class="line">                    <span class="selector-tag">top</span>: 15<span class="selector-tag">px</span>;</span><br><span class="line">                    <span class="selector-tag">left</span>: 50%;</span><br><span class="line">                    <span class="selector-tag">background</span>:<span class="selector-id">#f2f2f2</span>;</span><br><span class="line">                    <span class="selector-tag">width</span><span class="selector-pseudo">:1px</span>;</span><br><span class="line">                    <span class="selector-tag">height</span>: 30<span class="selector-tag">px</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                &amp;<span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">                    <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">                    <span class="attribute">position</span>: absolute;</span><br><span class="line">                    <span class="attribute">bottom</span>: <span class="number">14px</span>;</span><br><span class="line">                    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">                    <span class="attribute">background</span>:<span class="number">#f2f2f2</span>;</span><br><span class="line">                    <span class="attribute">width</span>: <span class="number">6px</span>;</span><br><span class="line">                    <span class="attribute">margin-left</span>: -<span class="number">2px</span>;</span><br><span class="line">                    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">                    <span class="attribute">height</span>: <span class="number">6px</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.msg</span> &#123;</span><br><span class="line">            </span><br><span class="line">            <span class="attribute">font-size</span>:<span class="number">24px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.loading-icon</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">72px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">72px</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    span &#123;</span><br><span class="line">        <span class="selector-tag">position</span>: <span class="selector-tag">absolute</span>;</span><br><span class="line">        <span class="selector-tag">height</span>: 1<span class="selector-tag">px</span>;</span><br><span class="line">        <span class="selector-tag">left</span>: 50%;</span><br><span class="line">        <span class="selector-tag">top</span>: 50%;</span><br><span class="line">        <span class="selector-tag">width</span>: 18<span class="selector-tag">px</span>;</span><br><span class="line">        <span class="selector-tag">animation</span>: <span class="selector-tag">loading-fade-light</span> 1<span class="selector-class">.1s</span> <span class="selector-tag">infinite</span> <span class="selector-tag">linear</span>;</span><br><span class="line">        <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(255, 255, 255, 0<span class="selector-class">.3</span>);</span><br><span class="line">        <span class="selector-tag">transform-origin</span>: <span class="selector-tag">-18px</span> 50%;</span><br><span class="line">        <span class="selector-tag">margin-left</span>: 18<span class="selector-tag">px</span>;</span><br><span class="line">        &amp;<span class="selector-pseudo">:nth-child(1)</span> &#123;</span><br><span class="line">            <span class="attribute">animation-delay</span>: <span class="number">0s</span>;</span><br><span class="line">            <span class="attribute">transform</span>: <span class="built_in">rotate</span>(0deg);</span><br><span class="line">        &#125;</span><br><span class="line">        &amp;<span class="selector-pseudo">:nth-child(2)</span> &#123;</span><br><span class="line">            <span class="attribute">animation-delay</span>: <span class="number">0.1s</span>;</span><br><span class="line">            <span class="attribute">transform</span>: <span class="built_in">rotate</span>(30deg);</span><br><span class="line">        &#125;</span><br><span class="line">        &amp;<span class="selector-pseudo">:nth-child(3)</span> &#123;</span><br><span class="line">            <span class="attribute">animation-delay</span>: <span class="number">0.2s</span>;</span><br><span class="line">            <span class="attribute">transform</span>: <span class="built_in">rotate</span>(60deg);</span><br><span class="line">        &#125;</span><br><span class="line">        &amp;<span class="selector-pseudo">:nth-child(4)</span> &#123;</span><br><span class="line">            <span class="attribute">animation-delay</span>: <span class="number">0.3s</span>;</span><br><span class="line">            <span class="attribute">transform</span>: <span class="built_in">rotate</span>(90deg);</span><br><span class="line">        &#125;</span><br><span class="line">        &amp;<span class="selector-pseudo">:nth-child(5)</span> &#123;</span><br><span class="line">            <span class="attribute">animation-delay</span>: <span class="number">0.4s</span>;</span><br><span class="line">            <span class="attribute">transform</span>: <span class="built_in">rotate</span>(120deg);</span><br><span class="line">        &#125;</span><br><span class="line">        &amp;<span class="selector-pseudo">:nth-child(6)</span> &#123;</span><br><span class="line">            <span class="attribute">animation-delay</span>: <span class="number">0.5s</span>;</span><br><span class="line">            <span class="attribute">transform</span>: <span class="built_in">rotate</span>(150deg);</span><br><span class="line">        &#125;</span><br><span class="line">        &amp;<span class="selector-pseudo">:nth-child(7)</span> &#123;</span><br><span class="line">            <span class="attribute">animation-delay</span>: <span class="number">0.6s</span>;</span><br><span class="line">            <span class="attribute">transform</span>: <span class="built_in">rotate</span>(180deg);</span><br><span class="line">        &#125;</span><br><span class="line">        &amp;<span class="selector-pseudo">:nth-child(8)</span> &#123;</span><br><span class="line">            <span class="attribute">animation-delay</span>: <span class="number">0.7s</span>;</span><br><span class="line">            <span class="attribute">transform</span>: <span class="built_in">rotate</span>(210deg);</span><br><span class="line">        &#125;</span><br><span class="line">        &amp;<span class="selector-pseudo">:nth-child(9)</span> &#123;</span><br><span class="line">            <span class="attribute">animation-delay</span>: <span class="number">0.8s</span>;</span><br><span class="line">            <span class="attribute">transform</span>: <span class="built_in">rotate</span>(240deg);</span><br><span class="line">        &#125;</span><br><span class="line">        &amp;<span class="selector-pseudo">:nth-child(10)</span> &#123;</span><br><span class="line">            <span class="attribute">animation-delay</span>: <span class="number">0.9s</span>;</span><br><span class="line">            <span class="attribute">transform</span>: <span class="built_in">rotate</span>(270deg);</span><br><span class="line">        &#125;</span><br><span class="line">        &amp;<span class="selector-pseudo">:nth-child(11)</span> &#123;</span><br><span class="line">            <span class="attribute">animation-delay</span>: <span class="number">1s</span>;</span><br><span class="line">            <span class="attribute">transform</span>: <span class="built_in">rotate</span>(300deg);</span><br><span class="line">        &#125;</span><br><span class="line">        &amp;<span class="selector-pseudo">:nth-child(12)</span> &#123;</span><br><span class="line">            <span class="attribute">animation-delay</span>: <span class="number">1.1s</span>;</span><br><span class="line">            <span class="attribute">transform</span>: <span class="built_in">rotate</span>(330deg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> loading-fade-light &#123;</span><br><span class="line">    0% &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    100% &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(255, 255, 255, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> loading-fade-light &#123;</span><br><span class="line">    0% &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    100% &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(255, 255, 255, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">'@/component/Toast/index'</span>;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">$.toast(&#123;</span><br><span class="line">	type:<span class="number">0</span>,</span><br><span class="line">	content: <span class="string">"我是默认Toast"</span>,</span><br><span class="line">	time: <span class="number">1000</span>,</span><br><span class="line">	opacity: <span class="number">.5</span>,</span><br><span class="line">	onSucc() &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"我是Toast的回调！"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line">		</span><br><span class="line">$.toast(<span class="string">"我是默认Toast"</span>);</span><br></pre></td></tr></table></figure>
<h3 id="为什么不挂载在React原型链上？"><a href="#为什么不挂载在React原型链上？" class="headerlink" title="为什么不挂载在React原型链上？"></a>为什么不挂载在React原型链上？</h3><blockquote>
<p><strong>有坑！主要原因还是React组件的this神出鬼没！</strong></p>
</blockquote>
<h3 id="ES6-toast插件"><a href="#ES6-toast插件" class="headerlink" title="ES6 toast插件"></a>ES6 toast插件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> body = <span class="built_in">document</span>.body</span><br><span class="line"><span class="keyword">var</span> tip</span><br><span class="line"><span class="keyword">var</span> timeout</span><br><span class="line"><span class="keyword">var</span> time = <span class="number">3000</span></span><br><span class="line"><span class="keyword">var</span> setStyleTime = <span class="number">50</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Tip</span> (<span class="params">str, time</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (tip) &#123;</span><br><span class="line">    clearTimeout(timeout)</span><br><span class="line">    <span class="comment">// tip.find('p').html(str);</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    tip = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>)</span><br><span class="line">    tip.className = <span class="string">'__toast'</span></span><br><span class="line">    tip.innerHTML = str</span><br><span class="line">    <span class="comment">// tip.style.cssText = 'z-index: 999;position: fixed;webkit-transition: opacity .3s ease;transition: opacity .3s ease;opacity: 0;color: #fff;border-radius: 8px;left: 50%;width: 80%;margin-left: -40%; /*px*/text-align: center;line-height: 1.5;background: rgba(0,0,0,.6);padding: 1% 1%;top: 45%;box-sizing: border-box;font-size: 1.5em;';</span></span><br><span class="line">    body.appendChild(tip)</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      tip.style.opacity = <span class="number">1</span></span><br><span class="line">    &#125;, setStyleTime)</span><br><span class="line">  &#125;</span><br><span class="line">  timeout = clear(time)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clear</span> (<span class="params">time</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> setTimeout(remove, time)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">remove</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (tip) &#123;</span><br><span class="line">    body.removeChild(tip)</span><br><span class="line">    tip = <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">entry</span> (<span class="params">msg, expire</span>) </span>&#123;</span><br><span class="line">  msg = msg || <span class="string">''</span></span><br><span class="line">  <span class="keyword">if</span> (!expire || expire &lt;= setStyleTime) &#123;</span><br><span class="line">    expire = time</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Tip(msg, expire)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> entry</span><br></pre></td></tr></table></figure>
<h3 id="附：React开发技巧"><a href="#附：React开发技巧" class="headerlink" title="附：React开发技巧"></a>附：React开发技巧</h3><h4 id="自动注册全局组件或函数-require-context"><a href="#自动注册全局组件或函数-require-context" class="headerlink" title="自动注册全局组件或函数 require.context"></a>自动注册全局组件或函数 <a href="https://juejin.im/post/5ab8bcdb6fb9a028b77acdbd" target="_blank" rel="noopener"><font color="#ff0000">require.context</font></a></h4><blockquote>
<p>我的业务场景大部分是中后台，虽然封装和使用了很多第三方组件，但还是免不了需要自己封装和使用很多业务组件。但每次用的时候还需要手动引入，真的是有些麻烦的。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @desc webpack打包入口文件  </span></span><br><span class="line"><span class="comment"> * @example 自动引入子目录下所有js文件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> moduleExports = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> r = <span class="built_in">require</span>.context(<span class="string">'./'</span>, <span class="literal">true</span>, /^\.\/.+\/.+\.js$/);</span><br><span class="line">r.keys().forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> attr = key.substring(key.lastIndexOf(<span class="string">'/'</span>) + <span class="number">1</span>, key.lastIndexOf(<span class="string">'.'</span>));</span><br><span class="line">    moduleExports[attr] = r(key);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = moduleExports;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/05/03/知否-？知否-？React插件了解一下！/2.png" alt><br>我们其实可以基于 webpack 的require.context来实现自动加载组件并注册的全局的功能。相关原理在之前的文章中已经阐述过了。具体代码如下<br><img src="/2019/05/03/知否-？知否-？React插件了解一下！/3.png" alt><br>我们可以创建一个GlobalComponents文件夹，将你想要注册到全局的组件都放在这个文件夹里，在index.js里面放上如上代码。之后只要在入口文件main.js中引入即可。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./components/Table/index'</span> <span class="comment">// 自动注册全局业务组件</span></span><br></pre></td></tr></table></figure></p>
<p>这样我们可以在模板中直接使用这些全局组建了。不需要再繁琐的手动引入了。</p>
<h4 id="一把梭改变state值"><a href="#一把梭改变state值" class="headerlink" title="一把梭改变state值"></a>一把梭改变state值</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.setState(&#123;</span><br><span class="line">   [name]: value</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; data &#125; = <span class="keyword">this</span>.state;</span><br><span class="line"><span class="keyword">this</span>.setState(&#123; <span class="attr">data</span>: &#123;...data, <span class="attr">key</span>: <span class="number">1</span> &#125; &#125;);</span><br></pre></td></tr></table></figure>
<p>另外一种可以通过callback的方式改变state的值<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.setState(<span class="function">(<span class="params">&#123; data &#125;</span>) =&gt;</span> (&#123; <span class="attr">data</span>: &#123;...data, <span class="attr">key</span>: <span class="number">1</span> &#125; &#125;));</span><br></pre></td></tr></table></figure></p>
<p>还可以：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.setState(<span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">counter</span>: state.counter + props.step &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>还可以一把梭：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.state.a=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">this</span>.state.b=<span class="string">"张三"</span>;</span><br><span class="line"><span class="keyword">this</span>.state.c=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">this</span>.state.xxx=...</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.setState(<span class="keyword">this</span>.state);   <span class="comment">//一把梭</span></span><br></pre></td></tr></table></figure></p>
<h4 id="this-setState支持异步async-await"><a href="#this-setState支持异步async-await" class="headerlink" title="this.setState支持异步async await"></a>this.setState支持异步async await</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.setState(<span class="function">(<span class="params">prevState</span>) =&gt;</span> (&#123;</span><br><span class="line"> isFiltered: !prevState.isFiltered</span><br><span class="line">&#125;), () =&gt; &#123;</span><br><span class="line"> <span class="keyword">this</span>.filterData();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">clickMe=<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line"> 	 <span class="keyword">this</span>.setState(<span class="function">(<span class="params">prevState</span>)=&gt;</span>&#123;</span><br><span class="line">     <span class="keyword">return</span> &#123;<span class="attr">num</span>:prevState.num+<span class="number">1</span>&#125;</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> clickMe1()&#123;</span><br><span class="line"> 	<span class="keyword">await</span> <span class="keyword">this</span>.setState(<span class="function">(<span class="params">prevState</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">num</span>:prevState.num+<span class="number">1</span>&#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">await</span> <span class="keyword">this</span>.setState(<span class="function">(<span class="params">prevState</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">num</span>:prevState.num+<span class="number">1</span>&#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">await</span> <span class="keyword">this</span>.setState(<span class="function">(<span class="params">prevState</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">num</span>:prevState.num+<span class="number">1</span>&#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="唯一key"><a href="#唯一key" class="headerlink" title="唯一key"></a>唯一key</h4><p>react数组循环，基本都会设置一个唯一的key，表格的对象数组循环一般没什么问题，数据基本都会有一个id。那有种情况就比较坑了，出现在表单形式的页面结构中，对某个数组进行增删改操作，一般对于非对象数组而言，没有id，可能很多人会偷懒，循环的时候，直接设置数组的下标index作为key，当出现增删改时候，就会出现数据对不上或者重新渲染组件的问题等。解决方案有很多种，例如把字符串数组等重组对象数组，每个元素设置一个唯一id等。另外有个方式：推荐使用<a href="https://github.com/dylang/shortid" target="_blank" rel="noopener">shortid</a>生成唯一key的数组，和数据数组一起使用，省去提交数据时再重组数组。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> shortid <span class="keyword">from</span> <span class="string">'shortid'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">		<span class="keyword">super</span>(props);</span><br><span class="line">		<span class="keyword">this</span>.state = &#123;</span><br><span class="line">			data: [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">this</span>.dataKeys = <span class="keyword">this</span>.state.data.map(<span class="function"><span class="params">v</span> =&gt;</span> shortid.generate());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">    deleteOne = <span class="function"><span class="params">index</span> =&gt;</span> &#123; <span class="comment">// 删除操作</span></span><br><span class="line">        <span class="keyword">const</span> &#123; data &#125; = <span class="keyword">this</span>.state;</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123; <span class="attr">data</span>: data.filter(<span class="function">(<span class="params">v, i</span>) =&gt;</span> i !== index) &#125;);</span><br><span class="line">        <span class="keyword">this</span>.dataKyes.splice(index, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    render() &#123;</span><br><span class="line">	    <span class="keyword">return</span> (</span><br><span class="line">    	    &lt;ul&gt;</span><br><span class="line">               &#123;</span><br><span class="line">                   data.map(<span class="function">(<span class="params">v, i</span>) =&gt;</span> </span><br><span class="line">                    &lt;li </span><br><span class="line">                        onClick=&#123;i =&gt; <span class="keyword">this</span>.deleteOne(i)&#125;  </span><br><span class="line">                        key=&#123;<span class="keyword">this</span>.dataKeys[i]&#125;</span><br><span class="line">                    &gt;</span><br><span class="line">                        &#123;v&#125;</span><br><span class="line">                    &lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">                    )</span></span><br><span class="line"><span class="regexp">               &#125; </span></span><br><span class="line"><span class="regexp">            &lt;/u</span>l&gt;</span><br><span class="line">	    )</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 稍微抽取，可以封装一个通用的组件</span></span><br></pre></td></tr></table></figure></p>
<h4 id="三目运算"><a href="#三目运算" class="headerlink" title="三目运算"></a>三目运算</h4><p>通过判断值是否存在来控制元素是否显示，一般三目运算可以达到此效果，最简单的还是用短路的写法：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不错</span></span><br><span class="line"><span class="keyword">const</span> flag = <span class="string">'something'</span>;</span><br><span class="line">flag &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 很好</span></span><br><span class="line"><span class="comment">// 注意一般可能上面写法多一些，但当flag为0 的时页面上会显示0，用!!将其转为boolean避免坑，</span></span><br><span class="line"><span class="comment">// 代码也更规范</span></span><br><span class="line"><span class="keyword">const</span> flag = <span class="string">'something'</span>;</span><br><span class="line">!!flag &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p>
<h4 id="使用组件，传递props"><a href="#使用组件，传递props" class="headerlink" title="使用组件，传递props"></a>使用组件，传递props</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; data, type, something &#125; = <span class="keyword">this</span>.state;</span><br><span class="line">&lt;Demo </span><br><span class="line">    data=&#123;data&#125;</span><br><span class="line">    type=&#123;type&#125;</span><br><span class="line">    something=&#123;something&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>
<p>也许另外一种传递方式更简洁：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; data, type, something &#125; = <span class="keyword">this</span>.state;</span><br><span class="line">&lt;Demo </span><br><span class="line">    &#123;...&#123; data, id, something &#125;&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure></p>
<h4 id="简化props"><a href="#简化props" class="headerlink" title="简化props"></a>简化props</h4><p>组件的props有时候会定义很多，但是调用组件传递props的时候又想一个个传，不想一次性传递一个option对象，通过扩展运算符和解构赋值可以简化此操作：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Demo = <span class="function">(<span class="params">&#123; prop1, prop2, prop3, ...restProps &#125;</span>) =&gt;</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        xxxx</span><br><span class="line">        &#123; restProps.something &#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 父组件使用Demo</span></span><br><span class="line"><span class="regexp">&lt;Demo</span></span><br><span class="line"><span class="regexp">    prop1=&#123;xxx&#125;</span></span><br><span class="line"><span class="regexp">    prop2=&#123;xxx&#125;</span></span><br><span class="line"><span class="regexp">    something=&#123;xxx&#125;</span></span><br><span class="line"><span class="regexp">/</span>&gt;</span><br></pre></td></tr></table></figure></p>
<h4 id="优化React-性能"><a href="#优化React-性能" class="headerlink" title="优化React 性能"></a>优化React 性能</h4><p>React 性能优化有很多种方式，那常见的一种就是在生命周期函数shouldComponentUpdate里面判断某些值或属性来控制组件是否重新再次渲染。</p>
<p>判断一般的字符串，数字或者基础的对象，数组都还是比较好处理，那嵌套的对象或者数组就比较麻烦了，对于这种，可以转成字符串处理，但属性值的位置不同时，那就无效了。</p>
<p>推荐使用lodash(或者其他的类似库)的<a href="https://lodash.com/docs/4.17.10#isEqual" target="_blank" rel="noopener">isEqual</a>对嵌套数组或对象进行判断(相比其他方式更简单些)<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">shouldComponentUpdate(nextProps, nextState) &#123;</span><br><span class="line">    <span class="keyword">if</span> (_.isEqual(nextState.columns, <span class="keyword">this</span>.state.columns)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="创建弹层"><a href="#创建弹层" class="headerlink" title="创建弹层"></a>创建弹层</h4><p>创建弹层的三种方式:</p>
<p>1.普通组件通过state和样式控制，在当前组件中显示弹层-每次引入组件并且render里面控制显示，挂载节点在某组件里面</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 弹层 </span></span><br><span class="line"><span class="keyword">const</span> Dialog = <span class="function"><span class="params">()</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>弹层<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="comment">// 某组件</span></span><br><span class="line">render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="keyword">this</span>.state.showDialog &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">Dialog</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    )</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure>
<p>2.通过Portals创建通道，在根节点外部挂载组件-但还是需要每次引入并且在render里面调用<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 弹层 </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dialog</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.el = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    modalRoot.appendChild(<span class="keyword">this</span>.el);</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillUnmount() &#123;</span><br><span class="line">    modalRoot.removeChild(<span class="keyword">this</span>.el);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> ReactDOM.createPortal(</span><br><span class="line">      <span class="keyword">this</span>.props.children || <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>xxxx<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>,</span><br><span class="line">      <span class="keyword">this</span>.el,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 某组件</span></span><br><span class="line">render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="keyword">this</span>.state.showDialog &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">Dialog</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    )</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>3.推荐使用ReactDom.render创建弹层-挂载根节点外层，使用也更方便<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// demo</span></span><br><span class="line"><span class="keyword">let</span> dialog;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dialog</span> </span>&#123;</span><br><span class="line">    show(children) &#123;    <span class="comment">// 显示</span></span><br><span class="line">        <span class="keyword">this</span>.div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(<span class="keyword">this</span>.div);</span><br><span class="line"></span><br><span class="line">        ReactDom.render(children || <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>xxxx<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>, <span class="keyword">this</span>.div);</span><br><span class="line">    &#125;</span><br><span class="line">    destroy() &#123;     <span class="comment">// 销毁</span></span><br><span class="line">        ReactDom.unmountComponentAtNode(<span class="keyword">this</span>.div);</span><br><span class="line">        <span class="keyword">this</span>.div.parentNode.removeChild(<span class="keyword">this</span>.div);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    show: <span class="function"><span class="keyword">function</span>(<span class="params">children</span>) </span>&#123;</span><br><span class="line">        dialog = <span class="keyword">new</span> Dialog();</span><br><span class="line">        dialog.show(children);</span><br><span class="line">    &#125;,</span><br><span class="line">    hide: xxxxx</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 某组件</span></span><br><span class="line"><span class="keyword">import</span> Dialog <span class="keyword">from</span> <span class="string">'xxx'</span>;</span><br><span class="line">alert = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    Dialog.show(xxxx);</span><br><span class="line">&#125;</span><br><span class="line">render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;button onClick=&#123;<span class="keyword">this</span>.alert&#125;&gt;点击弹层&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="插槽：children"><a href="#插槽：children" class="headerlink" title="插槽：children"></a>插槽：children</h4><p>render props是现在很流行的一种渲染方式，通过回调函数，渲染子组件，参数可为父组件的任意属性值（<a href="https://reactjs.org/docs/render-props.html" target="_blank" rel="noopener">官网也有相应的介绍</a>）新版的contextApi也采用了这个模式。</p>
<p>很多种场景使用此方式的做法：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 权限控制组件，只需要封装一次connect，</span></span><br><span class="line"><span class="comment">// 通过render props向子组件传递权限</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AuthWidget</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.props.children(<span class="keyword">this</span>.props.auth);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; auth &#125; = state;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">auth</span>: state.auth &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps)(AuthWidget);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 其他组件使用</span></span><br><span class="line">&lt;AuthWidget</span><br><span class="line">    children=&#123;auth =&gt; auth.edit &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">a</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span>&#125;</span><br><span class="line">/&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用antd的form时</span></span><br><span class="line"><span class="keyword">const</span> Test = <span class="function">(<span class="params">&#123; form, children &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> children(form);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> FormTest = Form.create()(Test);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                xxxxx</span><br><span class="line">                &lt;FormTest&gt;</span><br><span class="line">                    &#123; form =&gt; &#123;</span><br><span class="line">                        <span class="keyword">this</span>.form = form;</span><br><span class="line">                        <span class="keyword">return</span> (</span><br><span class="line">                            &lt;Form&gt;</span><br><span class="line">                                &lt;Form.Item&gt;</span><br><span class="line">                                    &#123;getFieldDecorator(<span class="string">'field'</span>, xxx)(</span><br><span class="line">                                        &lt;Input placeholder=<span class="string">"请输入链接地址"</span> /&gt;</span><br><span class="line">                                    )&#125;</span><br><span class="line">                                &lt;<span class="regexp">/Form.Item&gt;</span></span><br><span class="line"><span class="regexp">                            &lt;/</span>Form&gt;</span><br><span class="line">                        )</span><br><span class="line">                    &#125;&#125;</span><br><span class="line">                &lt;<span class="regexp">/FormTest&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="子组件改变父组件的state"><a href="#子组件改变父组件的state" class="headerlink" title="子组件改变父组件的state"></a>子组件改变父组件的state</h4><p>子组件改变父组件的state方式有很多种，可以在父组件设置一个通用函数，类似：setParentState，通过子组件回调处理时，就可以更方便的统一处理：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父组件</span></span><br><span class="line">state = &#123;</span><br><span class="line">    data: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">setParentState = <span class="function"><span class="params">obj</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(obj);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子组件</span></span><br><span class="line">onClick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.props.setParentState(&#123; <span class="attr">data</span>: xxx &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="永远不要直接设置state的值"><a href="#永远不要直接设置state的值" class="headerlink" title="永远不要直接设置state的值"></a>永远不要直接设置state的值</h4><p>永远不要直接设置state的值：this.state.data = { a: 1 }。这个会导致几个问题：<br>1：组件不会重新渲染<br>2：shouldComponentUpdate(nextProps, nextState) 函数里面 this.state的值是已经改变了,和nextState的值相同。</p>
<p>举个栗子：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wrong</span></span><br><span class="line"><span class="keyword">const</span> &#123; data &#125; = <span class="keyword">this</span>.state;</span><br><span class="line">data.a = <span class="number">1</span>;     <span class="comment">// 等价于this.state.data.a = 1;</span></span><br><span class="line"><span class="keyword">this</span>.setState(&#123; data &#125;);</span><br><span class="line"><span class="comment">// shouldComponentUpdate里面观察到 this.state 和nextState的值是相同的</span></span><br><span class="line"><span class="comment">// 此时函数里面性能相关的优化是无效的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// correct  需要用到当前state值的写法</span></span><br><span class="line"><span class="keyword">this</span>.setState(<span class="function"><span class="params">state</span> =&gt;</span> (&#123; <span class="attr">data</span>: &#123;...state.data, <span class="attr">a</span>: <span class="number">1</span>&#125; &#125;))</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/react/" rel="tag"># react</a>
          
            <a href="/tags/toast/" rel="tag"># toast</a>
          
            <a href="/tags/插件/" rel="tag"># 插件</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/05/01/深入理解sideEffects配置/" rel="next" title="深入理解sideEffects配置">
                <i class="fa fa-chevron-left"></i> 深入理解sideEffects配置
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/05/14/JS如何统一滚动条样式/" rel="prev" title="JS如何统一滚动条样式">
                JS如何统一滚动条样式 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/tx.jpg" alt="李斌">
            
              <p class="site-author-name" itemprop="name">李斌</p>
              <p class="site-description motion-element" itemprop="description">人生如逆旅     我亦是行人</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">206</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">121</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/libin1991" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://juejin.im/user/57e737f6c4c971005f6bcd8d" target="_blank" title="juejin">
                      
                        <i class="fa fa-fw fa-spinner"></i>juejin</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#为什么选择插件，而不是组件？"><span class="nav-number">1.</span> <span class="nav-text">为什么选择插件，而不是组件？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#react-toast-alert-demo地址"><span class="nav-number">2.</span> <span class="nav-text">react-toast-alert demo地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vue-插件"><span class="nav-number">3.</span> <span class="nav-text">Vue 插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#React-插件toast的封装"><span class="nav-number">4.</span> <span class="nav-text">React 插件toast的封装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#为什么不挂载在React原型链上？"><span class="nav-number">5.</span> <span class="nav-text">为什么不挂载在React原型链上？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ES6-toast插件"><span class="nav-number">6.</span> <span class="nav-text">ES6 toast插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#附：React开发技巧"><span class="nav-number">7.</span> <span class="nav-text">附：React开发技巧</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#自动注册全局组件或函数-require-context"><span class="nav-number">7.1.</span> <span class="nav-text">自动注册全局组件或函数 require.context</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#一把梭改变state值"><span class="nav-number">7.2.</span> <span class="nav-text">一把梭改变state值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#this-setState支持异步async-await"><span class="nav-number">7.3.</span> <span class="nav-text">this.setState支持异步async await</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#唯一key"><span class="nav-number">7.4.</span> <span class="nav-text">唯一key</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三目运算"><span class="nav-number">7.5.</span> <span class="nav-text">三目运算</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用组件，传递props"><span class="nav-number">7.6.</span> <span class="nav-text">使用组件，传递props</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#简化props"><span class="nav-number">7.7.</span> <span class="nav-text">简化props</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#优化React-性能"><span class="nav-number">7.8.</span> <span class="nav-text">优化React 性能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建弹层"><span class="nav-number">7.9.</span> <span class="nav-text">创建弹层</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#插槽：children"><span class="nav-number">7.10.</span> <span class="nav-text">插槽：children</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#子组件改变父组件的state"><span class="nav-number">7.11.</span> <span class="nav-text">子组件改变父组件的state</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#永远不要直接设置state的值"><span class="nav-number">7.12.</span> <span class="nav-text">永远不要直接设置state的值</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">李斌</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

  
  <!--
  	描述：点击红心
  -->
  <script type="text/javascript" src="/js/src/clicklove.js"></script>
  <!--
  	描述：复制代码
  -->
  <script type="text/javascript" src="/js/src/clipboard.min.js"></script>
  <script type="text/javascript" src="/js/src/clipboard-use.js"></script>
</body>
</html>


